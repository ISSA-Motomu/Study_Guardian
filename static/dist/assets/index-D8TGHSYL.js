(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const r of l.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function s(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(i){if(i.ep)return;i.ep=!0;const l=s(i);fetch(i.href,l)}})();/**
* @vue/shared v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function qn(e){const t=Object.create(null);for(const s of e.split(","))t[s]=1;return s=>s in t}const Ce={},Qt=[],ct=()=>{},fi=()=>!1,en=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Xn=e=>e.startsWith("onUpdate:"),je=Object.assign,Yn=(e,t)=>{const s=e.indexOf(t);s>-1&&e.splice(s,1)},Dl=Object.prototype.hasOwnProperty,xe=(e,t)=>Dl.call(e,t),ne=Array.isArray,Zt=e=>js(e)==="[object Map]",tn=e=>js(e)==="[object Set]",vo=e=>js(e)==="[object Date]",ue=e=>typeof e=="function",Pe=e=>typeof e=="string",et=e=>typeof e=="symbol",_e=e=>e!==null&&typeof e=="object",pi=e=>(_e(e)||ue(e))&&ue(e.then)&&ue(e.catch),gi=Object.prototype.toString,js=e=>gi.call(e),El=e=>js(e).slice(8,-1),hi=e=>js(e)==="[object Object]",sn=e=>Pe(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,fs=qn(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),nn=e=>{const t=Object.create(null);return s=>t[s]||(t[s]=e(s))},Ol=/-\w/g,Pt=nn(e=>e.replace(Ol,t=>t.slice(1).toUpperCase())),Fl=/\B([A-Z])/g,Wt=nn(e=>e.replace(Fl,"-$1").toLowerCase()),mi=nn(e=>e.charAt(0).toUpperCase()+e.slice(1)),yn=nn(e=>e?`on${mi(e)}`:""),Tt=(e,t)=>!Object.is(e,t),Us=(e,...t)=>{for(let s=0;s<e.length;s++)e[s](...t)},vi=(e,t,s,n=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:n,value:s})},on=e=>{const t=parseFloat(e);return isNaN(t)?e:t},Nl=e=>{const t=Pe(e)?Number(e):NaN;return isNaN(t)?e:t};let bo;const ln=()=>bo||(bo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function he(e){if(ne(e)){const t={};for(let s=0;s<e.length;s++){const n=e[s],i=Pe(n)?Bl(n):he(n);if(i)for(const l in i)t[l]=i[l]}return t}else if(Pe(e)||_e(e))return e}const Ll=/;(?![^(]*\))/g,Ul=/:([^]+)/,Rl=/\/\*[^]*?\*\//g;function Bl(e){const t={};return e.replace(Rl,"").split(Ll).forEach(s=>{if(s){const n=s.split(Ul);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function le(e){let t="";if(Pe(e))t=e;else if(ne(e))for(let s=0;s<e.length;s++){const n=le(e[s]);n&&(t+=n+" ")}else if(_e(e))for(const s in e)e[s]&&(t+=s+" ");return t.trim()}const Hl="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Vl=qn(Hl);function bi(e){return!!e||e===""}function Kl(e,t){if(e.length!==t.length)return!1;let s=!0;for(let n=0;s&&n<e.length;n++)s=rn(e[n],t[n]);return s}function rn(e,t){if(e===t)return!0;let s=vo(e),n=vo(t);if(s||n)return s&&n?e.getTime()===t.getTime():!1;if(s=et(e),n=et(t),s||n)return e===t;if(s=ne(e),n=ne(t),s||n)return s&&n?Kl(e,t):!1;if(s=_e(e),n=_e(t),s||n){if(!s||!n)return!1;const i=Object.keys(e).length,l=Object.keys(t).length;if(i!==l)return!1;for(const r in e){const c=e.hasOwnProperty(r),u=t.hasOwnProperty(r);if(c&&!u||!c&&u||!rn(e[r],t[r]))return!1}}return String(e)===String(t)}function Wl(e,t){return e.findIndex(s=>rn(s,t))}const xi=e=>!!(e&&e.__v_isRef===!0),y=e=>Pe(e)?e:e==null?"":ne(e)||_e(e)&&(e.toString===gi||!ue(e.toString))?xi(e)?y(e.value):JSON.stringify(e,yi,2):String(e),yi=(e,t)=>xi(t)?yi(e,t.value):Zt(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((s,[n,i],l)=>(s[_n(n,l)+" =>"]=i,s),{})}:tn(t)?{[`Set(${t.size})`]:[...t.values()].map(s=>_n(s))}:et(t)?_n(t):_e(t)&&!ne(t)&&!hi(t)?String(t):t,_n=(e,t="")=>{var s;return et(e)?`Symbol(${(s=e.description)!=null?s:t})`:e};/**
* @vue/reactivity v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let De;class _i{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=De,!t&&De&&(this.index=(De.scopes||(De.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].pause();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].resume();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].resume()}}run(t){if(this._active){const s=De;try{return De=this,t()}finally{De=s}}}on(){++this._on===1&&(this.prevScope=De,De=this)}off(){this._on>0&&--this._on===0&&(De=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let s,n;for(s=0,n=this.effects.length;s<n;s++)this.effects[s].stop();for(this.effects.length=0,s=0,n=this.cleanups.length;s<n;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function wi(e){return new _i(e)}function ki(){return De}function zl(e,t=!1){De&&De.cleanups.push(e)}let Se;const wn=new WeakSet;class $i{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,De&&De.active&&De.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,wn.has(this)&&(wn.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Si(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,xo(this),Ti(this);const t=Se,s=Ze;Se=this,Ze=!0;try{return this.fn()}finally{Pi(this),Se=t,Ze=s,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Zn(t);this.deps=this.depsTail=void 0,xo(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?wn.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){En(this)&&this.run()}get dirty(){return En(this)}}let Ci=0,ps,gs;function Si(e,t=!1){if(e.flags|=8,t){e.next=gs,gs=e;return}e.next=ps,ps=e}function Jn(){Ci++}function Qn(){if(--Ci>0)return;if(gs){let t=gs;for(gs=void 0;t;){const s=t.next;t.next=void 0,t.flags&=-9,t=s}}let e;for(;ps;){let t=ps;for(ps=void 0;t;){const s=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(n){e||(e=n)}t=s}}if(e)throw e}function Ti(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Pi(e){let t,s=e.depsTail,n=s;for(;n;){const i=n.prevDep;n.version===-1?(n===s&&(s=i),Zn(n),Gl(n)):t=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=i}e.deps=t,e.depsTail=s}function En(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Mi(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Mi(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===ws)||(e.globalVersion=ws,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!En(e))))return;e.flags|=2;const t=e.dep,s=Se,n=Ze;Se=e,Ze=!0;try{Ti(e);const i=e.fn(e._value);(t.version===0||Tt(i,e._value))&&(e.flags|=128,e._value=i,t.version++)}catch(i){throw t.version++,i}finally{Se=s,Ze=n,Pi(e),e.flags&=-3}}function Zn(e,t=!1){const{dep:s,prevSub:n,nextSub:i}=e;if(n&&(n.nextSub=i,e.prevSub=void 0),i&&(i.prevSub=n,e.nextSub=void 0),s.subs===e&&(s.subs=n,!n&&s.computed)){s.computed.flags&=-5;for(let l=s.computed.deps;l;l=l.nextDep)Zn(l,!0)}!t&&!--s.sc&&s.map&&s.map.delete(s.key)}function Gl(e){const{prevDep:t,nextDep:s}=e;t&&(t.nextDep=s,e.prevDep=void 0),s&&(s.prevDep=t,e.nextDep=void 0)}let Ze=!0;const ji=[];function bt(){ji.push(Ze),Ze=!1}function xt(){const e=ji.pop();Ze=e===void 0?!0:e}function xo(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const s=Se;Se=void 0;try{t()}finally{Se=s}}}let ws=0;class ql{constructor(t,s){this.sub=t,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class eo{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!Se||!Ze||Se===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==Se)s=this.activeLink=new ql(Se,this),Se.deps?(s.prevDep=Se.depsTail,Se.depsTail.nextDep=s,Se.depsTail=s):Se.deps=Se.depsTail=s,Ai(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const n=s.nextDep;n.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=n),s.prevDep=Se.depsTail,s.nextDep=void 0,Se.depsTail.nextDep=s,Se.depsTail=s,Se.deps===s&&(Se.deps=n)}return s}trigger(t){this.version++,ws++,this.notify(t)}notify(t){Jn();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{Qn()}}}function Ai(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let n=t.deps;n;n=n.nextDep)Ai(n)}const s=e.dep.subs;s!==e&&(e.prevSub=s,s&&(s.nextSub=e)),e.dep.subs=e}}const Ks=new WeakMap,Ut=Symbol(""),On=Symbol(""),ks=Symbol("");function Ee(e,t,s){if(Ze&&Se){let n=Ks.get(e);n||Ks.set(e,n=new Map);let i=n.get(s);i||(n.set(s,i=new eo),i.map=n,i.key=s),i.track()}}function ht(e,t,s,n,i,l){const r=Ks.get(e);if(!r){ws++;return}const c=u=>{u&&u.trigger()};if(Jn(),t==="clear")r.forEach(c);else{const u=ne(e),d=u&&sn(s);if(u&&s==="length"){const p=Number(n);r.forEach((g,m)=>{(m==="length"||m===ks||!et(m)&&m>=p)&&c(g)})}else switch((s!==void 0||r.has(void 0))&&c(r.get(s)),d&&c(r.get(ks)),t){case"add":u?d&&c(r.get("length")):(c(r.get(Ut)),Zt(e)&&c(r.get(On)));break;case"delete":u||(c(r.get(Ut)),Zt(e)&&c(r.get(On)));break;case"set":Zt(e)&&c(r.get(Ut));break}}Qn()}function Xl(e,t){const s=Ks.get(e);return s&&s.get(t)}function qt(e){const t=ve(e);return t===e?t:(Ee(t,"iterate",ks),Ge(e)?t:t.map(tt))}function an(e){return Ee(e=ve(e),"iterate",ks),e}function $t(e,t){return yt(e)?ns(vt(e)?tt(t):t):tt(t)}const Yl={__proto__:null,[Symbol.iterator](){return kn(this,Symbol.iterator,e=>$t(this,e))},concat(...e){return qt(this).concat(...e.map(t=>ne(t)?qt(t):t))},entries(){return kn(this,"entries",e=>(e[1]=$t(this,e[1]),e))},every(e,t){return dt(this,"every",e,t,void 0,arguments)},filter(e,t){return dt(this,"filter",e,t,s=>s.map(n=>$t(this,n)),arguments)},find(e,t){return dt(this,"find",e,t,s=>$t(this,s),arguments)},findIndex(e,t){return dt(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return dt(this,"findLast",e,t,s=>$t(this,s),arguments)},findLastIndex(e,t){return dt(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return dt(this,"forEach",e,t,void 0,arguments)},includes(...e){return $n(this,"includes",e)},indexOf(...e){return $n(this,"indexOf",e)},join(e){return qt(this).join(e)},lastIndexOf(...e){return $n(this,"lastIndexOf",e)},map(e,t){return dt(this,"map",e,t,void 0,arguments)},pop(){return rs(this,"pop")},push(...e){return rs(this,"push",e)},reduce(e,...t){return yo(this,"reduce",e,t)},reduceRight(e,...t){return yo(this,"reduceRight",e,t)},shift(){return rs(this,"shift")},some(e,t){return dt(this,"some",e,t,void 0,arguments)},splice(...e){return rs(this,"splice",e)},toReversed(){return qt(this).toReversed()},toSorted(e){return qt(this).toSorted(e)},toSpliced(...e){return qt(this).toSpliced(...e)},unshift(...e){return rs(this,"unshift",e)},values(){return kn(this,"values",e=>$t(this,e))}};function kn(e,t,s){const n=an(e),i=n[t]();return n!==e&&!Ge(e)&&(i._next=i.next,i.next=()=>{const l=i._next();return l.done||(l.value=s(l.value)),l}),i}const Jl=Array.prototype;function dt(e,t,s,n,i,l){const r=an(e),c=r!==e&&!Ge(e),u=r[t];if(u!==Jl[t]){const g=u.apply(e,l);return c?tt(g):g}let d=s;r!==e&&(c?d=function(g,m){return s.call(this,$t(e,g),m,e)}:s.length>2&&(d=function(g,m){return s.call(this,g,m,e)}));const p=u.call(r,d,n);return c&&i?i(p):p}function yo(e,t,s,n){const i=an(e);let l=s;return i!==e&&(Ge(e)?s.length>3&&(l=function(r,c,u){return s.call(this,r,c,u,e)}):l=function(r,c,u){return s.call(this,r,$t(e,c),u,e)}),i[t](l,...n)}function $n(e,t,s){const n=ve(e);Ee(n,"iterate",ks);const i=n[t](...s);return(i===-1||i===!1)&&un(s[0])?(s[0]=ve(s[0]),n[t](...s)):i}function rs(e,t,s=[]){bt(),Jn();const n=ve(e)[t].apply(e,s);return Qn(),xt(),n}const Ql=qn("__proto__,__v_isRef,__isVue"),Ii=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(et));function Zl(e){et(e)||(e=String(e));const t=ve(this);return Ee(t,"has",e),t.hasOwnProperty(e)}class Di{constructor(t=!1,s=!1){this._isReadonly=t,this._isShallow=s}get(t,s,n){if(s==="__v_skip")return t.__v_skip;const i=this._isReadonly,l=this._isShallow;if(s==="__v_isReactive")return!i;if(s==="__v_isReadonly")return i;if(s==="__v_isShallow")return l;if(s==="__v_raw")return n===(i?l?cr:Ni:l?Fi:Oi).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const r=ne(t);if(!i){let u;if(r&&(u=Yl[s]))return u;if(s==="hasOwnProperty")return Zl}const c=Reflect.get(t,s,Te(t)?t:n);if((et(s)?Ii.has(s):Ql(s))||(i||Ee(t,"get",s),l))return c;if(Te(c)){const u=r&&sn(s)?c:c.value;return i&&_e(u)?Nn(u):u}return _e(c)?i?Nn(c):cn(c):c}}class Ei extends Di{constructor(t=!1){super(!1,t)}set(t,s,n,i){let l=t[s];const r=ne(t)&&sn(s);if(!this._isShallow){const d=yt(l);if(!Ge(n)&&!yt(n)&&(l=ve(l),n=ve(n)),!r&&Te(l)&&!Te(n))return d||(l.value=n),!0}const c=r?Number(s)<t.length:xe(t,s),u=Reflect.set(t,s,n,Te(t)?t:i);return t===ve(i)&&(c?Tt(n,l)&&ht(t,"set",s,n):ht(t,"add",s,n)),u}deleteProperty(t,s){const n=xe(t,s);t[s];const i=Reflect.deleteProperty(t,s);return i&&n&&ht(t,"delete",s,void 0),i}has(t,s){const n=Reflect.has(t,s);return(!et(s)||!Ii.has(s))&&Ee(t,"has",s),n}ownKeys(t){return Ee(t,"iterate",ne(t)?"length":Ut),Reflect.ownKeys(t)}}class er extends Di{constructor(t=!1){super(!0,t)}set(t,s){return!0}deleteProperty(t,s){return!0}}const tr=new Ei,sr=new er,nr=new Ei(!0);const Fn=e=>e,Es=e=>Reflect.getPrototypeOf(e);function or(e,t,s){return function(...n){const i=this.__v_raw,l=ve(i),r=Zt(l),c=e==="entries"||e===Symbol.iterator&&r,u=e==="keys"&&r,d=i[e](...n),p=s?Fn:t?ns:tt;return!t&&Ee(l,"iterate",u?On:Ut),je(Object.create(d),{next(){const{value:g,done:m}=d.next();return m?{value:g,done:m}:{value:c?[p(g[0]),p(g[1])]:p(g),done:m}}})}}function Os(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function ir(e,t){const s={get(i){const l=this.__v_raw,r=ve(l),c=ve(i);e||(Tt(i,c)&&Ee(r,"get",i),Ee(r,"get",c));const{has:u}=Es(r),d=t?Fn:e?ns:tt;if(u.call(r,i))return d(l.get(i));if(u.call(r,c))return d(l.get(c));l!==r&&l.get(i)},get size(){const i=this.__v_raw;return!e&&Ee(ve(i),"iterate",Ut),i.size},has(i){const l=this.__v_raw,r=ve(l),c=ve(i);return e||(Tt(i,c)&&Ee(r,"has",i),Ee(r,"has",c)),i===c?l.has(i):l.has(i)||l.has(c)},forEach(i,l){const r=this,c=r.__v_raw,u=ve(c),d=t?Fn:e?ns:tt;return!e&&Ee(u,"iterate",Ut),c.forEach((p,g)=>i.call(l,d(p),d(g),r))}};return je(s,e?{add:Os("add"),set:Os("set"),delete:Os("delete"),clear:Os("clear")}:{add(i){!t&&!Ge(i)&&!yt(i)&&(i=ve(i));const l=ve(this);return Es(l).has.call(l,i)||(l.add(i),ht(l,"add",i,i)),this},set(i,l){!t&&!Ge(l)&&!yt(l)&&(l=ve(l));const r=ve(this),{has:c,get:u}=Es(r);let d=c.call(r,i);d||(i=ve(i),d=c.call(r,i));const p=u.call(r,i);return r.set(i,l),d?Tt(l,p)&&ht(r,"set",i,l):ht(r,"add",i,l),this},delete(i){const l=ve(this),{has:r,get:c}=Es(l);let u=r.call(l,i);u||(i=ve(i),u=r.call(l,i)),c&&c.call(l,i);const d=l.delete(i);return u&&ht(l,"delete",i,void 0),d},clear(){const i=ve(this),l=i.size!==0,r=i.clear();return l&&ht(i,"clear",void 0,void 0),r}}),["keys","values","entries",Symbol.iterator].forEach(i=>{s[i]=or(i,e,t)}),s}function to(e,t){const s=ir(e,t);return(n,i,l)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?n:Reflect.get(xe(s,i)&&i in n?s:n,i,l)}const lr={get:to(!1,!1)},rr={get:to(!1,!0)},ar={get:to(!0,!1)};const Oi=new WeakMap,Fi=new WeakMap,Ni=new WeakMap,cr=new WeakMap;function ur(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function dr(e){return e.__v_skip||!Object.isExtensible(e)?0:ur(El(e))}function cn(e){return yt(e)?e:so(e,!1,tr,lr,Oi)}function fr(e){return so(e,!1,nr,rr,Fi)}function Nn(e){return so(e,!0,sr,ar,Ni)}function so(e,t,s,n,i){if(!_e(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const l=dr(e);if(l===0)return e;const r=i.get(e);if(r)return r;const c=new Proxy(e,l===2?n:s);return i.set(e,c),c}function vt(e){return yt(e)?vt(e.__v_raw):!!(e&&e.__v_isReactive)}function yt(e){return!!(e&&e.__v_isReadonly)}function Ge(e){return!!(e&&e.__v_isShallow)}function un(e){return e?!!e.__v_raw:!1}function ve(e){const t=e&&e.__v_raw;return t?ve(t):e}function no(e){return!xe(e,"__v_skip")&&Object.isExtensible(e)&&vi(e,"__v_skip",!0),e}const tt=e=>_e(e)?cn(e):e,ns=e=>_e(e)?Nn(e):e;function Te(e){return e?e.__v_isRef===!0:!1}function E(e){return pr(e,!1)}function pr(e,t){return Te(e)?e:new gr(e,t)}class gr{constructor(t,s){this.dep=new eo,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?t:ve(t),this._value=s?t:tt(t),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(t){const s=this._rawValue,n=this.__v_isShallow||Ge(t)||yt(t);t=n?t:ve(t),Tt(t,s)&&(this._rawValue=t,this._value=n?t:tt(t),this.dep.trigger())}}function H(e){return Te(e)?e.value:e}const hr={get:(e,t,s)=>t==="__v_raw"?e:H(Reflect.get(e,t,s)),set:(e,t,s,n)=>{const i=e[t];return Te(i)&&!Te(s)?(i.value=s,!0):Reflect.set(e,t,s,n)}};function Li(e){return vt(e)?e:new Proxy(e,hr)}function mr(e){const t=ne(e)?new Array(e.length):{};for(const s in e)t[s]=br(e,s);return t}class vr{constructor(t,s,n){this._object=t,this._key=s,this._defaultValue=n,this.__v_isRef=!0,this._value=void 0,this._raw=ve(t);let i=!0,l=t;if(!ne(t)||!sn(String(s)))do i=!un(l)||Ge(l);while(i&&(l=l.__v_raw));this._shallow=i}get value(){let t=this._object[this._key];return this._shallow&&(t=H(t)),this._value=t===void 0?this._defaultValue:t}set value(t){if(this._shallow&&Te(this._raw[this._key])){const s=this._object[this._key];if(Te(s)){s.value=t;return}}this._object[this._key]=t}get dep(){return Xl(this._raw,this._key)}}function br(e,t,s){return new vr(e,t,s)}class xr{constructor(t,s,n){this.fn=t,this.setter=s,this._value=void 0,this.dep=new eo(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=ws-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&Se!==this)return Si(this,!0),!0}get value(){const t=this.dep.track();return Mi(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function yr(e,t,s=!1){let n,i;return ue(e)?n=e:(n=e.get,i=e.set),new xr(n,i,s)}const Fs={},Ws=new WeakMap;let Ft;function _r(e,t=!1,s=Ft){if(s){let n=Ws.get(s);n||Ws.set(s,n=[]),n.push(e)}}function wr(e,t,s=Ce){const{immediate:n,deep:i,once:l,scheduler:r,augmentJob:c,call:u}=s,d=w=>i?w:Ge(w)||i===!1||i===0?mt(w,1):mt(w);let p,g,m,h,x=!1,T=!1;if(Te(e)?(g=()=>e.value,x=Ge(e)):vt(e)?(g=()=>d(e),x=!0):ne(e)?(T=!0,x=e.some(w=>vt(w)||Ge(w)),g=()=>e.map(w=>{if(Te(w))return w.value;if(vt(w))return d(w);if(ue(w))return u?u(w,2):w()})):ue(e)?t?g=u?()=>u(e,2):e:g=()=>{if(m){bt();try{m()}finally{xt()}}const w=Ft;Ft=p;try{return u?u(e,3,[h]):e(h)}finally{Ft=w}}:g=ct,t&&i){const w=g,F=i===!0?1/0:i;g=()=>mt(w(),F)}const I=ki(),C=()=>{p.stop(),I&&I.active&&Yn(I.effects,p)};if(l&&t){const w=t;t=(...F)=>{w(...F),C()}}let B=T?new Array(e.length).fill(Fs):Fs;const O=w=>{if(!(!(p.flags&1)||!p.dirty&&!w))if(t){const F=p.run();if(i||x||(T?F.some((Z,ie)=>Tt(Z,B[ie])):Tt(F,B))){m&&m();const Z=Ft;Ft=p;try{const ie=[F,B===Fs?void 0:T&&B[0]===Fs?[]:B,h];B=F,u?u(t,3,ie):t(...ie)}finally{Ft=Z}}}else p.run()};return c&&c(O),p=new $i(g),p.scheduler=r?()=>r(O,!1):O,h=w=>_r(w,!1,p),m=p.onStop=()=>{const w=Ws.get(p);if(w){if(u)u(w,4);else for(const F of w)F();Ws.delete(p)}},t?n?O(!0):B=p.run():r?r(O.bind(null,!0),!0):p.run(),C.pause=p.pause.bind(p),C.resume=p.resume.bind(p),C.stop=C,C}function mt(e,t=1/0,s){if(t<=0||!_e(e)||e.__v_skip||(s=s||new Map,(s.get(e)||0)>=t))return e;if(s.set(e,t),t--,Te(e))mt(e.value,t,s);else if(ne(e))for(let n=0;n<e.length;n++)mt(e[n],t,s);else if(tn(e)||Zt(e))e.forEach(n=>{mt(n,t,s)});else if(hi(e)){for(const n in e)mt(e[n],t,s);for(const n of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,n)&&mt(e[n],t,s)}return e}/**
* @vue/runtime-core v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function As(e,t,s,n){try{return n?e(...n):e()}catch(i){dn(i,t,s)}}function st(e,t,s,n){if(ue(e)){const i=As(e,t,s,n);return i&&pi(i)&&i.catch(l=>{dn(l,t,s)}),i}if(ne(e)){const i=[];for(let l=0;l<e.length;l++)i.push(st(e[l],t,s,n));return i}}function dn(e,t,s,n=!0){const i=t?t.vnode:null,{errorHandler:l,throwUnhandledErrorInProduction:r}=t&&t.appContext.config||Ce;if(t){let c=t.parent;const u=t.proxy,d=`https://vuejs.org/error-reference/#runtime-${s}`;for(;c;){const p=c.ec;if(p){for(let g=0;g<p.length;g++)if(p[g](e,u,d)===!1)return}c=c.parent}if(l){bt(),As(l,null,10,[e,u,d]),xt();return}}kr(e,s,i,n,r)}function kr(e,t,s,n=!0,i=!1){if(i)throw e;console.error(e)}const Ue=[];let rt=-1;const es=[];let Ct=null,Jt=0;const Ui=Promise.resolve();let zs=null;function oo(e){const t=zs||Ui;return e?t.then(this?e.bind(this):e):t}function $r(e){let t=rt+1,s=Ue.length;for(;t<s;){const n=t+s>>>1,i=Ue[n],l=$s(i);l<e||l===e&&i.flags&2?t=n+1:s=n}return t}function io(e){if(!(e.flags&1)){const t=$s(e),s=Ue[Ue.length-1];!s||!(e.flags&2)&&t>=$s(s)?Ue.push(e):Ue.splice($r(t),0,e),e.flags|=1,Ri()}}function Ri(){zs||(zs=Ui.then(Hi))}function Cr(e){ne(e)?es.push(...e):Ct&&e.id===-1?Ct.splice(Jt+1,0,e):e.flags&1||(es.push(e),e.flags|=1),Ri()}function _o(e,t,s=rt+1){for(;s<Ue.length;s++){const n=Ue[s];if(n&&n.flags&2){if(e&&n.id!==e.uid)continue;Ue.splice(s,1),s--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function Bi(e){if(es.length){const t=[...new Set(es)].sort((s,n)=>$s(s)-$s(n));if(es.length=0,Ct){Ct.push(...t);return}for(Ct=t,Jt=0;Jt<Ct.length;Jt++){const s=Ct[Jt];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}Ct=null,Jt=0}}const $s=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Hi(e){try{for(rt=0;rt<Ue.length;rt++){const t=Ue[rt];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),As(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;rt<Ue.length;rt++){const t=Ue[rt];t&&(t.flags&=-2)}rt=-1,Ue.length=0,Bi(),zs=null,(Ue.length||es.length)&&Hi()}}let Fe=null,Vi=null;function Gs(e){const t=Fe;return Fe=e,Vi=e&&e.type.__scopeId||null,t}function $e(e,t=Fe,s){if(!t||e._n)return e;const n=(...i)=>{n._d&&Ys(-1);const l=Gs(t);let r;try{r=e(...i)}finally{Gs(l),n._d&&Ys(1)}return r};return n._n=!0,n._c=!0,n._d=!0,n}function Rt(e,t){if(Fe===null)return e;const s=bn(Fe),n=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[l,r,c,u=Ce]=t[i];l&&(ue(l)&&(l={mounted:l,updated:l}),l.deep&&mt(r),n.push({dir:l,instance:s,value:r,oldValue:void 0,arg:c,modifiers:u}))}return e}function It(e,t,s,n){const i=e.dirs,l=t&&t.dirs;for(let r=0;r<i.length;r++){const c=i[r];l&&(c.oldValue=l[r].value);let u=c.dir[n];u&&(bt(),st(u,s,8,[e.el,c,e,t]),xt())}}function Sr(e,t){if(Re){let s=Re.provides;const n=Re.parent&&Re.parent.provides;n===s&&(s=Re.provides=Object.create(n)),s[e]=t}}function hs(e,t,s=!1){const n=uo();if(n||Ht){let i=Ht?Ht._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return s&&ue(t)?t.call(n&&n.proxy):t}}function Tr(){return!!(uo()||Ht)}const Pr=Symbol.for("v-scx"),Mr=()=>hs(Pr);function Bt(e,t,s){return Ki(e,t,s)}function Ki(e,t,s=Ce){const{immediate:n,deep:i,flush:l,once:r}=s,c=je({},s),u=t&&n||!t&&l!=="post";let d;if(Ps){if(l==="sync"){const h=Mr();d=h.__watcherHandles||(h.__watcherHandles=[])}else if(!u){const h=()=>{};return h.stop=ct,h.resume=ct,h.pause=ct,h}}const p=Re;c.call=(h,x,T)=>st(h,p,x,T);let g=!1;l==="post"?c.scheduler=h=>{Le(h,p&&p.suspense)}:l!=="sync"&&(g=!0,c.scheduler=(h,x)=>{x?h():io(h)}),c.augmentJob=h=>{t&&(h.flags|=4),g&&(h.flags|=2,p&&(h.id=p.uid,h.i=p))};const m=wr(e,t,c);return Ps&&(d?d.push(m):u&&m()),m}function jr(e,t,s){const n=this.proxy,i=Pe(e)?e.includes(".")?Wi(n,e):()=>n[e]:e.bind(n,n);let l;ue(t)?l=t:(l=t.handler,s=t);const r=Is(this),c=Ki(i,l.bind(n),s);return r(),c}function Wi(e,t){const s=t.split(".");return()=>{let n=e;for(let i=0;i<s.length&&n;i++)n=n[s[i]];return n}}const zi=Symbol("_vte"),Gi=e=>e.__isTeleport,ms=e=>e&&(e.disabled||e.disabled===""),wo=e=>e&&(e.defer||e.defer===""),ko=e=>typeof SVGElement<"u"&&e instanceof SVGElement,$o=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,Ln=(e,t)=>{const s=e&&e.to;return Pe(s)?t?t(s):null:s},qi={name:"Teleport",__isTeleport:!0,process(e,t,s,n,i,l,r,c,u,d){const{mc:p,pc:g,pbc:m,o:{insert:h,querySelector:x,createText:T,createComment:I}}=d,C=ms(t.props);let{shapeFlag:B,children:O,dynamicChildren:w}=t;if(e==null){const F=t.el=T(""),Z=t.anchor=T("");h(F,s,n),h(Z,s,n);const ie=(A,Y)=>{B&16&&p(O,A,Y,i,l,r,c,u)},K=()=>{const A=t.target=Ln(t.props,x),Y=Xi(A,t,T,h);A&&(r!=="svg"&&ko(A)?r="svg":r!=="mathml"&&$o(A)&&(r="mathml"),i&&i.isCE&&(i.ce._teleportTargets||(i.ce._teleportTargets=new Set)).add(A),C||(ie(A,Y),Rs(t,!1)))};C&&(ie(s,Z),Rs(t,!0)),wo(t.props)?(t.el.__isMounted=!1,Le(()=>{K(),delete t.el.__isMounted},l)):K()}else{if(wo(t.props)&&e.el.__isMounted===!1){Le(()=>{qi.process(e,t,s,n,i,l,r,c,u,d)},l);return}t.el=e.el,t.targetStart=e.targetStart;const F=t.anchor=e.anchor,Z=t.target=e.target,ie=t.targetAnchor=e.targetAnchor,K=ms(e.props),A=K?s:Z,Y=K?F:ie;if(r==="svg"||ko(Z)?r="svg":(r==="mathml"||$o(Z))&&(r="mathml"),w?(m(e.dynamicChildren,w,A,i,l,r,c),ao(e,t,!0)):u||g(e,t,A,Y,i,l,r,c,!1),C)K?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):Ns(t,s,F,d,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const z=t.target=Ln(t.props,x);z&&Ns(t,z,null,d,0)}else K&&Ns(t,Z,ie,d,1);Rs(t,C)}},remove(e,t,s,{um:n,o:{remove:i}},l){const{shapeFlag:r,children:c,anchor:u,targetStart:d,targetAnchor:p,target:g,props:m}=e;if(g&&(i(d),i(p)),l&&i(u),r&16){const h=l||!ms(m);for(let x=0;x<c.length;x++){const T=c[x];n(T,t,s,h,!!T.dynamicChildren)}}},move:Ns,hydrate:Ar};function Ns(e,t,s,{o:{insert:n},m:i},l=2){l===0&&n(e.targetAnchor,t,s);const{el:r,anchor:c,shapeFlag:u,children:d,props:p}=e,g=l===2;if(g&&n(r,t,s),(!g||ms(p))&&u&16)for(let m=0;m<d.length;m++)i(d[m],t,s,2);g&&n(c,t,s)}function Ar(e,t,s,n,i,l,{o:{nextSibling:r,parentNode:c,querySelector:u,insert:d,createText:p}},g){function m(T,I,C,B){I.anchor=g(r(T),I,c(T),s,n,i,l),I.targetStart=C,I.targetAnchor=B}const h=t.target=Ln(t.props,u),x=ms(t.props);if(h){const T=h._lpa||h.firstChild;if(t.shapeFlag&16)if(x)m(e,t,T,T&&r(T));else{t.anchor=r(e);let I=T;for(;I;){if(I&&I.nodeType===8){if(I.data==="teleport start anchor")t.targetStart=I;else if(I.data==="teleport anchor"){t.targetAnchor=I,h._lpa=t.targetAnchor&&r(t.targetAnchor);break}}I=r(I)}t.targetAnchor||Xi(h,t,p,d),g(T&&r(T),t,h,s,n,i,l)}Rs(t,x)}else x&&t.shapeFlag&16&&m(e,t,e,r(e));return t.anchor&&r(t.anchor)}const fn=qi;function Rs(e,t){const s=e.ctx;if(s&&s.ut){let n,i;for(t?(n=e.el,i=e.anchor):(n=e.targetStart,i=e.targetAnchor);n&&n!==i;)n.nodeType===1&&n.setAttribute("data-v-owner",s.uid),n=n.nextSibling;s.ut()}}function Xi(e,t,s,n){const i=t.targetStart=s(""),l=t.targetAnchor=s("");return i[zi]=l,e&&(n(i,e),n(l,e)),l}const gt=Symbol("_leaveCb"),Ls=Symbol("_enterCb");function Ir(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return qe(()=>{e.isMounted=!0}),nl(()=>{e.isUnmounting=!0}),e}const Xe=[Function,Array],Yi={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Xe,onEnter:Xe,onAfterEnter:Xe,onEnterCancelled:Xe,onBeforeLeave:Xe,onLeave:Xe,onAfterLeave:Xe,onLeaveCancelled:Xe,onBeforeAppear:Xe,onAppear:Xe,onAfterAppear:Xe,onAppearCancelled:Xe},Ji=e=>{const t=e.subTree;return t.component?Ji(t.component):t},Dr={name:"BaseTransition",props:Yi,setup(e,{slots:t}){const s=uo(),n=Ir();return()=>{const i=t.default&&el(t.default(),!0);if(!i||!i.length)return;const l=Qi(i),r=ve(e),{mode:c}=r;if(n.isLeaving)return Cn(l);const u=Co(l);if(!u)return Cn(l);let d=Un(u,r,n,s,g=>d=g);u.type!==Oe&&Cs(u,d);let p=s.subTree&&Co(s.subTree);if(p&&p.type!==Oe&&!Nt(p,u)&&Ji(s).type!==Oe){let g=Un(p,r,n,s);if(Cs(p,g),c==="out-in"&&u.type!==Oe)return n.isLeaving=!0,g.afterLeave=()=>{n.isLeaving=!1,s.job.flags&8||s.update(),delete g.afterLeave,p=void 0},Cn(l);c==="in-out"&&u.type!==Oe?g.delayLeave=(m,h,x)=>{const T=Zi(n,p);T[String(p.key)]=p,m[gt]=()=>{h(),m[gt]=void 0,delete d.delayedLeave,p=void 0},d.delayedLeave=()=>{x(),delete d.delayedLeave,p=void 0}}:p=void 0}else p&&(p=void 0);return l}}};function Qi(e){let t=e[0];if(e.length>1){for(const s of e)if(s.type!==Oe){t=s;break}}return t}const Er=Dr;function Zi(e,t){const{leavingVNodes:s}=e;let n=s.get(t.type);return n||(n=Object.create(null),s.set(t.type,n)),n}function Un(e,t,s,n,i){const{appear:l,mode:r,persisted:c=!1,onBeforeEnter:u,onEnter:d,onAfterEnter:p,onEnterCancelled:g,onBeforeLeave:m,onLeave:h,onAfterLeave:x,onLeaveCancelled:T,onBeforeAppear:I,onAppear:C,onAfterAppear:B,onAppearCancelled:O}=t,w=String(e.key),F=Zi(s,e),Z=(A,Y)=>{A&&st(A,n,9,Y)},ie=(A,Y)=>{const z=Y[1];Z(A,Y),ne(A)?A.every(k=>k.length<=1)&&z():A.length<=1&&z()},K={mode:r,persisted:c,beforeEnter(A){let Y=u;if(!s.isMounted)if(l)Y=I||u;else return;A[gt]&&A[gt](!0);const z=F[w];z&&Nt(e,z)&&z.el[gt]&&z.el[gt](),Z(Y,[A])},enter(A){let Y=d,z=p,k=g;if(!s.isMounted)if(l)Y=C||d,z=B||p,k=O||g;else return;let R=!1;const G=A[Ls]=N=>{R||(R=!0,N?Z(k,[A]):Z(z,[A]),K.delayedLeave&&K.delayedLeave(),A[Ls]=void 0)};Y?ie(Y,[A,G]):G()},leave(A,Y){const z=String(e.key);if(A[Ls]&&A[Ls](!0),s.isUnmounting)return Y();Z(m,[A]);let k=!1;const R=A[gt]=G=>{k||(k=!0,Y(),G?Z(T,[A]):Z(x,[A]),A[gt]=void 0,F[z]===e&&delete F[z])};F[z]=e,h?ie(h,[A,R]):R()},clone(A){const Y=Un(A,t,s,n,i);return i&&i(Y),Y}};return K}function Cn(e){if(pn(e))return e=Mt(e),e.children=null,e}function Co(e){if(!pn(e))return Gi(e.type)&&e.children?Qi(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:s}=e;if(s){if(t&16)return s[0];if(t&32&&ue(s.default))return s.default()}}function Cs(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Cs(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function el(e,t=!1,s){let n=[],i=0;for(let l=0;l<e.length;l++){let r=e[l];const c=s==null?r.key:String(s)+String(r.key!=null?r.key:l);r.type===oe?(r.patchFlag&128&&i++,n=n.concat(el(r.children,t,c))):(t||r.type!==Oe)&&n.push(c!=null?Mt(r,{key:c}):r)}if(i>1)for(let l=0;l<n.length;l++)n[l].patchFlag=-2;return n}function tl(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const qs=new WeakMap;function vs(e,t,s,n,i=!1){if(ne(e)){e.forEach((x,T)=>vs(x,t&&(ne(t)?t[T]:t),s,n,i));return}if(ts(n)&&!i){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&vs(e,t,s,n.component.subTree);return}const l=n.shapeFlag&4?bn(n.component):n.el,r=i?null:l,{i:c,r:u}=e,d=t&&t.r,p=c.refs===Ce?c.refs={}:c.refs,g=c.setupState,m=ve(g),h=g===Ce?fi:x=>xe(m,x);if(d!=null&&d!==u){if(So(t),Pe(d))p[d]=null,h(d)&&(g[d]=null);else if(Te(d)){d.value=null;const x=t;x.k&&(p[x.k]=null)}}if(ue(u))As(u,c,12,[r,p]);else{const x=Pe(u),T=Te(u);if(x||T){const I=()=>{if(e.f){const C=x?h(u)?g[u]:p[u]:u.value;if(i)ne(C)&&Yn(C,l);else if(ne(C))C.includes(l)||C.push(l);else if(x)p[u]=[l],h(u)&&(g[u]=p[u]);else{const B=[l];u.value=B,e.k&&(p[e.k]=B)}}else x?(p[u]=r,h(u)&&(g[u]=r)):T&&(u.value=r,e.k&&(p[e.k]=r))};if(r){const C=()=>{I(),qs.delete(e)};C.id=-1,qs.set(e,C),Le(C,s)}else So(e),I()}}}function So(e){const t=qs.get(e);t&&(t.flags|=8,qs.delete(e))}ln().requestIdleCallback;ln().cancelIdleCallback;const ts=e=>!!e.type.__asyncLoader,pn=e=>e.type.__isKeepAlive;function Or(e,t){sl(e,"a",t)}function Fr(e,t){sl(e,"da",t)}function sl(e,t,s=Re){const n=e.__wdc||(e.__wdc=()=>{let i=s;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(gn(t,n,s),s){let i=s.parent;for(;i&&i.parent;)pn(i.parent.vnode)&&Nr(n,t,s,i),i=i.parent}}function Nr(e,t,s,n){const i=gn(t,e,n,!0);hn(()=>{Yn(n[t],i)},s)}function gn(e,t,s=Re,n=!1){if(s){const i=s[e]||(s[e]=[]),l=t.__weh||(t.__weh=(...r)=>{bt();const c=Is(s),u=st(t,s,e,r);return c(),xt(),u});return n?i.unshift(l):i.push(l),l}}const _t=e=>(t,s=Re)=>{(!Ps||e==="sp")&&gn(e,(...n)=>t(...n),s)},Lr=_t("bm"),qe=_t("m"),Ur=_t("bu"),Rr=_t("u"),nl=_t("bum"),hn=_t("um"),Br=_t("sp"),Hr=_t("rtg"),Vr=_t("rtc");function Kr(e,t=Re){gn("ec",e,t)}const Wr=Symbol.for("v-ndc");function pe(e,t,s,n){let i;const l=s,r=ne(e);if(r||Pe(e)){const c=r&&vt(e);let u=!1,d=!1;c&&(u=!Ge(e),d=yt(e),e=an(e)),i=new Array(e.length);for(let p=0,g=e.length;p<g;p++)i[p]=t(u?d?ns(tt(e[p])):tt(e[p]):e[p],p,void 0,l)}else if(typeof e=="number"){i=new Array(e);for(let c=0;c<e;c++)i[c]=t(c+1,c,void 0,l)}else if(_e(e))if(e[Symbol.iterator])i=Array.from(e,(c,u)=>t(c,u,void 0,l));else{const c=Object.keys(e);i=new Array(c.length);for(let u=0,d=c.length;u<d;u++){const p=c[u];i[u]=t(e[p],p,u,l)}}else i=[];return i}function zr(e,t,s={},n,i){if(Fe.ce||Fe.parent&&ts(Fe.parent)&&Fe.parent.ce){const d=Object.keys(s).length>0;return b(),ye(oe,null,[re("slot",s,n)],d?-2:64)}let l=e[t];l&&l._c&&(l._d=!1),b();const r=l&&ol(l(s)),c=s.key||r&&r.key,u=ye(oe,{key:(c&&!et(c)?c:`_${t}`)+(!r&&n?"_fb":"")},r||[],r&&e._===1?64:-2);return u.scopeId&&(u.slotScopeIds=[u.scopeId+"-s"]),l&&l._c&&(l._d=!0),u}function ol(e){return e.some(t=>Ts(t)?!(t.type===Oe||t.type===oe&&!ol(t.children)):!0)?e:null}const Rn=e=>e?wl(e)?bn(e):Rn(e.parent):null,bs=je(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Rn(e.parent),$root:e=>Rn(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>ll(e),$forceUpdate:e=>e.f||(e.f=()=>{io(e.update)}),$nextTick:e=>e.n||(e.n=oo.bind(e.proxy)),$watch:e=>jr.bind(e)}),Sn=(e,t)=>e!==Ce&&!e.__isScriptSetup&&xe(e,t),Gr={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:s,setupState:n,data:i,props:l,accessCache:r,type:c,appContext:u}=e;if(t[0]!=="$"){const m=r[t];if(m!==void 0)switch(m){case 1:return n[t];case 2:return i[t];case 4:return s[t];case 3:return l[t]}else{if(Sn(n,t))return r[t]=1,n[t];if(i!==Ce&&xe(i,t))return r[t]=2,i[t];if(xe(l,t))return r[t]=3,l[t];if(s!==Ce&&xe(s,t))return r[t]=4,s[t];Bn&&(r[t]=0)}}const d=bs[t];let p,g;if(d)return t==="$attrs"&&Ee(e.attrs,"get",""),d(e);if((p=c.__cssModules)&&(p=p[t]))return p;if(s!==Ce&&xe(s,t))return r[t]=4,s[t];if(g=u.config.globalProperties,xe(g,t))return g[t]},set({_:e},t,s){const{data:n,setupState:i,ctx:l}=e;return Sn(i,t)?(i[t]=s,!0):n!==Ce&&xe(n,t)?(n[t]=s,!0):xe(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(l[t]=s,!0)},has({_:{data:e,setupState:t,accessCache:s,ctx:n,appContext:i,props:l,type:r}},c){let u;return!!(s[c]||e!==Ce&&c[0]!=="$"&&xe(e,c)||Sn(t,c)||xe(l,c)||xe(n,c)||xe(bs,c)||xe(i.config.globalProperties,c)||(u=r.__cssModules)&&u[c])},defineProperty(e,t,s){return s.get!=null?e._.accessCache[t]=0:xe(s,"value")&&this.set(e,t,s.value,null),Reflect.defineProperty(e,t,s)}};function To(e){return ne(e)?e.reduce((t,s)=>(t[s]=null,t),{}):e}let Bn=!0;function qr(e){const t=ll(e),s=e.proxy,n=e.ctx;Bn=!1,t.beforeCreate&&Po(t.beforeCreate,e,"bc");const{data:i,computed:l,methods:r,watch:c,provide:u,inject:d,created:p,beforeMount:g,mounted:m,beforeUpdate:h,updated:x,activated:T,deactivated:I,beforeDestroy:C,beforeUnmount:B,destroyed:O,unmounted:w,render:F,renderTracked:Z,renderTriggered:ie,errorCaptured:K,serverPrefetch:A,expose:Y,inheritAttrs:z,components:k,directives:R,filters:G}=t;if(d&&Xr(d,n,null),r)for(const J in r){const X=r[J];ue(X)&&(n[J]=X.bind(s))}if(i){const J=i.call(s,s);_e(J)&&(e.data=cn(J))}if(Bn=!0,l)for(const J in l){const X=l[J],ce=ue(X)?X.bind(s,s):ue(X.get)?X.get.bind(s,s):ct,fe=!ue(X)&&ue(X.set)?X.set.bind(s):ct,we=q({get:ce,set:fe});Object.defineProperty(n,J,{enumerable:!0,configurable:!0,get:()=>we.value,set:me=>we.value=me})}if(c)for(const J in c)il(c[J],n,s,J);if(u){const J=ue(u)?u.call(s):u;Reflect.ownKeys(J).forEach(X=>{Sr(X,J[X])})}p&&Po(p,e,"c");function S(J,X){ne(X)?X.forEach(ce=>J(ce.bind(s))):X&&J(X.bind(s))}if(S(Lr,g),S(qe,m),S(Ur,h),S(Rr,x),S(Or,T),S(Fr,I),S(Kr,K),S(Vr,Z),S(Hr,ie),S(nl,B),S(hn,w),S(Br,A),ne(Y))if(Y.length){const J=e.exposed||(e.exposed={});Y.forEach(X=>{Object.defineProperty(J,X,{get:()=>s[X],set:ce=>s[X]=ce,enumerable:!0})})}else e.exposed||(e.exposed={});F&&e.render===ct&&(e.render=F),z!=null&&(e.inheritAttrs=z),k&&(e.components=k),R&&(e.directives=R),A&&tl(e)}function Xr(e,t,s=ct){ne(e)&&(e=Hn(e));for(const n in e){const i=e[n];let l;_e(i)?"default"in i?l=hs(i.from||n,i.default,!0):l=hs(i.from||n):l=hs(i),Te(l)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>l.value,set:r=>l.value=r}):t[n]=l}}function Po(e,t,s){st(ne(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,s)}function il(e,t,s,n){let i=n.includes(".")?Wi(s,n):()=>s[n];if(Pe(e)){const l=t[e];ue(l)&&Bt(i,l)}else if(ue(e))Bt(i,e.bind(s));else if(_e(e))if(ne(e))e.forEach(l=>il(l,t,s,n));else{const l=ue(e.handler)?e.handler.bind(s):t[e.handler];ue(l)&&Bt(i,l,e)}}function ll(e){const t=e.type,{mixins:s,extends:n}=t,{mixins:i,optionsCache:l,config:{optionMergeStrategies:r}}=e.appContext,c=l.get(t);let u;return c?u=c:!i.length&&!s&&!n?u=t:(u={},i.length&&i.forEach(d=>Xs(u,d,r,!0)),Xs(u,t,r)),_e(t)&&l.set(t,u),u}function Xs(e,t,s,n=!1){const{mixins:i,extends:l}=t;l&&Xs(e,l,s,!0),i&&i.forEach(r=>Xs(e,r,s,!0));for(const r in t)if(!(n&&r==="expose")){const c=Yr[r]||s&&s[r];e[r]=c?c(e[r],t[r]):t[r]}return e}const Yr={data:Mo,props:jo,emits:jo,methods:ds,computed:ds,beforeCreate:Ne,created:Ne,beforeMount:Ne,mounted:Ne,beforeUpdate:Ne,updated:Ne,beforeDestroy:Ne,beforeUnmount:Ne,destroyed:Ne,unmounted:Ne,activated:Ne,deactivated:Ne,errorCaptured:Ne,serverPrefetch:Ne,components:ds,directives:ds,watch:Qr,provide:Mo,inject:Jr};function Mo(e,t){return t?e?function(){return je(ue(e)?e.call(this,this):e,ue(t)?t.call(this,this):t)}:t:e}function Jr(e,t){return ds(Hn(e),Hn(t))}function Hn(e){if(ne(e)){const t={};for(let s=0;s<e.length;s++)t[e[s]]=e[s];return t}return e}function Ne(e,t){return e?[...new Set([].concat(e,t))]:t}function ds(e,t){return e?je(Object.create(null),e,t):t}function jo(e,t){return e?ne(e)&&ne(t)?[...new Set([...e,...t])]:je(Object.create(null),To(e),To(t??{})):t}function Qr(e,t){if(!e)return t;if(!t)return e;const s=je(Object.create(null),e);for(const n in t)s[n]=Ne(e[n],t[n]);return s}function rl(){return{app:null,config:{isNativeTag:fi,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Zr=0;function ea(e,t){return function(n,i=null){ue(n)||(n=je({},n)),i!=null&&!_e(i)&&(i=null);const l=rl(),r=new WeakSet,c=[];let u=!1;const d=l.app={_uid:Zr++,_component:n,_props:i,_container:null,_context:l,_instance:null,version:Da,get config(){return l.config},set config(p){},use(p,...g){return r.has(p)||(p&&ue(p.install)?(r.add(p),p.install(d,...g)):ue(p)&&(r.add(p),p(d,...g))),d},mixin(p){return l.mixins.includes(p)||l.mixins.push(p),d},component(p,g){return g?(l.components[p]=g,d):l.components[p]},directive(p,g){return g?(l.directives[p]=g,d):l.directives[p]},mount(p,g,m){if(!u){const h=d._ceVNode||re(n,i);return h.appContext=l,m===!0?m="svg":m===!1&&(m=void 0),e(h,p,m),u=!0,d._container=p,p.__vue_app__=d,bn(h.component)}},onUnmount(p){c.push(p)},unmount(){u&&(st(c,d._instance,16),e(null,d._container),delete d._container.__vue_app__)},provide(p,g){return l.provides[p]=g,d},runWithContext(p){const g=Ht;Ht=d;try{return p()}finally{Ht=g}}};return d}}let Ht=null;const ta=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Pt(t)}Modifiers`]||e[`${Wt(t)}Modifiers`];function sa(e,t,...s){if(e.isUnmounted)return;const n=e.vnode.props||Ce;let i=s;const l=t.startsWith("update:"),r=l&&ta(n,t.slice(7));r&&(r.trim&&(i=s.map(p=>Pe(p)?p.trim():p)),r.number&&(i=s.map(on)));let c,u=n[c=yn(t)]||n[c=yn(Pt(t))];!u&&l&&(u=n[c=yn(Wt(t))]),u&&st(u,e,6,i);const d=n[c+"Once"];if(d){if(!e.emitted)e.emitted={};else if(e.emitted[c])return;e.emitted[c]=!0,st(d,e,6,i)}}const na=new WeakMap;function al(e,t,s=!1){const n=s?na:t.emitsCache,i=n.get(e);if(i!==void 0)return i;const l=e.emits;let r={},c=!1;if(!ue(e)){const u=d=>{const p=al(d,t,!0);p&&(c=!0,je(r,p))};!s&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}return!l&&!c?(_e(e)&&n.set(e,null),null):(ne(l)?l.forEach(u=>r[u]=null):je(r,l),_e(e)&&n.set(e,r),r)}function mn(e,t){return!e||!en(t)?!1:(t=t.slice(2).replace(/Once$/,""),xe(e,t[0].toLowerCase()+t.slice(1))||xe(e,Wt(t))||xe(e,t))}function Ao(e){const{type:t,vnode:s,proxy:n,withProxy:i,propsOptions:[l],slots:r,attrs:c,emit:u,render:d,renderCache:p,props:g,data:m,setupState:h,ctx:x,inheritAttrs:T}=e,I=Gs(e);let C,B;try{if(s.shapeFlag&4){const w=i||n,F=w;C=at(d.call(F,w,p,g,h,m,x)),B=c}else{const w=t;C=at(w.length>1?w(g,{attrs:c,slots:r,emit:u}):w(g,null)),B=t.props?c:oa(c)}}catch(w){xs.length=0,dn(w,e,1),C=re(Oe)}let O=C;if(B&&T!==!1){const w=Object.keys(B),{shapeFlag:F}=O;w.length&&F&7&&(l&&w.some(Xn)&&(B=ia(B,l)),O=Mt(O,B,!1,!0))}return s.dirs&&(O=Mt(O,null,!1,!0),O.dirs=O.dirs?O.dirs.concat(s.dirs):s.dirs),s.transition&&Cs(O,s.transition),C=O,Gs(I),C}const oa=e=>{let t;for(const s in e)(s==="class"||s==="style"||en(s))&&((t||(t={}))[s]=e[s]);return t},ia=(e,t)=>{const s={};for(const n in e)(!Xn(n)||!(n.slice(9)in t))&&(s[n]=e[n]);return s};function la(e,t,s){const{props:n,children:i,component:l}=e,{props:r,children:c,patchFlag:u}=t,d=l.emitsOptions;if(t.dirs||t.transition)return!0;if(s&&u>=0){if(u&1024)return!0;if(u&16)return n?Io(n,r,d):!!r;if(u&8){const p=t.dynamicProps;for(let g=0;g<p.length;g++){const m=p[g];if(r[m]!==n[m]&&!mn(d,m))return!0}}}else return(i||c)&&(!c||!c.$stable)?!0:n===r?!1:n?r?Io(n,r,d):!0:!!r;return!1}function Io(e,t,s){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let i=0;i<n.length;i++){const l=n[i];if(t[l]!==e[l]&&!mn(s,l))return!0}return!1}function ra({vnode:e,parent:t},s){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===e&&(n.el=e.el),n===e)(e=t.vnode).el=s,t=t.parent;else break}}const cl={},ul=()=>Object.create(cl),dl=e=>Object.getPrototypeOf(e)===cl;function aa(e,t,s,n=!1){const i={},l=ul();e.propsDefaults=Object.create(null),fl(e,t,i,l);for(const r in e.propsOptions[0])r in i||(i[r]=void 0);s?e.props=n?i:fr(i):e.type.props?e.props=i:e.props=l,e.attrs=l}function ca(e,t,s,n){const{props:i,attrs:l,vnode:{patchFlag:r}}=e,c=ve(i),[u]=e.propsOptions;let d=!1;if((n||r>0)&&!(r&16)){if(r&8){const p=e.vnode.dynamicProps;for(let g=0;g<p.length;g++){let m=p[g];if(mn(e.emitsOptions,m))continue;const h=t[m];if(u)if(xe(l,m))h!==l[m]&&(l[m]=h,d=!0);else{const x=Pt(m);i[x]=Vn(u,c,x,h,e,!1)}else h!==l[m]&&(l[m]=h,d=!0)}}}else{fl(e,t,i,l)&&(d=!0);let p;for(const g in c)(!t||!xe(t,g)&&((p=Wt(g))===g||!xe(t,p)))&&(u?s&&(s[g]!==void 0||s[p]!==void 0)&&(i[g]=Vn(u,c,g,void 0,e,!0)):delete i[g]);if(l!==c)for(const g in l)(!t||!xe(t,g))&&(delete l[g],d=!0)}d&&ht(e.attrs,"set","")}function fl(e,t,s,n){const[i,l]=e.propsOptions;let r=!1,c;if(t)for(let u in t){if(fs(u))continue;const d=t[u];let p;i&&xe(i,p=Pt(u))?!l||!l.includes(p)?s[p]=d:(c||(c={}))[p]=d:mn(e.emitsOptions,u)||(!(u in n)||d!==n[u])&&(n[u]=d,r=!0)}if(l){const u=ve(s),d=c||Ce;for(let p=0;p<l.length;p++){const g=l[p];s[g]=Vn(i,u,g,d[g],e,!xe(d,g))}}return r}function Vn(e,t,s,n,i,l){const r=e[s];if(r!=null){const c=xe(r,"default");if(c&&n===void 0){const u=r.default;if(r.type!==Function&&!r.skipFactory&&ue(u)){const{propsDefaults:d}=i;if(s in d)n=d[s];else{const p=Is(i);n=d[s]=u.call(null,t),p()}}else n=u;i.ce&&i.ce._setProp(s,n)}r[0]&&(l&&!c?n=!1:r[1]&&(n===""||n===Wt(s))&&(n=!0))}return n}const ua=new WeakMap;function pl(e,t,s=!1){const n=s?ua:t.propsCache,i=n.get(e);if(i)return i;const l=e.props,r={},c=[];let u=!1;if(!ue(e)){const p=g=>{u=!0;const[m,h]=pl(g,t,!0);je(r,m),h&&c.push(...h)};!s&&t.mixins.length&&t.mixins.forEach(p),e.extends&&p(e.extends),e.mixins&&e.mixins.forEach(p)}if(!l&&!u)return _e(e)&&n.set(e,Qt),Qt;if(ne(l))for(let p=0;p<l.length;p++){const g=Pt(l[p]);Do(g)&&(r[g]=Ce)}else if(l)for(const p in l){const g=Pt(p);if(Do(g)){const m=l[p],h=r[g]=ne(m)||ue(m)?{type:m}:je({},m),x=h.type;let T=!1,I=!0;if(ne(x))for(let C=0;C<x.length;++C){const B=x[C],O=ue(B)&&B.name;if(O==="Boolean"){T=!0;break}else O==="String"&&(I=!1)}else T=ue(x)&&x.name==="Boolean";h[0]=T,h[1]=I,(T||xe(h,"default"))&&c.push(g)}}const d=[r,c];return _e(e)&&n.set(e,d),d}function Do(e){return e[0]!=="$"&&!fs(e)}const lo=e=>e==="_"||e==="_ctx"||e==="$stable",ro=e=>ne(e)?e.map(at):[at(e)],da=(e,t,s)=>{if(t._n)return t;const n=$e((...i)=>ro(t(...i)),s);return n._c=!1,n},gl=(e,t,s)=>{const n=e._ctx;for(const i in e){if(lo(i))continue;const l=e[i];if(ue(l))t[i]=da(i,l,n);else if(l!=null){const r=ro(l);t[i]=()=>r}}},hl=(e,t)=>{const s=ro(t);e.slots.default=()=>s},ml=(e,t,s)=>{for(const n in t)(s||!lo(n))&&(e[n]=t[n])},fa=(e,t,s)=>{const n=e.slots=ul();if(e.vnode.shapeFlag&32){const i=t._;i?(ml(n,t,s),s&&vi(n,"_",i,!0)):gl(t,n)}else t&&hl(e,t)},pa=(e,t,s)=>{const{vnode:n,slots:i}=e;let l=!0,r=Ce;if(n.shapeFlag&32){const c=t._;c?s&&c===1?l=!1:ml(i,t,s):(l=!t.$stable,gl(t,i)),r=t}else t&&(hl(e,t),r={default:1});if(l)for(const c in i)!lo(c)&&r[c]==null&&delete i[c]},Le=ba;function ga(e){return ha(e)}function ha(e,t){const s=ln();s.__VUE__=!0;const{insert:n,remove:i,patchProp:l,createElement:r,createText:c,createComment:u,setText:d,setElementText:p,parentNode:g,nextSibling:m,setScopeId:h=ct,insertStaticContent:x}=e,T=(a,f,v,M=null,j=null,P=null,L=void 0,W=null,V=!!f.dynamicChildren)=>{if(a===f)return;a&&!Nt(a,f)&&(M=ut(a),me(a,j,P,!0),a=null),f.patchFlag===-2&&(V=!1,f.dynamicChildren=null);const{type:U,ref:ee,shapeFlag:Q}=f;switch(U){case vn:I(a,f,v,M);break;case Oe:C(a,f,v,M);break;case Bs:a==null&&B(f,v,M,L);break;case oe:k(a,f,v,M,j,P,L,W,V);break;default:Q&1?F(a,f,v,M,j,P,L,W,V):Q&6?R(a,f,v,M,j,P,L,W,V):(Q&64||Q&128)&&U.process(a,f,v,M,j,P,L,W,V,D)}ee!=null&&j?vs(ee,a&&a.ref,P,f||a,!f):ee==null&&a&&a.ref!=null&&vs(a.ref,null,P,a,!0)},I=(a,f,v,M)=>{if(a==null)n(f.el=c(f.children),v,M);else{const j=f.el=a.el;f.children!==a.children&&d(j,f.children)}},C=(a,f,v,M)=>{a==null?n(f.el=u(f.children||""),v,M):f.el=a.el},B=(a,f,v,M)=>{[a.el,a.anchor]=x(a.children,f,v,M,a.el,a.anchor)},O=({el:a,anchor:f},v,M)=>{let j;for(;a&&a!==f;)j=m(a),n(a,v,M),a=j;n(f,v,M)},w=({el:a,anchor:f})=>{let v;for(;a&&a!==f;)v=m(a),i(a),a=v;i(f)},F=(a,f,v,M,j,P,L,W,V)=>{if(f.type==="svg"?L="svg":f.type==="math"&&(L="mathml"),a==null)Z(f,v,M,j,P,L,W,V);else{const U=a.el&&a.el._isVueCE?a.el:null;try{U&&U._beginPatch(),A(a,f,j,P,L,W,V)}finally{U&&U._endPatch()}}},Z=(a,f,v,M,j,P,L,W)=>{let V,U;const{props:ee,shapeFlag:Q,transition:te,dirs:se}=a;if(V=a.el=r(a.type,P,ee&&ee.is,ee),Q&8?p(V,a.children):Q&16&&K(a.children,V,null,M,j,Tn(a,P),L,W),se&&It(a,null,M,"created"),ie(V,a,a.scopeId,L,M),ee){for(const ke in ee)ke!=="value"&&!fs(ke)&&l(V,ke,null,ee[ke],P,M);"value"in ee&&l(V,"value",null,ee.value,P),(U=ee.onVnodeBeforeMount)&&lt(U,M,a)}se&&It(a,null,M,"beforeMount");const de=ma(j,te);de&&te.beforeEnter(V),n(V,f,v),((U=ee&&ee.onVnodeMounted)||de||se)&&Le(()=>{U&&lt(U,M,a),de&&te.enter(V),se&&It(a,null,M,"mounted")},j)},ie=(a,f,v,M,j)=>{if(v&&h(a,v),M)for(let P=0;P<M.length;P++)h(a,M[P]);if(j){let P=j.subTree;if(f===P||xl(P.type)&&(P.ssContent===f||P.ssFallback===f)){const L=j.vnode;ie(a,L,L.scopeId,L.slotScopeIds,j.parent)}}},K=(a,f,v,M,j,P,L,W,V=0)=>{for(let U=V;U<a.length;U++){const ee=a[U]=W?St(a[U]):at(a[U]);T(null,ee,f,v,M,j,P,L,W)}},A=(a,f,v,M,j,P,L)=>{const W=f.el=a.el;let{patchFlag:V,dynamicChildren:U,dirs:ee}=f;V|=a.patchFlag&16;const Q=a.props||Ce,te=f.props||Ce;let se;if(v&&Dt(v,!1),(se=te.onVnodeBeforeUpdate)&&lt(se,v,f,a),ee&&It(f,a,v,"beforeUpdate"),v&&Dt(v,!0),(Q.innerHTML&&te.innerHTML==null||Q.textContent&&te.textContent==null)&&p(W,""),U?Y(a.dynamicChildren,U,W,v,M,Tn(f,j),P):L||X(a,f,W,null,v,M,Tn(f,j),P,!1),V>0){if(V&16)z(W,Q,te,v,j);else if(V&2&&Q.class!==te.class&&l(W,"class",null,te.class,j),V&4&&l(W,"style",Q.style,te.style,j),V&8){const de=f.dynamicProps;for(let ke=0;ke<de.length;ke++){const ge=de[ke],Ie=Q[ge],Be=te[ge];(Be!==Ie||ge==="value")&&l(W,ge,Ie,Be,j,v)}}V&1&&a.children!==f.children&&p(W,f.children)}else!L&&U==null&&z(W,Q,te,v,j);((se=te.onVnodeUpdated)||ee)&&Le(()=>{se&&lt(se,v,f,a),ee&&It(f,a,v,"updated")},M)},Y=(a,f,v,M,j,P,L)=>{for(let W=0;W<f.length;W++){const V=a[W],U=f[W],ee=V.el&&(V.type===oe||!Nt(V,U)||V.shapeFlag&198)?g(V.el):v;T(V,U,ee,null,M,j,P,L,!0)}},z=(a,f,v,M,j)=>{if(f!==v){if(f!==Ce)for(const P in f)!fs(P)&&!(P in v)&&l(a,P,f[P],null,j,M);for(const P in v){if(fs(P))continue;const L=v[P],W=f[P];L!==W&&P!=="value"&&l(a,P,W,L,j,M)}"value"in v&&l(a,"value",f.value,v.value,j)}},k=(a,f,v,M,j,P,L,W,V)=>{const U=f.el=a?a.el:c(""),ee=f.anchor=a?a.anchor:c("");let{patchFlag:Q,dynamicChildren:te,slotScopeIds:se}=f;se&&(W=W?W.concat(se):se),a==null?(n(U,v,M),n(ee,v,M),K(f.children||[],v,ee,j,P,L,W,V)):Q>0&&Q&64&&te&&a.dynamicChildren&&a.dynamicChildren.length===te.length?(Y(a.dynamicChildren,te,v,j,P,L,W),(f.key!=null||j&&f===j.subTree)&&ao(a,f,!0)):X(a,f,v,ee,j,P,L,W,V)},R=(a,f,v,M,j,P,L,W,V)=>{f.slotScopeIds=W,a==null?f.shapeFlag&512?j.ctx.activate(f,v,M,L,V):G(f,v,M,j,P,L,V):N(a,f,V)},G=(a,f,v,M,j,P,L)=>{const W=a.component=Sa(a,M,j);if(pn(a)&&(W.ctx.renderer=D),Ta(W,!1,L),W.asyncDep){if(j&&j.registerDep(W,S,L),!a.el){const V=W.subTree=re(Oe);C(null,V,f,v),a.placeholder=V.el}}else S(W,a,f,v,j,P,L)},N=(a,f,v)=>{const M=f.component=a.component;if(la(a,f,v))if(M.asyncDep&&!M.asyncResolved){J(M,f,v);return}else M.next=f,M.update();else f.el=a.el,M.vnode=f},S=(a,f,v,M,j,P,L)=>{const W=()=>{if(a.isMounted){let{next:Q,bu:te,u:se,parent:de,vnode:ke}=a;{const ot=vl(a);if(ot){Q&&(Q.el=ke.el,J(a,Q,L)),ot.asyncDep.then(()=>{a.isUnmounted||W()});return}}let ge=Q,Ie;Dt(a,!1),Q?(Q.el=ke.el,J(a,Q,L)):Q=ke,te&&Us(te),(Ie=Q.props&&Q.props.onVnodeBeforeUpdate)&&lt(Ie,de,Q,ke),Dt(a,!0);const Be=Ao(a),nt=a.subTree;a.subTree=Be,T(nt,Be,g(nt.el),ut(nt),a,j,P),Q.el=Be.el,ge===null&&ra(a,Be.el),se&&Le(se,j),(Ie=Q.props&&Q.props.onVnodeUpdated)&&Le(()=>lt(Ie,de,Q,ke),j)}else{let Q;const{el:te,props:se}=f,{bm:de,m:ke,parent:ge,root:Ie,type:Be}=a,nt=ts(f);Dt(a,!1),de&&Us(de),!nt&&(Q=se&&se.onVnodeBeforeMount)&&lt(Q,ge,f),Dt(a,!0);{Ie.ce&&Ie.ce._def.shadowRoot!==!1&&Ie.ce._injectChildStyle(Be);const ot=a.subTree=Ao(a);T(null,ot,v,M,a,j,P),f.el=ot.el}if(ke&&Le(ke,j),!nt&&(Q=se&&se.onVnodeMounted)){const ot=f;Le(()=>lt(Q,ge,ot),j)}(f.shapeFlag&256||ge&&ts(ge.vnode)&&ge.vnode.shapeFlag&256)&&a.a&&Le(a.a,j),a.isMounted=!0,f=v=M=null}};a.scope.on();const V=a.effect=new $i(W);a.scope.off();const U=a.update=V.run.bind(V),ee=a.job=V.runIfDirty.bind(V);ee.i=a,ee.id=a.uid,V.scheduler=()=>io(ee),Dt(a,!0),U()},J=(a,f,v)=>{f.component=a;const M=a.vnode.props;a.vnode=f,a.next=null,ca(a,f.props,M,v),pa(a,f.children,v),bt(),_o(a),xt()},X=(a,f,v,M,j,P,L,W,V=!1)=>{const U=a&&a.children,ee=a?a.shapeFlag:0,Q=f.children,{patchFlag:te,shapeFlag:se}=f;if(te>0){if(te&128){fe(U,Q,v,M,j,P,L,W,V);return}else if(te&256){ce(U,Q,v,M,j,P,L,W,V);return}}se&8?(ee&16&&Ve(U,j,P),Q!==U&&p(v,Q)):ee&16?se&16?fe(U,Q,v,M,j,P,L,W,V):Ve(U,j,P,!0):(ee&8&&p(v,""),se&16&&K(Q,v,M,j,P,L,W,V))},ce=(a,f,v,M,j,P,L,W,V)=>{a=a||Qt,f=f||Qt;const U=a.length,ee=f.length,Q=Math.min(U,ee);let te;for(te=0;te<Q;te++){const se=f[te]=V?St(f[te]):at(f[te]);T(a[te],se,v,null,j,P,L,W,V)}U>ee?Ve(a,j,P,!0,!1,Q):K(f,v,M,j,P,L,W,V,Q)},fe=(a,f,v,M,j,P,L,W,V)=>{let U=0;const ee=f.length;let Q=a.length-1,te=ee-1;for(;U<=Q&&U<=te;){const se=a[U],de=f[U]=V?St(f[U]):at(f[U]);if(Nt(se,de))T(se,de,v,null,j,P,L,W,V);else break;U++}for(;U<=Q&&U<=te;){const se=a[Q],de=f[te]=V?St(f[te]):at(f[te]);if(Nt(se,de))T(se,de,v,null,j,P,L,W,V);else break;Q--,te--}if(U>Q){if(U<=te){const se=te+1,de=se<ee?f[se].el:M;for(;U<=te;)T(null,f[U]=V?St(f[U]):at(f[U]),v,de,j,P,L,W,V),U++}}else if(U>te)for(;U<=Q;)me(a[U],j,P,!0),U++;else{const se=U,de=U,ke=new Map;for(U=de;U<=te;U++){const Ke=f[U]=V?St(f[U]):at(f[U]);Ke.key!=null&&ke.set(Ke.key,U)}let ge,Ie=0;const Be=te-de+1;let nt=!1,ot=0;const ls=new Array(Be);for(U=0;U<Be;U++)ls[U]=0;for(U=se;U<=Q;U++){const Ke=a[U];if(Ie>=Be){me(Ke,j,P,!0);continue}let it;if(Ke.key!=null)it=ke.get(Ke.key);else for(ge=de;ge<=te;ge++)if(ls[ge-de]===0&&Nt(Ke,f[ge])){it=ge;break}it===void 0?me(Ke,j,P,!0):(ls[it-de]=U+1,it>=ot?ot=it:nt=!0,T(Ke,f[it],v,null,j,P,L,W,V),Ie++)}const go=nt?va(ls):Qt;for(ge=go.length-1,U=Be-1;U>=0;U--){const Ke=de+U,it=f[Ke],ho=f[Ke+1],mo=Ke+1<ee?ho.el||bl(ho):M;ls[U]===0?T(null,it,v,mo,j,P,L,W,V):nt&&(ge<0||U!==go[ge]?we(it,v,mo,2):ge--)}}},we=(a,f,v,M,j=null)=>{const{el:P,type:L,transition:W,children:V,shapeFlag:U}=a;if(U&6){we(a.component.subTree,f,v,M);return}if(U&128){a.suspense.move(f,v,M);return}if(U&64){L.move(a,f,v,D);return}if(L===oe){n(P,f,v);for(let Q=0;Q<V.length;Q++)we(V[Q],f,v,M);n(a.anchor,f,v);return}if(L===Bs){O(a,f,v);return}if(M!==2&&U&1&&W)if(M===0)W.beforeEnter(P),n(P,f,v),Le(()=>W.enter(P),j);else{const{leave:Q,delayLeave:te,afterLeave:se}=W,de=()=>{a.ctx.isUnmounted?i(P):n(P,f,v)},ke=()=>{P._isLeaving&&P[gt](!0),Q(P,()=>{de(),se&&se()})};te?te(P,de,ke):ke()}else n(P,f,v)},me=(a,f,v,M=!1,j=!1)=>{const{type:P,props:L,ref:W,children:V,dynamicChildren:U,shapeFlag:ee,patchFlag:Q,dirs:te,cacheIndex:se}=a;if(Q===-2&&(j=!1),W!=null&&(bt(),vs(W,null,v,a,!0),xt()),se!=null&&(f.renderCache[se]=void 0),ee&256){f.ctx.deactivate(a);return}const de=ee&1&&te,ke=!ts(a);let ge;if(ke&&(ge=L&&L.onVnodeBeforeUnmount)&&lt(ge,f,a),ee&6)is(a.component,v,M);else{if(ee&128){a.suspense.unmount(v,M);return}de&&It(a,null,f,"beforeUnmount"),ee&64?a.type.remove(a,f,v,D,M):U&&!U.hasOnce&&(P!==oe||Q>0&&Q&64)?Ve(U,f,v,!1,!0):(P===oe&&Q&384||!j&&ee&16)&&Ve(V,f,v),M&&Ae(a)}(ke&&(ge=L&&L.onVnodeUnmounted)||de)&&Le(()=>{ge&&lt(ge,f,a),de&&It(a,null,f,"unmounted")},v)},Ae=a=>{const{type:f,el:v,anchor:M,transition:j}=a;if(f===oe){be(v,M);return}if(f===Bs){w(a);return}const P=()=>{i(v),j&&!j.persisted&&j.afterLeave&&j.afterLeave()};if(a.shapeFlag&1&&j&&!j.persisted){const{leave:L,delayLeave:W}=j,V=()=>L(v,P);W?W(a.el,P,V):V()}else P()},be=(a,f)=>{let v;for(;a!==f;)v=m(a),i(a),a=v;i(f)},is=(a,f,v)=>{const{bum:M,scope:j,job:P,subTree:L,um:W,m:V,a:U}=a;Eo(V),Eo(U),M&&Us(M),j.stop(),P&&(P.flags|=8,me(L,a,f,v)),W&&Le(W,f),Le(()=>{a.isUnmounted=!0},f)},Ve=(a,f,v,M=!1,j=!1,P=0)=>{for(let L=P;L<a.length;L++)me(a[L],f,v,M,j)},ut=a=>{if(a.shapeFlag&6)return ut(a.component.subTree);if(a.shapeFlag&128)return a.suspense.next();const f=m(a.anchor||a.el),v=f&&f[zi];return v?m(v):f};let At=!1;const Gt=(a,f,v)=>{let M;a==null?f._vnode&&(me(f._vnode,null,null,!0),M=f._vnode.component):T(f._vnode||null,a,f,null,null,null,v),f._vnode=a,At||(At=!0,_o(M),Bi(),At=!1)},D={p:T,um:me,m:we,r:Ae,mt:G,mc:K,pc:X,pbc:Y,n:ut,o:e};return{render:Gt,hydrate:void 0,createApp:ea(Gt)}}function Tn({type:e,props:t},s){return s==="svg"&&e==="foreignObject"||s==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:s}function Dt({effect:e,job:t},s){s?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function ma(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function ao(e,t,s=!1){const n=e.children,i=t.children;if(ne(n)&&ne(i))for(let l=0;l<n.length;l++){const r=n[l];let c=i[l];c.shapeFlag&1&&!c.dynamicChildren&&((c.patchFlag<=0||c.patchFlag===32)&&(c=i[l]=St(i[l]),c.el=r.el),!s&&c.patchFlag!==-2&&ao(r,c)),c.type===vn&&(c.patchFlag!==-1?c.el=r.el:c.__elIndex=l+(e.type===oe?1:0)),c.type===Oe&&!c.el&&(c.el=r.el)}}function va(e){const t=e.slice(),s=[0];let n,i,l,r,c;const u=e.length;for(n=0;n<u;n++){const d=e[n];if(d!==0){if(i=s[s.length-1],e[i]<d){t[n]=i,s.push(n);continue}for(l=0,r=s.length-1;l<r;)c=l+r>>1,e[s[c]]<d?l=c+1:r=c;d<e[s[l]]&&(l>0&&(t[n]=s[l-1]),s[l]=n)}}for(l=s.length,r=s[l-1];l-- >0;)s[l]=r,r=t[r];return s}function vl(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:vl(t)}function Eo(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}function bl(e){if(e.placeholder)return e.placeholder;const t=e.component;return t?bl(t.subTree):null}const xl=e=>e.__isSuspense;function ba(e,t){t&&t.pendingBranch?ne(e)?t.effects.push(...e):t.effects.push(e):Cr(e)}const oe=Symbol.for("v-fgt"),vn=Symbol.for("v-txt"),Oe=Symbol.for("v-cmt"),Bs=Symbol.for("v-stc"),xs=[];let We=null;function b(e=!1){xs.push(We=e?null:[])}function xa(){xs.pop(),We=xs[xs.length-1]||null}let Ss=1;function Ys(e,t=!1){Ss+=e,e<0&&We&&t&&(We.hasOnce=!0)}function yl(e){return e.dynamicChildren=Ss>0?We||Qt:null,xa(),Ss>0&&We&&We.push(e),e}function _(e,t,s,n,i,l){return yl(o(e,t,s,n,i,l,!0))}function ye(e,t,s,n,i){return yl(re(e,t,s,n,i,!0))}function Ts(e){return e?e.__v_isVNode===!0:!1}function Nt(e,t){return e.type===t.type&&e.key===t.key}const _l=({key:e})=>e??null,Hs=({ref:e,ref_key:t,ref_for:s})=>(typeof e=="number"&&(e=""+e),e!=null?Pe(e)||Te(e)||ue(e)?{i:Fe,r:e,k:t,f:!!s}:e:null);function o(e,t=null,s=null,n=0,i=null,l=e===oe?0:1,r=!1,c=!1){const u={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&_l(t),ref:t&&Hs(t),scopeId:Vi,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:l,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Fe};return c?(co(u,s),l&128&&e.normalize(u)):s&&(u.shapeFlag|=Pe(s)?8:16),Ss>0&&!r&&We&&(u.patchFlag>0||l&6)&&u.patchFlag!==32&&We.push(u),u}const re=ya;function ya(e,t=null,s=null,n=0,i=null,l=!1){if((!e||e===Wr)&&(e=Oe),Ts(e)){const c=Mt(e,t,!0);return s&&co(c,s),Ss>0&&!l&&We&&(c.shapeFlag&6?We[We.indexOf(e)]=c:We.push(c)),c.patchFlag=-2,c}if(Aa(e)&&(e=e.__vccOpts),t){t=_a(t);let{class:c,style:u}=t;c&&!Pe(c)&&(t.class=le(c)),_e(u)&&(un(u)&&!ne(u)&&(u=je({},u)),t.style=he(u))}const r=Pe(e)?1:xl(e)?128:Gi(e)?64:_e(e)?4:ue(e)?2:0;return o(e,t,s,n,i,r,l,!0)}function _a(e){return e?un(e)||dl(e)?je({},e):e:null}function Mt(e,t,s=!1,n=!1){const{props:i,ref:l,patchFlag:r,children:c,transition:u}=e,d=t?ka(i||{},t):i,p={__v_isVNode:!0,__v_skip:!0,type:e.type,props:d,key:d&&_l(d),ref:t&&t.ref?s&&l?ne(l)?l.concat(Hs(t)):[l,Hs(t)]:Hs(t):l,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:c,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==oe?r===-1?16:r|16:r,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:u,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Mt(e.ssContent),ssFallback:e.ssFallback&&Mt(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return u&&n&&Cs(p,u.clone(p)),p}function Vt(e=" ",t=0){return re(vn,null,e,t)}function wa(e,t){const s=re(Bs,null,e);return s.staticCount=t,s}function ae(e="",t=!1){return t?(b(),ye(Oe,null,e)):re(Oe,null,e)}function at(e){return e==null||typeof e=="boolean"?re(Oe):ne(e)?re(oe,null,e.slice()):Ts(e)?St(e):re(vn,null,String(e))}function St(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Mt(e)}function co(e,t){let s=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(ne(t))s=16;else if(typeof t=="object")if(n&65){const i=t.default;i&&(i._c&&(i._d=!1),co(e,i()),i._c&&(i._d=!0));return}else{s=32;const i=t._;!i&&!dl(t)?t._ctx=Fe:i===3&&Fe&&(Fe.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ue(t)?(t={default:t,_ctx:Fe},s=32):(t=String(t),n&64?(s=16,t=[Vt(t)]):s=8);e.children=t,e.shapeFlag|=s}function ka(...e){const t={};for(let s=0;s<e.length;s++){const n=e[s];for(const i in n)if(i==="class")t.class!==n.class&&(t.class=le([t.class,n.class]));else if(i==="style")t.style=he([t.style,n.style]);else if(en(i)){const l=t[i],r=n[i];r&&l!==r&&!(ne(l)&&l.includes(r))&&(t[i]=l?[].concat(l,r):r)}else i!==""&&(t[i]=n[i])}return t}function lt(e,t,s,n=null){st(e,t,7,[s,n])}const $a=rl();let Ca=0;function Sa(e,t,s){const n=e.type,i=(t?t.appContext:e.appContext)||$a,l={uid:Ca++,vnode:e,type:n,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new _i(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:pl(n,i),emitsOptions:al(n,i),emit:null,emitted:null,propsDefaults:Ce,inheritAttrs:n.inheritAttrs,ctx:Ce,data:Ce,props:Ce,attrs:Ce,slots:Ce,refs:Ce,setupState:Ce,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return l.ctx={_:l},l.root=t?t.root:l,l.emit=sa.bind(null,l),e.ce&&e.ce(l),l}let Re=null;const uo=()=>Re||Fe;let Js,Kn;{const e=ln(),t=(s,n)=>{let i;return(i=e[s])||(i=e[s]=[]),i.push(n),l=>{i.length>1?i.forEach(r=>r(l)):i[0](l)}};Js=t("__VUE_INSTANCE_SETTERS__",s=>Re=s),Kn=t("__VUE_SSR_SETTERS__",s=>Ps=s)}const Is=e=>{const t=Re;return Js(e),e.scope.on(),()=>{e.scope.off(),Js(t)}},Oo=()=>{Re&&Re.scope.off(),Js(null)};function wl(e){return e.vnode.shapeFlag&4}let Ps=!1;function Ta(e,t=!1,s=!1){t&&Kn(t);const{props:n,children:i}=e.vnode,l=wl(e);aa(e,n,l,t),fa(e,i,s||t);const r=l?Pa(e,t):void 0;return t&&Kn(!1),r}function Pa(e,t){const s=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Gr);const{setup:n}=s;if(n){bt();const i=e.setupContext=n.length>1?ja(e):null,l=Is(e),r=As(n,e,0,[e.props,i]),c=pi(r);if(xt(),l(),(c||e.sp)&&!ts(e)&&tl(e),c){if(r.then(Oo,Oo),t)return r.then(u=>{Fo(e,u)}).catch(u=>{dn(u,e,0)});e.asyncDep=r}else Fo(e,r)}else kl(e)}function Fo(e,t,s){ue(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:_e(t)&&(e.setupState=Li(t)),kl(e)}function kl(e,t,s){const n=e.type;e.render||(e.render=n.render||ct);{const i=Is(e);bt();try{qr(e)}finally{xt(),i()}}}const Ma={get(e,t){return Ee(e,"get",""),e[t]}};function ja(e){const t=s=>{e.exposed=s||{}};return{attrs:new Proxy(e.attrs,Ma),slots:e.slots,emit:e.emit,expose:t}}function bn(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Li(no(e.exposed)),{get(t,s){if(s in t)return t[s];if(s in bs)return bs[s](e)},has(t,s){return s in t||s in bs}})):e.proxy}function Aa(e){return ue(e)&&"__vccOpts"in e}const q=(e,t)=>yr(e,t,Ps);function Ia(e,t,s){try{Ys(-1);const n=arguments.length;return n===2?_e(t)&&!ne(t)?Ts(t)?re(e,null,[t]):re(e,t):re(e,null,t):(n>3?s=Array.prototype.slice.call(arguments,2):n===3&&Ts(s)&&(s=[s]),re(e,t,s))}finally{Ys(1)}}const Da="3.5.27";/**
* @vue/runtime-dom v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Wn;const No=typeof window<"u"&&window.trustedTypes;if(No)try{Wn=No.createPolicy("vue",{createHTML:e=>e})}catch{}const $l=Wn?e=>Wn.createHTML(e):e=>e,Ea="http://www.w3.org/2000/svg",Oa="http://www.w3.org/1998/Math/MathML",pt=typeof document<"u"?document:null,Lo=pt&&pt.createElement("template"),Fa={insert:(e,t,s)=>{t.insertBefore(e,s||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,s,n)=>{const i=t==="svg"?pt.createElementNS(Ea,e):t==="mathml"?pt.createElementNS(Oa,e):s?pt.createElement(e,{is:s}):pt.createElement(e);return e==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:e=>pt.createTextNode(e),createComment:e=>pt.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>pt.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,s,n,i,l){const r=s?s.previousSibling:t.lastChild;if(i&&(i===l||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),s),!(i===l||!(i=i.nextSibling)););else{Lo.innerHTML=$l(n==="svg"?`<svg>${e}</svg>`:n==="mathml"?`<math>${e}</math>`:e);const c=Lo.content;if(n==="svg"||n==="mathml"){const u=c.firstChild;for(;u.firstChild;)c.appendChild(u.firstChild);c.removeChild(u)}t.insertBefore(c,s)}return[r?r.nextSibling:t.firstChild,s?s.previousSibling:t.lastChild]}},wt="transition",as="animation",Ms=Symbol("_vtc"),Cl={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Na=je({},Yi,Cl),La=e=>(e.displayName="Transition",e.props=Na,e),Kt=La((e,{slots:t})=>Ia(Er,Ua(e),t)),Et=(e,t=[])=>{ne(e)?e.forEach(s=>s(...t)):e&&e(...t)},Uo=e=>e?ne(e)?e.some(t=>t.length>1):e.length>1:!1;function Ua(e){const t={};for(const k in e)k in Cl||(t[k]=e[k]);if(e.css===!1)return t;const{name:s="v",type:n,duration:i,enterFromClass:l=`${s}-enter-from`,enterActiveClass:r=`${s}-enter-active`,enterToClass:c=`${s}-enter-to`,appearFromClass:u=l,appearActiveClass:d=r,appearToClass:p=c,leaveFromClass:g=`${s}-leave-from`,leaveActiveClass:m=`${s}-leave-active`,leaveToClass:h=`${s}-leave-to`}=e,x=Ra(i),T=x&&x[0],I=x&&x[1],{onBeforeEnter:C,onEnter:B,onEnterCancelled:O,onLeave:w,onLeaveCancelled:F,onBeforeAppear:Z=C,onAppear:ie=B,onAppearCancelled:K=O}=t,A=(k,R,G,N)=>{k._enterCancelled=N,Ot(k,R?p:c),Ot(k,R?d:r),G&&G()},Y=(k,R)=>{k._isLeaving=!1,Ot(k,g),Ot(k,h),Ot(k,m),R&&R()},z=k=>(R,G)=>{const N=k?ie:B,S=()=>A(R,k,G);Et(N,[R,S]),Ro(()=>{Ot(R,k?u:l),ft(R,k?p:c),Uo(N)||Bo(R,n,T,S)})};return je(t,{onBeforeEnter(k){Et(C,[k]),ft(k,l),ft(k,r)},onBeforeAppear(k){Et(Z,[k]),ft(k,u),ft(k,d)},onEnter:z(!1),onAppear:z(!0),onLeave(k,R){k._isLeaving=!0;const G=()=>Y(k,R);ft(k,g),k._enterCancelled?(ft(k,m),Ko(k)):(Ko(k),ft(k,m)),Ro(()=>{k._isLeaving&&(Ot(k,g),ft(k,h),Uo(w)||Bo(k,n,I,G))}),Et(w,[k,G])},onEnterCancelled(k){A(k,!1,void 0,!0),Et(O,[k])},onAppearCancelled(k){A(k,!0,void 0,!0),Et(K,[k])},onLeaveCancelled(k){Y(k),Et(F,[k])}})}function Ra(e){if(e==null)return null;if(_e(e))return[Pn(e.enter),Pn(e.leave)];{const t=Pn(e);return[t,t]}}function Pn(e){return Nl(e)}function ft(e,t){t.split(/\s+/).forEach(s=>s&&e.classList.add(s)),(e[Ms]||(e[Ms]=new Set)).add(t)}function Ot(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.remove(n));const s=e[Ms];s&&(s.delete(t),s.size||(e[Ms]=void 0))}function Ro(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let Ba=0;function Bo(e,t,s,n){const i=e._endId=++Ba,l=()=>{i===e._endId&&n()};if(s!=null)return setTimeout(l,s);const{type:r,timeout:c,propCount:u}=Ha(e,t);if(!r)return n();const d=r+"end";let p=0;const g=()=>{e.removeEventListener(d,m),l()},m=h=>{h.target===e&&++p>=u&&g()};setTimeout(()=>{p<u&&g()},c+1),e.addEventListener(d,m)}function Ha(e,t){const s=window.getComputedStyle(e),n=x=>(s[x]||"").split(", "),i=n(`${wt}Delay`),l=n(`${wt}Duration`),r=Ho(i,l),c=n(`${as}Delay`),u=n(`${as}Duration`),d=Ho(c,u);let p=null,g=0,m=0;t===wt?r>0&&(p=wt,g=r,m=l.length):t===as?d>0&&(p=as,g=d,m=u.length):(g=Math.max(r,d),p=g>0?r>d?wt:as:null,m=p?p===wt?l.length:u.length:0);const h=p===wt&&/\b(?:transform|all)(?:,|$)/.test(n(`${wt}Property`).toString());return{type:p,timeout:g,propCount:m,hasTransform:h}}function Ho(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((s,n)=>Vo(s)+Vo(e[n])))}function Vo(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function Ko(e){return(e?e.ownerDocument:document).body.offsetHeight}function Va(e,t,s){const n=e[Ms];n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):s?e.setAttribute("class",t):e.className=t}const Wo=Symbol("_vod"),Ka=Symbol("_vsh"),Wa=Symbol(""),za=/(?:^|;)\s*display\s*:/;function Ga(e,t,s){const n=e.style,i=Pe(s);let l=!1;if(s&&!i){if(t)if(Pe(t))for(const r of t.split(";")){const c=r.slice(0,r.indexOf(":")).trim();s[c]==null&&Vs(n,c,"")}else for(const r in t)s[r]==null&&Vs(n,r,"");for(const r in s)r==="display"&&(l=!0),Vs(n,r,s[r])}else if(i){if(t!==s){const r=n[Wa];r&&(s+=";"+r),n.cssText=s,l=za.test(s)}}else t&&e.removeAttribute("style");Wo in e&&(e[Wo]=l?n.display:"",e[Ka]&&(n.display="none"))}const zo=/\s*!important$/;function Vs(e,t,s){if(ne(s))s.forEach(n=>Vs(e,t,n));else if(s==null&&(s=""),t.startsWith("--"))e.setProperty(t,s);else{const n=qa(e,t);zo.test(s)?e.setProperty(Wt(n),s.replace(zo,""),"important"):e[n]=s}}const Go=["Webkit","Moz","ms"],Mn={};function qa(e,t){const s=Mn[t];if(s)return s;let n=Pt(t);if(n!=="filter"&&n in e)return Mn[t]=n;n=mi(n);for(let i=0;i<Go.length;i++){const l=Go[i]+n;if(l in e)return Mn[t]=l}return t}const qo="http://www.w3.org/1999/xlink";function Xo(e,t,s,n,i,l=Vl(t)){n&&t.startsWith("xlink:")?s==null?e.removeAttributeNS(qo,t.slice(6,t.length)):e.setAttributeNS(qo,t,s):s==null||l&&!bi(s)?e.removeAttribute(t):e.setAttribute(t,l?"":et(s)?String(s):s)}function Yo(e,t,s,n,i){if(t==="innerHTML"||t==="textContent"){s!=null&&(e[t]=t==="innerHTML"?$l(s):s);return}const l=e.tagName;if(t==="value"&&l!=="PROGRESS"&&!l.includes("-")){const c=l==="OPTION"?e.getAttribute("value")||"":e.value,u=s==null?e.type==="checkbox"?"on":"":String(s);(c!==u||!("_value"in e))&&(e.value=u),s==null&&e.removeAttribute(t),e._value=s;return}let r=!1;if(s===""||s==null){const c=typeof e[t];c==="boolean"?s=bi(s):s==null&&c==="string"?(s="",r=!0):c==="number"&&(s=0,r=!0)}try{e[t]=s}catch{}r&&e.removeAttribute(i||t)}function Lt(e,t,s,n){e.addEventListener(t,s,n)}function Xa(e,t,s,n){e.removeEventListener(t,s,n)}const Jo=Symbol("_vei");function Ya(e,t,s,n,i=null){const l=e[Jo]||(e[Jo]={}),r=l[t];if(n&&r)r.value=n;else{const[c,u]=Ja(t);if(n){const d=l[t]=ec(n,i);Lt(e,c,d,u)}else r&&(Xa(e,c,r,u),l[t]=void 0)}}const Qo=/(?:Once|Passive|Capture)$/;function Ja(e){let t;if(Qo.test(e)){t={};let n;for(;n=e.match(Qo);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Wt(e.slice(2)),t]}let jn=0;const Qa=Promise.resolve(),Za=()=>jn||(Qa.then(()=>jn=0),jn=Date.now());function ec(e,t){const s=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=s.attached)return;st(tc(n,s.value),t,5,[n])};return s.value=e,s.attached=Za(),s}function tc(e,t){if(ne(t)){const s=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{s.call(e),e._stopped=!0},t.map(n=>i=>!i._stopped&&n&&n(i))}else return t}const Zo=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,sc=(e,t,s,n,i,l)=>{const r=i==="svg";t==="class"?Va(e,n,r):t==="style"?Ga(e,s,n):en(t)?Xn(t)||Ya(e,t,s,n,l):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):nc(e,t,n,r))?(Yo(e,t,n),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Xo(e,t,n,r,l,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Pe(n))?Yo(e,Pt(t),n,l,t):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),Xo(e,t,n,r))};function nc(e,t,s,n){if(n)return!!(t==="innerHTML"||t==="textContent"||t in e&&Zo(t)&&ue(s));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&e.tagName==="IFRAME"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=e.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return Zo(t)&&Pe(s)?!1:t in e}const Qs=e=>{const t=e.props["onUpdate:modelValue"]||!1;return ne(t)?s=>Us(t,s):t};function oc(e){e.target.composing=!0}function ei(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const ss=Symbol("_assign");function ti(e,t,s){return t&&(e=e.trim()),s&&(e=on(e)),e}const ys={created(e,{modifiers:{lazy:t,trim:s,number:n}},i){e[ss]=Qs(i);const l=n||i.props&&i.props.type==="number";Lt(e,t?"change":"input",r=>{r.target.composing||e[ss](ti(e.value,s,l))}),(s||l)&&Lt(e,"change",()=>{e.value=ti(e.value,s,l)}),t||(Lt(e,"compositionstart",oc),Lt(e,"compositionend",ei),Lt(e,"change",ei))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:s,modifiers:{lazy:n,trim:i,number:l}},r){if(e[ss]=Qs(r),e.composing)return;const c=(l||e.type==="number")&&!/^0\d/.test(e.value)?on(e.value):e.value,u=t??"";c!==u&&(document.activeElement===e&&e.type!=="range"&&(n&&t===s||i&&e.value.trim()===u)||(e.value=u))}},Sl={deep:!0,created(e,{value:t,modifiers:{number:s}},n){const i=tn(t);Lt(e,"change",()=>{const l=Array.prototype.filter.call(e.options,r=>r.selected).map(r=>s?on(Zs(r)):Zs(r));e[ss](e.multiple?i?new Set(l):l:l[0]),e._assigning=!0,oo(()=>{e._assigning=!1})}),e[ss]=Qs(n)},mounted(e,{value:t}){si(e,t)},beforeUpdate(e,t,s){e[ss]=Qs(s)},updated(e,{value:t}){e._assigning||si(e,t)}};function si(e,t){const s=e.multiple,n=ne(t);if(!(s&&!n&&!tn(t))){for(let i=0,l=e.options.length;i<l;i++){const r=e.options[i],c=Zs(r);if(s)if(n){const u=typeof c;u==="string"||u==="number"?r.selected=t.some(d=>String(d)===String(c)):r.selected=Wl(t,c)>-1}else r.selected=t.has(c);else if(rn(Zs(r),t)){e.selectedIndex!==i&&(e.selectedIndex=i);return}}!s&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Zs(e){return"_value"in e?e._value:e.value}const ic=["ctrl","shift","alt","meta"],lc={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>ic.some(s=>e[`${s}Key`]&&!t.includes(s))},Ye=(e,t)=>{const s=e._withMods||(e._withMods={}),n=t.join(".");return s[n]||(s[n]=(i,...l)=>{for(let r=0;r<t.length;r++){const c=lc[t[r]];if(c&&c(i,t))return}return e(i,...l)})},rc=je({patchProp:sc},Fa);let ni;function ac(){return ni||(ni=ga(rc))}const cc=(...e)=>{const t=ac().createApp(...e),{mount:s}=t;return t.mount=n=>{const i=dc(n);if(!i)return;const l=t._component;!ue(l)&&!l.render&&!l.template&&(l.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const r=s(i,!1,uc(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),r},t};function uc(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function dc(e){return Pe(e)?document.querySelector(e):e}/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Tl;const xn=e=>Tl=e,Pl=Symbol();function zn(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var _s;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(_s||(_s={}));function fc(){const e=wi(!0),t=e.run(()=>E({}));let s=[],n=[];const i=no({install(l){xn(i),i._a=l,l.provide(Pl,i),l.config.globalProperties.$pinia=i,n.forEach(r=>s.push(r)),n=[]},use(l){return this._a?s.push(l):n.push(l),this},_p:s,_a:null,_e:e,_s:new Map,state:t});return i}const Ml=()=>{};function oi(e,t,s,n=Ml){e.push(t);const i=()=>{const l=e.indexOf(t);l>-1&&(e.splice(l,1),n())};return!s&&ki()&&zl(i),i}function Xt(e,...t){e.slice().forEach(s=>{s(...t)})}const pc=e=>e(),ii=Symbol(),An=Symbol();function Gn(e,t){e instanceof Map&&t instanceof Map?t.forEach((s,n)=>e.set(n,s)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const s in t){if(!t.hasOwnProperty(s))continue;const n=t[s],i=e[s];zn(i)&&zn(n)&&e.hasOwnProperty(s)&&!Te(n)&&!vt(n)?e[s]=Gn(i,n):e[s]=n}return e}const gc=Symbol();function hc(e){return!zn(e)||!e.hasOwnProperty(gc)}const{assign:kt}=Object;function mc(e){return!!(Te(e)&&e.effect)}function vc(e,t,s,n){const{state:i,actions:l,getters:r}=t,c=s.state.value[e];let u;function d(){c||(s.state.value[e]=i?i():{});const p=mr(s.state.value[e]);return kt(p,l,Object.keys(r||{}).reduce((g,m)=>(g[m]=no(q(()=>{xn(s);const h=s._s.get(e);return r[m].call(h,h)})),g),{}))}return u=jl(e,d,t,s,n,!0),u}function jl(e,t,s={},n,i,l){let r;const c=kt({actions:{}},s),u={deep:!0};let d,p,g=[],m=[],h;const x=n.state.value[e];!l&&!x&&(n.state.value[e]={});let T;function I(K){let A;d=p=!1,typeof K=="function"?(K(n.state.value[e]),A={type:_s.patchFunction,storeId:e,events:h}):(Gn(n.state.value[e],K),A={type:_s.patchObject,payload:K,storeId:e,events:h});const Y=T=Symbol();oo().then(()=>{T===Y&&(d=!0)}),p=!0,Xt(g,A,n.state.value[e])}const C=l?function(){const{state:A}=s,Y=A?A():{};this.$patch(z=>{kt(z,Y)})}:Ml;function B(){r.stop(),g=[],m=[],n._s.delete(e)}const O=(K,A="")=>{if(ii in K)return K[An]=A,K;const Y=function(){xn(n);const z=Array.from(arguments),k=[],R=[];function G(J){k.push(J)}function N(J){R.push(J)}Xt(m,{args:z,name:Y[An],store:F,after:G,onError:N});let S;try{S=K.apply(this&&this.$id===e?this:F,z)}catch(J){throw Xt(R,J),J}return S instanceof Promise?S.then(J=>(Xt(k,J),J)).catch(J=>(Xt(R,J),Promise.reject(J))):(Xt(k,S),S)};return Y[ii]=!0,Y[An]=A,Y},w={_p:n,$id:e,$onAction:oi.bind(null,m),$patch:I,$reset:C,$subscribe(K,A={}){const Y=oi(g,K,A.detached,()=>z()),z=r.run(()=>Bt(()=>n.state.value[e],k=>{(A.flush==="sync"?p:d)&&K({storeId:e,type:_s.direct,events:h},k)},kt({},u,A)));return Y},$dispose:B},F=cn(w);n._s.set(e,F);const ie=(n._a&&n._a.runWithContext||pc)(()=>n._e.run(()=>(r=wi()).run(()=>t({action:O}))));for(const K in ie){const A=ie[K];if(Te(A)&&!mc(A)||vt(A))l||(x&&hc(A)&&(Te(A)?A.value=x[K]:Gn(A,x[K])),n.state.value[e][K]=A);else if(typeof A=="function"){const Y=O(A,K);ie[K]=Y,c.actions[K]=A}}return kt(F,ie),kt(ve(F),ie),Object.defineProperty(F,"$state",{get:()=>n.state.value[e],set:K=>{I(A=>{kt(A,K)})}}),n._p.forEach(K=>{kt(F,r.run(()=>K({store:F,app:n._a,pinia:n,options:c})))}),x&&l&&s.hydrate&&s.hydrate(F.$state,x),d=!0,p=!0,F}/*! #__NO_SIDE_EFFECTS__ */function os(e,t,s){let n,i;const l=typeof t=="function";typeof e=="string"?(n=e,i=l?s:t):(i=e,n=e.id);function r(c,u){const d=Tr();return c=c||(d?hs(Pl,null):null),c&&xn(c),c=Tl,c._s.has(n)||(l?jl(n,t,i,c):vc(n,i,c)),c._s.get(n)}return r.$id=n,r}const Je=os("user",()=>{const e=E(!0),t=E(null),s=E(null),n=E(!1),i=E({name:"Guest",level:1,exp:0,next_exp:100,xp:0,total_hours:0,rank_name:"Beginner",avatar_url:"",role:"USER"}),l=q(()=>i.value.next_exp===0?100:Math.min(100,i.value.exp/i.value.next_exp*100)),r=q(()=>i.value.role==="ADMIN"),c=m=>{t.value=m,s.value||(s.value=m)},u=async m=>{try{const h=await fetch(`/api/user/${m}/status`);if(!h.ok)throw new Error("API Error");const x=await h.json();x.status==="ok"&&(i.value=x.data)}catch(h){console.error(h),i.value={name:"",level:12,exp:1450,next_exp:2e3,xp:500,total_hours:42.5,rank_name:"Rank C: ",avatar_url:"https://cdn-icons-png.flaticon.com/512/4333/4333609.png",role:"USER"}}};return{loading:e,currentUserId:t,originalUserId:s,isViewingAsOther:n,user:i,expPercentage:l,isAdmin:r,setUserId:c,fetchUserData:u,setLoading:m=>{e.value=m},viewAsUser:async(m,h)=>r.value?(n.value=!0,t.value=m,await u(m),!0):!1,exitViewAsUser:async()=>{s.value&&(n.value=!1,t.value=s.value,await u(s.value))}}}),bc={poweron:"/static/assets/sounds/Power-on.mp3",click:"/static/assets/sounds/mouse_click.mp3",select1:"/static/assets/sounds/select1.mp3",select2:"/static/assets/sounds/select2.mp3",select3:"/static/assets/sounds/select3.mp3",levelup:"/static/assets/sounds/Correct5.mp3",attack:"/static/assets/sounds/select6.mp3",defeat:"/static/assets/sounds/error2.mp3",coin:"/static/assets/sounds/confirm1.mp3"},In={},cs=E(!1);function zt(){return{playSound:s=>{if(cs.value)return;const n=bc[s];if(!n){console.warn(`Sound '${s}' not found`);return}try{In[s]||(In[s]=new Audio(n));const i=In[s];i.currentTime=0,i.play().catch(()=>{})}catch(i){console.error("Sound error:",i)}},toggleMute:()=>(cs.value=!cs.value,cs.value),isMuted:cs}}const Ds=os("study",()=>{const e=Je(),{playSound:t}=zt(),s=E({}),n=E(!1),i=E(!1),l=E("00:00:00"),r=E(""),c=E("#000"),u=E(null),d=E(null),p=E("00:00:00"),g=E(!1),m=E(""),h=E(!1),x=E(""),T=async()=>{if(t("click"),g.value=!0,Object.keys(s.value).length===0)try{const A=await(await fetch("/api/study/subjects")).json();A.status==="ok"&&(s.value=A.data)}catch(K){console.error(K)}},I=async K=>{if(t("select1"),!e.currentUserId){alert(": ID");return}n.value=!0;try{const A=await fetch("/api/study/start",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:e.currentUserId,subject:K})});if(!A.ok)throw new Error(`Server Error (${A.status})`);const Y=await A.json();Y.status==="ok"?(r.value=K,c.value=s.value[K],u.value=new Date,C(),i.value=!0,g.value=!1):alert(": "+Y.message)}catch(A){alert(": "+A.message),console.error(A)}finally{n.value=!1}},C=()=>{d.value&&clearInterval(d.value),d.value=setInterval(()=>{const A=new Date-u.value,Y=Math.floor(A/36e5),z=Math.floor(A%36e5/6e4),k=Math.floor(A%6e4/1e3);p.value=(Y>0?String(Y).padStart(2,"0")+":":"")+String(z).padStart(2,"0")+":"+String(k).padStart(2,"0")},1e3)},B=()=>{x.value=m.value,h.value=!0},O=async()=>{t("levelup"),h.value=!1;try{const K=await fetch("/api/study/finish",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:e.currentUserId,memo:x.value})});if(!K.ok)throw new Error(`Server returned ${K.status}`);const A=await K.json();if(A.status==="ok")return alert(`
${A.minutes} `),ie(),await e.fetchUserData(e.currentUserId),A.minutes;alert(": "+A.message)}catch(K){console.error(K),alert("")}return 0},w=async()=>{if(confirm(`
()`)){t("click");try{(await(await fetch("/api/study/cancel",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:e.currentUserId})})).json()).status==="ok"?(alert(""),ie()):alert("")}catch{alert("")}}},F=async(K=!1)=>{if(t("click"),!confirm(`
()`))return!1;l.value=p.value;try{if((await(await fetch("/api/study/pause",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:e.currentUserId})})).json()).status==="ok")return n.value=!1,clearInterval(d.value),K&&window.liff&&liff.closeWindow(),!0;alert("")}catch{alert("")}return!1},Z=async K=>{try{const Y=await(await fetch(`/api/user/${K}/active_session`)).json();if(Y.status==="ok"&&Y.active){r.value=Y.data.subject,c.value=s.value[Y.data.subject]||"#000";const z=Y.data.start_time.split(":"),k=new Date,R=new Date(k.getFullYear(),k.getMonth(),k.getDate(),Number(z[0]),Number(z[1]),Number(z[2]));return R>k&&R.setDate(R.getDate()-1),u.value=R,C(),i.value=!0,!0}}catch(A){console.error(A)}return i.value=!1,!1},ie=()=>{n.value=!1,clearInterval(d.value),i.value=!1,m.value="",x.value="",p.value="00:00:00"};return{subjects:s,studying:n,inSession:i,lastSessionTime:l,currentSubject:r,currentSubjectColor:c,timerDisplay:p,showSubjectModal:g,studyMemo:m,showMemoConfirm:h,memoToSend:x,openSubjectModal:T,startStudy:I,openMemoConfirm:B,finishStudy:O,cancelStudy:w,pauseStudy:F,checkActiveSession:Z,resetSession:ie}}),xc=os("game",()=>{const{playSound:e}=zt(),t=E({stage:1,areaName:"",currentHp:100,maxHp:100,enemyName:"",enemyIcon:"",isBoss:!1,dps:0,clickDamage:1,lastTick:Date.now()}),s=E([]),n=E(!1),i=E(null),l=E(0),r=q(()=>t.value.currentHp/t.value.maxHp*100),c=q(()=>{const T=Math.floor((t.value.stage-1)/10)+1,I=(t.value.stage-1)%10+1;return`${T}-${I}`}),u=[{name:"",icon:"",baseHp:100},{name:"",icon:"",baseHp:120},{name:"",icon:"",baseHp:150},{name:"",icon:"",baseHp:180},{name:"",icon:"",baseHp:220},{name:"",icon:"",baseHp:280},{name:"",icon:"",baseHp:350},{name:"",icon:"",baseHp:500}],d=()=>{i.value&&clearInterval(i.value),i.value=setInterval(()=>{t.value.dps>0&&g(t.value.dps/10)},100)},p=T=>{const I=T.target.getBoundingClientRect(),C=T.clientX-I.left,B=T.clientY-I.top;g(t.value.clickDamage,!0,C,B),e("click")},g=(T,I=!1,C=0,B=0)=>{if(t.value.currentHp-=T,n.value=!0,setTimeout(()=>n.value=!1,100),I||Math.random()<.3){const O=l.value++,w=C||window.innerWidth/2+(Math.random()*100-50),F=B||window.innerHeight/2-100;s.value.push({id:O,val:T,x:w,y:F,isCrit:I}),setTimeout(()=>{s.value=s.value.filter(Z=>Z.id!==O)},800)}t.value.currentHp<=0&&m()},m=()=>{e("levelup"),t.value.stage++;const C=Math.floor(100*Math.pow(1.1,t.value.stage));t.value.maxHp=C,t.value.currentHp=C,t.value.isBoss=t.value.stage%10===0;const B=u[(t.value.stage-1)%u.length];t.value.enemyName=t.value.isBoss?"??? (BOSS)":B.name,t.value.enemyIcon=t.value.isBoss?"":B.icon,t.value.isBoss&&(t.value.maxHp*=5,t.value.currentHp=t.value.maxHp)},h=T=>{if(!T||T<=0)return;const I=Math.pow(1.1,t.value.stage),C=Math.floor(T*100*I);setTimeout(()=>{g(C,!0),alert(`
 ${x(C)} `)},500)},x=T=>T>=1e6?(T/1e6).toFixed(1)+"M":T>=1e3?(T/1e3).toFixed(1)+"k":Math.floor(T);return{gameState:t,dmgEffects:s,isHit:n,hpPercentage:r,stageDisplay:c,startBattleLoop:d,handleManualClick:p,dealDamage:g,applyStudyDamage:h,formatNumber:x}}),fo=os("shop",()=>{const e=Je(),{playSound:t}=zt(),s=E([]),n=E(null),i=E(!1),l=E(!1),r=E(!1),c=async()=>{r.value=!0;try{const m=await(await fetch("/api/shop/items")).json();m.status==="ok"?s.value=m.data:alert("")}catch(g){console.error(g),alert("")}finally{r.value=!1}};return{shopItems:s,selectedItem:n,showBuyModal:i,showShopList:l,loading:r,fetchItems:c,openShopList:()=>{l.value=!0,s.value.length===0&&c()},openBuyModal:g=>{n.value=g,i.value=!0},confirmBuy:async g=>{if(n.value){if((e.user.xp||0)<n.value.cost){alert("XP");return}t("select3");try{const h=await(await fetch("/api/shop/buy",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:e.currentUserId,item_key:n.value.key,comment:g})})).json();h.status==="ok"?(alert(`
`),i.value=!1,await e.fetchUserData(e.currentUserId)):alert(": "+h.message)}catch{alert("")}}}}});class yc{constructor(){this.audioContext=null,this.enabled=!0,this.initialized=!1}init(){if(!this.initialized)try{this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.initialized=!0}catch(t){console.warn("Web Audio API not supported:",t)}}beep(t=440,s=.1,n="sine",i=.3){if(!(!this.enabled||!this.audioContext))try{const l=this.audioContext.createOscillator(),r=this.audioContext.createGain();l.connect(r),r.connect(this.audioContext.destination),l.type=n,l.frequency.value=t,r.gain.setValueAtTime(i,this.audioContext.currentTime),r.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+s),l.start(),l.stop(this.audioContext.currentTime+s)}catch(l){console.debug("Sound play error:",l)}}play(t){if(this.enabled)switch(this.init(),t){case"click":this.beep(800,.05,"sine",.2);break;case"buy":this.beep(523,.08,"sine",.25),setTimeout(()=>this.beep(659,.08,"sine",.25),50),setTimeout(()=>this.beep(784,.1,"sine",.2),100);break;case"levelup":this.beep(523,.1,"sine",.3),setTimeout(()=>this.beep(659,.1,"sine",.3),100),setTimeout(()=>this.beep(784,.15,"sine",.3),200),setTimeout(()=>this.beep(1047,.2,"sine",.25),350);break;case"milestone":this.beep(392,.15,"sine",.3),setTimeout(()=>this.beep(523,.15,"sine",.3),150),setTimeout(()=>this.beep(659,.15,"sine",.3),300),setTimeout(()=>this.beep(784,.2,"sine",.35),450),setTimeout(()=>this.beep(1047,.3,"sine",.3),600),setTimeout(()=>this.beep(1319,.4,"triangle",.25),800);break;case"prestige":for(let s=0;s<5;s++)setTimeout(()=>this.beep(261.63*Math.pow(2,s/3),.3,"sine",.2),s*150);setTimeout(()=>{this.beep(523,.5,"triangle",.3),this.beep(659,.5,"triangle",.25),this.beep(784,.5,"triangle",.2)},800);break;default:this.beep(440,.05,"sine",.15)}}toggle(){return this.enabled=!this.enabled,this.enabled}}const ze=new yc,Yt=[{id:"notebook",name:"",description:"",baseCost:10,baseProduction:.1,unlockCondition:0,tier:1,icon:"",flavorText:""},{id:"pencil_set",name:"",description:"",baseCost:25,baseProduction:.3,unlockCondition:15,tier:1,icon:"",flavorText:""},{id:"desk_lamp",name:"",description:"",baseCost:50,baseProduction:.5,unlockCondition:40,tier:1,icon:"",flavorText:""},{id:"bookshelf",name:"",description:"",baseCost:100,baseProduction:1,unlockCondition:80,tier:1,icon:"",flavorText:""},{id:"study_desk",name:"",description:"",baseCost:200,baseProduction:2,unlockCondition:150,tier:1,icon:"",flavorText:""},{id:"pc_setup",name:"PC",description:"",baseCost:400,baseProduction:4,unlockCondition:300,tier:1,icon:"",flavorText:""},{id:"coffee_maker",name:"",description:"",baseCost:800,baseProduction:8,unlockCondition:600,tier:1,icon:"",flavorText:""},{id:"noise_canceling",name:"",description:"",baseCost:1500,baseProduction:15,unlockCondition:1e3,tier:1,icon:"",flavorText:"BGM"},{id:"einstein_poster",name:"",description:"",baseCost:3e3,baseProduction:30,unlockCondition:2e3,tier:1,icon:"",flavorText:""},{id:"study_room",name:"",description:"",baseCost:6e3,baseProduction:60,unlockCondition:4e3,tier:1,icon:"",flavorText:""},{id:"lab_bench",name:"",description:"",baseCost:12e3,baseProduction:100,unlockCondition:8e3,tier:2,icon:"",flavorText:""},{id:"microscope",name:"",description:"",baseCost:25e3,baseProduction:200,unlockCondition:15e3,tier:2,icon:"",flavorText:""},{id:"server_rack",name:"",description:"",baseCost:5e4,baseProduction:400,unlockCondition:3e4,tier:2,icon:"",flavorText:""},{id:"research_team",name:"",description:"",baseCost:1e5,baseProduction:800,unlockCondition:6e4,tier:2,icon:"",flavorText:""},{id:"quantum_computer",name:"",description:"",baseCost:2e5,baseProduction:1500,unlockCondition:12e4,tier:2,icon:"",flavorText:"01"},{id:"ai_assistant",name:"AI",description:"24",baseCost:4e5,baseProduction:3e3,unlockCondition:2e5,tier:2,icon:"",flavorText:"AI"},{id:"library",name:"",description:"",baseCost:8e5,baseProduction:6e3,unlockCondition:35e4,tier:2,icon:"",flavorText:""},{id:"super_computer",name:"",description:"",baseCost:15e5,baseProduction:12e3,unlockCondition:5e5,tier:2,icon:"",flavorText:"14"},{id:"research_center",name:"JAXA",description:"",baseCost:3e6,baseProduction:25e3,unlockCondition:8e5,tier:2,icon:"",flavorText:""},{id:"phd",name:"",description:"",baseCost:6e6,baseProduction:5e4,unlockCondition:12e5,tier:2,icon:"",flavorText:"Dr."},{id:"satellite",name:"",description:"",baseCost:12e6,baseProduction:1e5,unlockCondition:2e6,tier:3,icon:"",flavorText:""},{id:"space_center",name:"",description:"",baseCost:25e6,baseProduction:2e5,unlockCondition:5e6,tier:3,icon:"",flavorText:"3, 2, 1... "},{id:"orbital_elevator_base",name:"",description:"",baseCost:5e7,baseProduction:4e5,unlockCondition:1e7,tier:3,icon:"",flavorText:""},{id:"iss",name:"",description:"",baseCost:1e8,baseProduction:8e5,unlockCondition:2e7,tier:3,icon:"",flavorText:""},{id:"space_solar",name:"",description:"24",baseCost:2e8,baseProduction:15e5,unlockCondition:4e7,tier:3,icon:"",flavorText:""},{id:"space_factory",name:"",description:"",baseCost:4e8,baseProduction:3e6,unlockCondition:8e7,tier:3,icon:"",flavorText:""},{id:"orbital_hotel",name:"",description:"",baseCost:8e8,baseProduction:6e6,unlockCondition:15e7,tier:3,icon:"",flavorText:""},{id:"orbital_elevator",name:"",description:"",baseCost:15e8,baseProduction:12e6,unlockCondition:3e8,tier:3,icon:"",flavorText:""},{id:"debris_cleaner",name:"",description:"",baseCost:3e9,baseProduction:25e6,unlockCondition:6e8,tier:3,icon:"",flavorText:""},{id:"orbital_city",name:"",description:"1",baseCost:6e9,baseProduction:5e7,unlockCondition:1e9,tier:3,icon:"",flavorText:""},{id:"lunar_outpost",name:"",description:"",baseCost:15e9,baseProduction:1e8,unlockCondition:2e9,tier:4,icon:"",flavorText:""},{id:"helium3_mining",name:"3",description:"",baseCost:3e10,baseProduction:2e8,unlockCondition:5e9,tier:4,icon:"",flavorText:""},{id:"mars_lander",name:"",description:"",baseCost:6e10,baseProduction:4e8,unlockCondition:1e10,tier:4,icon:"",flavorText:""},{id:"mars_dome",name:"",description:"",baseCost:12e10,baseProduction:8e8,unlockCondition:25e9,tier:4,icon:"",flavorText:""},{id:"terraforming",name:"",description:"",baseCost:25e10,baseProduction:15e8,unlockCondition:5e10,tier:4,icon:"",flavorText:"100"},{id:"asteroid_mining",name:"",description:"",baseCost:5e11,baseProduction:3e9,unlockCondition:1e11,tier:4,icon:"",flavorText:"GDP"},{id:"jupiter_station",name:"",description:"",baseCost:1e12,baseProduction:6e9,unlockCondition:2e11,tier:4,icon:"",flavorText:""},{id:"titan_base",name:"",description:"",baseCost:2e12,baseProduction:12e9,unlockCondition:4e11,tier:4,icon:"",flavorText:""},{id:"europa_submarine",name:"",description:"",baseCost:4e12,baseProduction:25e9,unlockCondition:8e11,tier:4,icon:"",flavorText:""},{id:"federation",name:"",description:"",baseCost:8e12,baseProduction:5e10,unlockCondition:15e11,tier:4,icon:"",flavorText:""},{id:"alpha_probe",name:"",description:"10%",baseCost:2e13,baseProduction:1e11,unlockCondition:3e12,tier:5,icon:"",flavorText:""},{id:"dyson_swarm",name:"",description:"",baseCost:5e13,baseProduction:2e11,unlockCondition:8e12,tier:5,icon:"",flavorText:""},{id:"antimatter_engine",name:"",description:"E=mc50%",baseCost:1e14,baseProduction:4e11,unlockCondition:2e13,tier:5,icon:"",flavorText:""},{id:"warp_prototype",name:"",description:"",baseCost:25e13,baseProduction:8e11,unlockCondition:5e13,tier:5,icon:"",flavorText:""},{id:"dyson_sphere",name:"",description:"100%",baseCost:5e14,baseProduction:15e11,unlockCondition:1e14,tier:5,icon:"",flavorText:"II"},{id:"warp_gate",name:"",description:"",baseCost:1e15,baseProduction:3e12,unlockCondition:2e14,tier:5,icon:"",flavorText:"100"},{id:"first_contact",name:"",description:"",baseCost:25e14,baseProduction:6e12,unlockCondition:4e14,tier:5,icon:"",flavorText:"We are not alone"},{id:"galactic_council",name:"",description:"",baseCost:5e15,baseProduction:12e12,unlockCondition:8e14,tier:5,icon:"",flavorText:""},{id:"galactic_network",name:"",description:"",baseCost:1e16,baseProduction:25e12,unlockCondition:15e14,tier:5,icon:"",flavorText:"10"},{id:"galactic_president",name:"",description:"",baseCost:25e15,baseProduction:5e13,unlockCondition:3e15,tier:5,icon:"",flavorText:""},{id:"mind_upload",name:"",description:"",baseCost:5e16,baseProduction:1e14,unlockCondition:5e15,tier:6,icon:"",flavorText:""},{id:"black_hole_engine",name:"",description:"",baseCost:1e17,baseProduction:2e14,unlockCondition:1e16,tier:6,icon:"",flavorText:""},{id:"time_reversal",name:"",description:"",baseCost:25e16,baseProduction:4e14,unlockCondition:25e15,tier:6,icon:"",flavorText:""},{id:"parallel_observer",name:"",description:"",baseCost:5e17,baseProduction:8e14,unlockCondition:5e16,tier:6,icon:"",flavorText:""},{id:"dark_matter_control",name:"",description:"26%",baseCost:1e18,baseProduction:15e14,unlockCondition:1e17,tier:6,icon:"",flavorText:""},{id:"dark_energy_harvest",name:"",description:"68%",baseCost:25e17,baseProduction:3e15,unlockCondition:25e16,tier:6,icon:"",flavorText:""},{id:"planet_forge",name:"",description:"",baseCost:5e18,baseProduction:6e15,unlockCondition:5e17,tier:6,icon:"",flavorText:""},{id:"star_forge",name:"",description:"",baseCost:1e19,baseProduction:12e15,unlockCondition:1e18,tier:6,icon:"",flavorText:""},{id:"galaxy_forge",name:"",description:"",baseCost:25e18,baseProduction:25e15,unlockCondition:25e17,tier:6,icon:"",flavorText:""},{id:"singularity",name:"",description:"",baseCost:1e20,baseProduction:1e17,unlockCondition:1e19,tier:6,icon:"",flavorText:"..."}],us=[{id:"better_pencils",name:"",description:"2",cost:100,unlockCondition:{facility:"notebook",level:10},effect:{type:"multiply",target:"notebook",value:2},icon:""},{id:"ergonomic_chair",name:"",description:"2",cost:1e3,unlockCondition:{facility:"study_desk",level:10},effect:{type:"multiply",target:"study_desk",value:2},icon:""},{id:"dual_monitors",name:"",description:"PC2",cost:2e3,unlockCondition:{facility:"pc_setup",level:10},effect:{type:"multiply",target:"pc_setup",value:2},icon:""},{id:"global_1",name:"",description:"+10%",cost:5e3,unlockCondition:{totalKP:3e3},effect:{type:"global_multiply",value:1.1},icon:""},{id:"ai_optimization",name:"AI",description:"AI3",cost:5e5,unlockCondition:{facility:"ai_assistant",level:10},effect:{type:"multiply",target:"ai_assistant",value:3},icon:""},{id:"quantum_upgrade",name:"",description:"3",cost:3e5,unlockCondition:{facility:"quantum_computer",level:10},effect:{type:"multiply",target:"quantum_computer",value:3},icon:""},{id:"global_2",name:"",description:"+25%",cost:1e6,unlockCondition:{totalKP:5e5},effect:{type:"global_multiply",value:1.25},icon:""},{id:"space_efficiency",name:"",description:"Era32",cost:5e7,unlockCondition:{totalKP:1e7},effect:{type:"tier_multiply",target:3,value:2},icon:""},{id:"planetary_synergy",name:"",description:"Era42",cost:5e12,unlockCondition:{totalKP:1e12},effect:{type:"tier_multiply",target:4,value:2},icon:""},{id:"galactic_wisdom",name:"",description:"Era53",cost:1e15,unlockCondition:{totalKP:1e14},effect:{type:"tier_multiply",target:5,value:3},icon:""},{id:"cosmic_transcendence",name:"",description:"2",cost:1e20,unlockCondition:{totalKP:1e19},effect:{type:"global_multiply",value:2},icon:""}],li=[{id:"kp_100",name:"",description:"100 KP",condition:{type:"totalKP",value:100},icon:""},{id:"kp_1000",name:"",description:"1,000 KP",condition:{type:"totalKP",value:1e3},icon:""},{id:"kp_10000",name:"",description:"10,000 KP",condition:{type:"totalKP",value:1e4},icon:""},{id:"kp_1m",name:"",description:"100KP",condition:{type:"totalKP",value:1e6},icon:""},{id:"kp_1b",name:"",description:"10KP",condition:{type:"totalKP",value:1e9},icon:""},{id:"kp_1t",name:"",description:"1KP",condition:{type:"totalKP",value:1e12},icon:""},{id:"kp_1qa",name:"",description:"1KP",condition:{type:"totalKP",value:1e16},icon:""},{id:"facility_10",name:"",description:"10",condition:{type:"totalLevel",value:10},icon:""},{id:"facility_100",name:"",description:"100",condition:{type:"totalLevel",value:100},icon:""},{id:"facility_1000",name:"",description:"1000",condition:{type:"totalLevel",value:1e3},icon:""},{id:"prestige_1",name:"",description:"",condition:{type:"prestigeCount",value:1},icon:""},{id:"prestige_5",name:"",description:"5",condition:{type:"prestigeCount",value:5},icon:""},{id:"prestige_10",name:"",description:"10",condition:{type:"prestigeCount",value:10},icon:""}],ri={1:{name:"",color:"from-slate-400 to-slate-600",bgColor:"bg-slate-100"},2:{name:"",color:"from-blue-400 to-blue-600",bgColor:"bg-blue-50"},3:{name:"",color:"from-purple-400 to-purple-600",bgColor:"bg-purple-50"},4:{name:"",color:"from-orange-400 to-red-500",bgColor:"bg-orange-50"},5:{name:"",color:"from-pink-400 to-purple-600",bgColor:"bg-pink-50"},6:{name:"",color:"from-yellow-400 to-amber-500",bgColor:"bg-amber-50"}},ai=["","K","M","B","T","Qa","Qi","Sx","Sp","Oc","No","Dc","UDc","DDc","TDc","QaDc","QiDc","SxDc","SpDc","OcDc","NoDc","Vg","Ce"],jt=os("evolution",()=>{const e=Je(),t=E(0),s=E(0),n=E(0),i=E({}),l=E([]),r=E([]),c=E(0),u=E(0),d=E(1),p=E(Date.now()),g=E(0),m=E(null),h=E(!1),x=E({}),T=(D,$)=>{let a=1;for(const f of l.value){const v=us.find(M=>M.id===f);v&&(v.effect.type==="multiply"&&v.effect.target===D&&(a*=v.effect.value),v.effect.type==="tier_multiply"&&v.effect.target===$&&(a*=v.effect.value),v.effect.type==="global_multiply"&&(a*=v.effect.value))}return a},I=D=>{let $=1;const a=[10,25,50,100,150,200,250,300,350,400];for(const f of a)D>=f&&($*=2);return $},C=q(()=>{let D=0;for(const $ of Yt){const a=i.value[$.id]||0;if(a>0){const f=T($.id,$.tier),v=I(a);D+=$.baseProduction*a*f*d.value*v}}return D}),B=q(()=>{let D=1;for(const $ of Yt){const a=i.value[$.id]||0;a>0&&(D+=$.baseProduction*a*.01)}for(const $ of l.value){const a=us.find(f=>f.id===$);(a==null?void 0:a.effect.type)==="global_multiply"&&(D*=a.effect.value)}return D*d.value}),O=q(()=>Yt.map(D=>{const $=i.value[D.id]||0,a=z(D.baseCost,$);let f=1;const v=[10,25,50,100,150,200,250,300,350,400];for(const V of v)$>=V&&(f*=2);const M=T(D.id,D.tier),P=D.baseProduction*Math.max(1,$)*M*d.value*f;let L="locked";s.value>=D.unlockCondition?L="unlocked":s.value>=D.unlockCondition*.7?L="revealed":s.value>=D.unlockCondition*.3&&(L="hint");let W=null;for(const V of v)if($<V){W={target:V,progress:$/V*100,bonus:f*2};break}return{...D,level:$,currentCost:a,production:P,milestoneBonus:f,nextMilestone:W,state:L,canAfford:t.value>=a&&L==="unlocked",progressToUnlock:Math.min(100,s.value/D.unlockCondition*100),upgradeMultiplier:M}})),w=q(()=>{const D={};for(const $ of O.value)D[$.tier]||(D[$.tier]={...ri[$.tier],tier:$.tier,facilities:[]}),D[$.tier].facilities.push($);return Object.values(D).sort(($,a)=>$.tier-a.tier)}),F=q(()=>us.map(D=>{const $=l.value.includes(D.id);let a=!1;return D.unlockCondition.facility?a=(i.value[D.unlockCondition.facility]||0)>=D.unlockCondition.level:D.unlockCondition.totalKP&&(a=s.value>=D.unlockCondition.totalKP),{...D,purchased:$,unlocked:a||$,canAfford:t.value>=D.cost&&!$&&a}})),Z=q(()=>F.value.filter(D=>D.unlocked&&!D.purchased)),ie=q(()=>O.value.find(D=>D.state!=="unlocked")),K=q(()=>{let D=1;for(const $ of O.value)$.state==="unlocked"&&$.tier>D&&(D=$.tier);return D}),A=q(()=>s.value<1e9?0:Math.floor(Math.pow(Math.log10(s.value),1.5))),Y=q(()=>{const D=Object.values(i.value).reduce((a,f)=>a+f,0),$=O.value.filter(a=>a.state==="unlocked").length;return{totalOwned:D,unlockedCount:$,totalFacilities:Yt.length,multiplier:B.value,production:C.value,prestigeLevel:c.value,prestigeMultiplier:d.value,currentEra:K.value}});function z(D,$){return Math.floor(D*Math.pow(1.15,$))}function k(D){if(D<1e3)return Math.floor(D).toLocaleString();const $=Math.floor(Math.log10(Math.abs(D))),a=Math.floor($/3);if(a>=ai.length)return D.toExponential(2);const f=Math.pow(1e3,a);return(D/f).toFixed(2)+ai[a]}function R(D,$=1){const a=Yt.find(v=>v.id===D);if(!a)return!1;let f=0;for(let v=0;v<$;v++){const M=i.value[D]||0,j=z(a.baseCost,M);if(t.value>=j&&s.value>=a.unlockCondition)t.value-=j,i.value[D]=M+1,f++,(M+1)%100===0&&me("onMilestone",{facility:a,level:M+1});else break}if(f>0){h.value=!0;const v=[10,25,50,100,150,200,250,300,350,400],M=i.value[D];return v.includes(M)?ze.play("milestone"):ze.play("buy"),me("onPurchase",{facility:a,amount:f}),we(),be(),!0}return!1}function G(D){const $=us.find(a=>a.id===D);return!$||l.value.includes(D)||t.value<$.cost?!1:(t.value-=$.cost,l.value.push(D),h.value=!0,ze.play("levelup"),me("onPurchase",{upgrade:$}),be(),!0)}function N(){const D=A.value;return D<=0?!1:(ze.play("prestige"),u.value+=D,c.value+=1,d.value=1+Math.log10(u.value+1)*.5,n.value+=s.value,t.value=0,s.value=0,i.value={},l.value=[],h.value=!0,me("onPrestige",{points:D,level:c.value}),we(),be(),!0)}function S(D){if(D<=0)return 0;const $=Math.floor(D*B.value);return J($),$}function J(D){D<=0||(t.value+=D,s.value+=D,h.value=!0,we())}function X(D=1){if(C.value>0){const $=C.value*D;t.value+=$,s.value+=$}}function ce(){const D=Date.now(),$=(D-p.value)/1e3,a=8*60*60,f=Math.min($,a),v=C.value*f*.5;return g.value=v,p.value=D,v}function fe(){const D=g.value;return D>0&&(J(D),g.value=0,be()),D}function we(){for(const D of li){if(r.value.includes(D.id))continue;let $=!1;D.condition.type==="totalKP"?$=s.value>=D.condition.value:D.condition.type==="totalLevel"?$=Object.values(i.value).reduce((a,f)=>a+f,0)>=D.condition.value:D.condition.type==="prestigeCount"&&($=c.value>=D.condition.value),$&&(r.value.push(D.id),me("onAchievement",D))}}function me(D,$){x.value[D]&&x.value[D]($)}function Ae(D,$){x.value[D]=$}function be(){const D=e.currentUserId||"guest",$={knowledgePoints:t.value,totalEarnedPoints:s.value,lifetimeEarnedPoints:n.value,facilityLevels:i.value,purchasedUpgrades:l.value,unlockedAchievements:r.value,prestigeLevel:c.value,prestigePoints:u.value,prestigeMultiplier:d.value,lastActiveTime:Date.now(),lastSave:Date.now()};localStorage.setItem(`evolution_${D}`,JSON.stringify($))}function is(){const D=e.currentUserId||"guest",$=localStorage.getItem(`evolution_${D}`);if($)try{const a=JSON.parse($);return t.value=a.knowledgePoints||0,s.value=a.totalEarnedPoints||0,n.value=a.lifetimeEarnedPoints||0,i.value=a.facilityLevels||{},l.value=a.purchasedUpgrades||[],r.value=a.unlockedAchievements||[],c.value=a.prestigeLevel||0,u.value=a.prestigePoints||0,d.value=a.prestigeMultiplier||1,p.value=a.lastActiveTime||Date.now(),!0}catch(a){console.error("Failed to load evolution data:",a)}return!1}async function Ve(){if(!h.value)return;const D=e.currentUserId;if(D)try{(await fetch("/api/game/evolution/sync",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:D,knowledge_points:t.value,total_earned:s.value,lifetime_earned:n.value,facility_levels:i.value,upgrades:l.value,achievements:r.value,prestige_level:c.value,prestige_points:u.value})})).ok&&(h.value=!1,m.value=Date.now())}catch($){console.error("Sync failed:",$)}}async function ut(){const D=e.currentUserId;if(!D)return!1;try{const $=await fetch(`/api/game/evolution/${D}`);if(!$.ok)return!1;const a=await $.json();if(a.status==="ok"&&a.data)return t.value=a.data.knowledge_points||0,s.value=a.data.total_earned||0,n.value=a.data.lifetime_earned||0,i.value=a.data.facility_levels||{},l.value=a.data.upgrades||[],r.value=a.data.achievements||[],c.value=a.data.prestige_level||0,u.value=a.data.prestige_points||0,d.value=1+Math.log10(u.value+1)*.5,be(),!0}catch($){console.error("Load from server failed:",$)}return!1}async function At(){const D=is();await ut()?be():D||(t.value=0,s.value=0,i.value={}),ce(),setInterval(()=>{h.value&&Ve()},3e4),window.addEventListener("beforeunload",()=>{h.value&&Ve()}),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&h.value&&Ve()})}function Gt(D){J(D),be()}return{knowledgePoints:t,totalEarnedPoints:s,lifetimeEarnedPoints:n,facilityLevels:i,purchasedUpgrades:l,unlockedAchievements:r,prestigeLevel:c,prestigePoints:u,prestigeMultiplier:d,pendingOfflineReward:g,lastSyncTime:m,isDirty:h,lastActiveTime:p,currentProduction:C,totalMultiplier:B,facilitiesWithState:O,facilitiesByTier:w,upgradesWithState:F,availableUpgrades:Z,nextUnlock:ie,currentEra:K,potentialPrestigePoints:A,stats:Y,calculateCost:z,formatNumber:k,buyFacility:R,buyUpgrade:G,prestige:N,earnFromStudy:S,addPoints:J,tick:X,calculateOfflineReward:ce,claimOfflineReward:fe,checkAchievements:we,onEvent:Ae,syncToServer:Ve,loadFromServer:ut,initialize:At,saveToLocalStorage:be,debugAddPoints:Gt,TIER_INFO:ri,FACILITIES_MASTER:Yt,UPGRADES_MASTER:us,ACHIEVEMENTS_MASTER:li}}),_c="2008998497-Vfli3v7u",ci=E(!1),ui=E(null),Qe=(e,t)=>{typeof window<"u"&&window.updateProgress&&window.updateProgress(e,t)},wc=e=>{typeof window<"u"&&window.showError&&window.showError(e)},di=()=>{typeof window<"u"&&window.hideLoader&&window.hideLoader()};function kc(){const e=Je(),t=Ds(),s=async()=>{try{if(Qe(65,"LINE..."),typeof liff>"u")throw new Error("LIFF SDK not loaded");if(await liff.init({liffId:_c}),ci.value=!0,Qe(70,"LINE"),!liff.isLoggedIn()){Qe(75,"LINE..."),liff.login();return}Qe(80,"...");const r=(await liff.getProfile()).userId;e.setUserId(r),Qe(85,"..."),await e.fetchUserData(r),Qe(90,"..."),await t.checkActiveSession(r),Qe(100,""),e.setLoading(!1),setTimeout(di,300)}catch(l){console.error("LIFF init error:",l),ui.value=l.message;const r=window.location.hostname==="localhost",c=!window.location.href.includes("liff.line.me");if(r||c){console.warn("Using development/browser mode"),Qe(80,"...");const d=new URLSearchParams(window.location.search).get("user_id")||"dev_user_123";e.setUserId(d),Qe(90,"..."),await e.fetchUserData(d),Qe(100,""),e.setLoading(!1),setTimeout(di,300)}else wc(": "+l.message+`
`),Qe(0,"")}},n=()=>{typeof liff<"u"&&liff.isInClient()&&liff.closeWindow()},i=q(()=>typeof liff<"u"&&liff.isInClient());return{initLiff:s,closeWindow:n,isInitialized:ci,liffError:ui,isInApp:i}}const $c={class:"fixed inset-0 bg-black/30 backdrop-blur-sm z-50 flex items-center justify-center"},Cc={class:"text-center"},Sc={class:"mt-4 text-white font-medium"},Tc={__name:"LoadingSpinner",props:{message:{type:String,default:"..."}},setup(e){return(t,s)=>(b(),_("div",$c,[o("div",Cc,[s[0]||(s[0]=o("div",{class:"animate-spin rounded-full h-12 w-12 border-4 border-white/30 border-t-white mx-auto"},null,-1)),o("p",Sc,y(e.message),1)])]))}},Pc={class:"fixed bottom-4 left-1/2 transform -translate-x-1/2 bg-white/80 backdrop-blur-lg rounded-full shadow-lg px-6 py-3 z-40 w-[90%] max-w-sm"},Mc={class:"flex justify-between items-center px-4"},jc=["onClick","disabled"],Ac={class:"text-xl"},Ic={class:"text-xs mt-1"},Dc={__name:"BottomNav",props:{modelValue:{type:String,required:!0},inSession:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:t}){const s=e,n=t,{playSound:i}=zt(),l=[{id:"data",icon:"",label:""},{id:"study",icon:"",label:""},{id:"game",icon:"",label:""}],r=c=>{c!==s.modelValue&&i("select3"),n("update:modelValue",c)};return(c,u)=>(b(),_("nav",Pc,[o("div",Mc,[(b(),_(oe,null,pe(l,d=>o("button",{key:d.id,onClick:p=>r(d.id),class:le(["flex flex-col items-center transition-transform",e.modelValue===d.id?"text-indigo-600 scale-110":"text-gray-400"]),disabled:d.id!=="study"&&e.inSession},[o("span",Ac,y(d.icon),1),o("span",Ic,y(d.label),1)],10,jc)),64))])]))}},Ec={__name:"FloatingButton",props:{inSession:{type:Boolean,default:!1}},emits:["click"],setup(e,{emit:t}){const s=t;return(n,i)=>(b(),_("button",{onClick:i[0]||(i[0]=l=>s("click")),class:"fixed bottom-24 right-6 w-16 h-16 bg-gradient-to-br from-indigo-500 to-purple-600 text-white rounded-full shadow-xl flex items-center justify-center text-3xl z-30 transition-transform hover:scale-110 active:scale-95"},[o("span",{class:le(e.inSession?"animate-pulse":"")},y(e.inSession?"":""),3)]))}},Oc=os("notification",()=>{const e=E([]),t=E(0),s=E(null),n=g=>{const m=Date.now();e.value.unshift({id:m,...g,read:!1,timestamp:new Date().toISOString()}),t.value++,e.value.length>20&&(e.value=e.value.slice(0,20))},i=g=>{const m=e.value.find(h=>h.id===g);m&&!m.read&&(m.read=!0,t.value=Math.max(0,t.value-1))},l=()=>{e.value.forEach(g=>g.read=!0),t.value=0},r=()=>{e.value=[],t.value=0},c=async()=>{if(Je().isAdmin)try{const h=await(await fetch("/api/admin/pending")).json();if(h.status==="ok"&&h.data){const x=h.data.length,T=parseInt(localStorage.getItem("lastPendingCount")||"0");if(x>T&&T>0){const I=x-T;n({type:"pending",title:"",message:`${I}`,icon:""})}localStorage.setItem("lastPendingCount",x.toString())}}catch(m){console.error("Pending check error:",m)}},u=async()=>{const g=Je();if(g.currentUserId)try{const h=await(await fetch(`/api/user/${g.currentUserId}/notifications`)).json();h.status==="ok"&&h.notifications&&h.notifications.forEach(x=>{e.value.some(I=>I.originalId===x.id)||n({...x,originalId:x.id})})}catch{}};return{notifications:e,unreadCount:t,addNotification:n,markAsRead:i,markAllAsRead:l,clearAll:r,startPolling:()=>{s.value||(c(),u(),s.value=setInterval(()=>{c(),u()},3e4))},stopPolling:()=>{s.value&&(clearInterval(s.value),s.value=null)},checkPendingForAdmin:c}}),He=(e,t)=>{const s=e.__vccOpts||e;for(const[n,i]of t)s[n]=i;return s},Fc={class:"relative"},Nc={key:0,class:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center text-white text-[10px] font-bold animate-bounce"},Lc={key:0,class:"absolute right-0 top-full mt-2 w-80 max-h-96 overflow-y-auto bg-white rounded-2xl shadow-2xl border border-gray-200 z-50"},Uc={class:"sticky top-0 bg-white p-4 border-b border-gray-100 flex justify-between items-center"},Rc={key:0,class:"p-8 text-center text-gray-400"},Bc={key:1,class:"divide-y divide-gray-100"},Hc=["onClick"],Vc={class:"flex items-start gap-3"},Kc={class:"text-2xl"},Wc={class:"flex-1 min-w-0"},zc={class:"font-medium text-gray-800 text-sm"},Gc={class:"text-xs text-gray-500 mt-1"},qc={class:"text-[10px] text-gray-400 mt-2"},Xc={key:0,class:"w-2 h-2 bg-blue-500 rounded-full mt-1"},Yc={key:2,class:"p-3 border-t border-gray-100"},Jc={__name:"NotificationBell",emits:["navigate"],setup(e,{emit:t}){const s=Oc(),n=E(!1),i=t,l=c=>{s.markAsRead(c.id),c.type==="pending"&&i("navigate","admin"),n.value=!1},r=c=>{if(!c)return"";const u=new Date(c),p=Math.floor((new Date-u)/1e3);return p<60?"":p<3600?`${Math.floor(p/60)}`:p<86400?`${Math.floor(p/3600)}`:`${Math.floor(p/86400)}`};return qe(()=>{s.startPolling()}),hn(()=>{s.stopPolling()}),(c,u)=>(b(),_("div",Fc,[o("button",{onClick:u[0]||(u[0]=d=>n.value=!n.value),class:"relative p-2 rounded-xl bg-white/10 hover:bg-white/20 transition-colors"},[u[4]||(u[4]=o("span",{class:"text-xl"},"",-1)),H(s).unreadCount>0?(b(),_("span",Nc,y(H(s).unreadCount>9?"9+":H(s).unreadCount),1)):ae("",!0)]),re(Kt,{name:"fade-slide"},{default:$e(()=>[n.value?(b(),_("div",Lc,[o("div",Uc,[u[5]||(u[5]=o("h3",{class:"font-bold text-gray-800"}," ",-1)),H(s).notifications.length>0?(b(),_("button",{key:0,onClick:u[1]||(u[1]=d=>H(s).markAllAsRead()),class:"text-xs text-blue-500 hover:text-blue-700"},"  ")):ae("",!0)]),H(s).notifications.length===0?(b(),_("div",Rc,[...u[6]||(u[6]=[o("span",{class:"text-4xl block mb-2"},"",-1),o("p",null,"",-1)])])):(b(),_("div",Bc,[(b(!0),_(oe,null,pe(H(s).notifications,d=>(b(),_("div",{key:d.id,onClick:p=>l(d),class:le(["p-4 hover:bg-gray-50 cursor-pointer transition-colors",!d.read&&"bg-blue-50"])},[o("div",Vc,[o("span",Kc,y(d.icon||""),1),o("div",Wc,[o("p",zc,y(d.title),1),o("p",Gc,y(d.message),1),o("p",qc,y(r(d.timestamp)),1)]),d.read?ae("",!0):(b(),_("span",Xc))])],10,Hc))),128))])),H(s).notifications.length>0?(b(),_("div",Yc,[o("button",{onClick:u[2]||(u[2]=d=>H(s).clearAll()),class:"w-full text-center text-xs text-gray-400 hover:text-red-500"},"  ")])):ae("",!0)])):ae("",!0)]),_:1}),n.value?(b(),_("div",{key:0,class:"fixed inset-0 z-40",onClick:u[3]||(u[3]=d=>n.value=!1)})):ae("",!0)]))}},Qc=He(Jc,[["__scopeId","data-v-f7c2d944"]]),Me={__name:"GlassPanel",props:{variant:{type:String,default:"glass"},customClass:{type:String,default:""}},setup(e){return(t,s)=>(b(),_("div",{class:le(["rounded-2xl p-4 shadow-lg backdrop-blur-lg",[e.variant==="glass"?"bg-white/70":"bg-white",e.customClass]])},[zr(t.$slots,"default")],2))}},Zc={class:"space-y-6"},eu={class:"flex items-center gap-4"},tu=["src"],su={class:"text-left flex-1"},nu={class:"font-bold text-lg text-gray-800"},ou={class:"text-sm text-gray-500"},iu={class:"mt-2"},lu={class:"flex justify-between text-xs text-gray-600 mb-1"},ru={class:"h-2 bg-gray-200 rounded-full overflow-hidden"},au={class:"grid grid-cols-2 gap-4"},cu={class:"text-3xl font-bold text-indigo-600"},uu={class:"text-3xl font-bold text-amber-500"},du={class:"flex items-center justify-between"},fu={class:"text-sm text-gray-600"},pu={class:"flex items-center gap-3"},gu={class:"flex-1 h-3 bg-gray-200 rounded-full overflow-hidden"},hu={class:"text-sm font-medium text-gray-600"},mu={class:"flex justify-between items-center mb-3"},vu={key:0,class:"text-center text-gray-400 py-4 text-sm"},bu={key:1,class:"space-y-2"},xu={class:"flex justify-between items-start"},yu={class:"flex-1 min-w-0"},_u={class:"font-bold text-gray-800 text-sm truncate"},wu={key:0,class:"text-xs text-gray-500 truncate"},ku={class:"flex justify-between items-center mt-2"},$u={class:"text-xs text-gray-400"},Cu=["onClick"],Su="https://cdn-icons-png.flaticon.com/512/4333/4333609.png",Tu={__name:"StudyView",emits:["timer","openGoalModal"],setup(e,{expose:t,emit:s}){const n=Je(),i=Ds(),l=fo(),{playSound:r}=zt(),c=s,u=E([]),d=E(0),p=q(()=>Math.min(100,d.value/60*100)),g=()=>{r("select1"),l.openShopList()},m=()=>{r("select2"),alert(`
`)},h=async()=>{if(n.currentUserId)try{const w=await(await fetch(`/api/user/${n.currentUserId}/stats`)).json();if(w.weekly&&w.weekly.length>0){const F=w.weekly[w.weekly.length-1];d.value=(F==null?void 0:F.minutes)||0}}catch(O){console.error("Failed to fetch today stats:",O)}},x=async()=>{if(n.currentUserId)try{const w=await(await fetch(`/api/goals/user/${n.currentUserId}`)).json();w.status==="ok"&&(u.value=w.goals||[])}catch(O){console.error("Failed to fetch goals:",O)}},T=O=>{if(!O)return"";const w=new Date(O);return`${w.getMonth()+1}${w.getDate()}`},I=O=>{if(!O)return"";const w=new Date(O),F=new Date;F.setHours(0,0,0,0),w.setHours(0,0,0,0);const Z=Math.ceil((w-F)/(1e3*60*60*24));return Z<0?"":Z===0?"!":Z===1?"":`${Z}`},C=O=>{if(!O)return"bg-gray-100 text-gray-600";const w=new Date(O),F=new Date;F.setHours(0,0,0,0),w.setHours(0,0,0,0);const Z=Math.ceil((w-F)/(1e3*60*60*24));return Z<0?"bg-red-100 text-red-600":Z<=3?"bg-orange-100 text-orange-600":Z<=7?"bg-yellow-100 text-yellow-600":"bg-green-100 text-green-600"},B=async O=>{if(confirm(""))try{(await(await fetch(`/api/goals/${O}/complete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:n.currentUserId})})).json()).status==="ok"?(r("success"),await x()):alert("")}catch(w){console.error("Complete goal error:",w),alert("")}};return qe(()=>{h(),x()}),t({fetchMyGoals:x}),(O,w)=>(b(),_("div",Zc,[re(Me,{class:"text-center"},{default:$e(()=>[o("div",eu,[o("img",{src:H(n).user.avatar_url||Su,class:"w-16 h-16 rounded-full border-2 border-indigo-300",alt:"avatar"},null,8,tu),o("div",su,[o("h2",nu,y(H(n).user.name),1),o("p",ou,y(H(n).user.rank_name),1),o("div",iu,[o("div",lu,[o("span",null,"Lv."+y(H(n).user.level),1),o("span",null,y(H(n).user.exp)+" / "+y(H(n).user.next_exp)+" XP",1)]),o("div",ru,[o("div",{class:"h-full bg-gradient-to-r from-indigo-500 to-purple-500 transition-all duration-500",style:he({width:H(n).expPercentage+"%"})},null,4)])])])])]),_:1}),o("div",au,[re(Me,{class:"text-center"},{default:$e(()=>{var F;return[o("p",cu,y(((F=H(n).user.total_hours)==null?void 0:F.toFixed(1))||"0"),1),w[2]||(w[2]=o("p",{class:"text-sm text-gray-500"},"",-1))]}),_:1}),re(Me,{class:"text-center"},{default:$e(()=>[o("p",uu,y(H(n).user.xp||0),1),w[3]||(w[3]=o("p",{class:"text-sm text-gray-500"}," XP",-1))]),_:1})]),H(i).inSession?(b(),ye(Me,{key:0,class:"border-2 border-amber-300 animate-pulse"},{default:$e(()=>[o("div",du,[o("div",null,[w[4]||(w[4]=o("p",{class:"text-amber-600 font-bold"}," ",-1)),o("p",fu,y(H(i).currentSubject)+" - "+y(H(i).lastSessionTime),1)]),o("button",{onClick:w[0]||(w[0]=F=>c("timer")),class:"bg-amber-500 text-white px-4 py-2 rounded-lg font-bold"},"  ")])]),_:1})):ae("",!0),re(Me,null,{default:$e(()=>[w[5]||(w[5]=o("h3",{class:"font-bold text-gray-700 mb-2"}," ",-1)),o("div",pu,[o("div",gu,[o("div",{class:"h-full bg-gradient-to-r from-green-400 to-emerald-500",style:he({width:p.value+"%"})},null,4)]),o("span",hu,y(d.value)+"/60",1)])]),_:1}),re(Me,null,{default:$e(()=>[o("div",mu,[w[6]||(w[6]=o("h3",{class:"font-bold text-gray-700"}," ",-1)),o("button",{onClick:w[1]||(w[1]=F=>c("openGoalModal")),class:"text-xs px-3 py-1.5 rounded-lg bg-indigo-100 text-indigo-600 font-medium hover:bg-indigo-200 transition-colors"}," +  ")]),u.value.length===0?(b(),_("div",vu,"  ")):(b(),_("div",bu,[(b(!0),_(oe,null,pe(u.value,F=>(b(),_("div",{key:F.id,class:"p-3 bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl"},[o("div",xu,[o("div",yu,[o("h4",_u,y(F.title),1),F.description?(b(),_("p",wu,y(F.description),1)):ae("",!0)]),o("span",{class:le(["text-xs px-2 py-0.5 rounded-full ml-2 flex-shrink-0",C(F.target_date)])},y(I(F.target_date)),3)]),o("div",ku,[o("span",$u," "+y(T(F.target_date)),1),o("button",{onClick:Z=>B(F.id),class:"text-xs px-2 py-1 rounded bg-green-100 text-green-600 font-medium hover:bg-green-200"},"   ",8,Cu)])]))),128))]))]),_:1}),o("div",{class:"grid grid-cols-2 gap-4"},[o("button",{onClick:g,class:"bg-white/90 backdrop-blur-sm rounded-2xl p-4 shadow-lg flex flex-col items-center justify-center gap-2 transition-transform active:scale-95 border-b-4 border-amber-200"},[...w[7]||(w[7]=[o("span",{class:"text-4xl"},"",-1),o("span",{class:"font-bold text-gray-700"},"",-1)])]),o("button",{onClick:m,class:"bg-white/90 backdrop-blur-sm rounded-2xl p-4 shadow-lg flex flex-col items-center justify-center gap-2 transition-transform active:scale-95 border-b-4 border-purple-200"},[...w[8]||(w[8]=[o("span",{class:"text-4xl"},"",-1),o("span",{class:"font-bold text-gray-700"},"",-1),o("span",{class:"text-xs text-red-500 font-bold bg-red-100 px-2 py-0.5 rounded-full"},"",-1)])])])]))}},Pu={class:"space-y-6 mt-8"},Mu={class:"text-6xl font-mono font-bold text-indigo-700 tracking-wider"},ju={class:"mt-2 text-gray-600"},Au={class:"flex justify-center gap-4"},Iu={__name:"TimerView",emits:["back"],setup(e,{emit:t}){const s=Ds(),n=t,i=()=>{s.openMemoConfirm()},l=async()=>{await s.pauseStudy()&&n("back")},r=async()=>{await s.cancelStudy(),n("back")};return(c,u)=>(b(),_("div",Pu,[re(Me,{class:"text-center py-8"},{default:$e(()=>[o("p",Mu,y(H(s).timerDisplay),1),o("p",ju,[o("span",{class:"inline-block px-3 py-1 rounded-full text-sm font-medium text-white",style:he({backgroundColor:H(s).currentSubjectColor})},y(H(s).currentSubject),5)])]),_:1}),re(Me,null,{default:$e(()=>[u[2]||(u[2]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"   ",-1)),Rt(o("textarea",{"onUpdate:modelValue":u[0]||(u[0]=d=>H(s).studyMemo=d),class:"w-full h-24 p-3 border border-gray-200 rounded-lg resize-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"..."},null,512),[[ys,H(s).studyMemo]])]),_:1}),o("div",{class:"grid grid-cols-2 gap-4"},[o("button",{onClick:i,class:"bg-gradient-to-r from-green-500 to-emerald-600 text-white py-4 rounded-xl font-bold text-lg shadow-lg hover:shadow-xl transition-all active:scale-95"},"   "),o("button",{onClick:l,class:"bg-gradient-to-r from-amber-500 to-orange-500 text-white py-4 rounded-xl font-bold text-lg shadow-lg hover:shadow-xl transition-all active:scale-95"},"   ")]),o("div",Au,[o("button",{onClick:r,class:"text-red-500 underline text-sm"},"  "),o("button",{onClick:u[1]||(u[1]=d=>n("back")),class:"text-gray-500 underline text-sm"},"  ")])]))}},Du={class:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center px-6"},Eu={class:"bg-white rounded-2xl shadow-2xl w-full max-w-sm overflow-hidden animate-fadeInUp"},Ou={class:"p-4 max-h-80 overflow-y-auto"},Fu={class:"grid grid-cols-2 gap-3"},Nu=["onClick","disabled"],Lu={key:0,class:"text-center py-8"},Uu={class:"p-4 border-t"},Ru={__name:"SubjectModal",emits:["close","start"],setup(e,{emit:t}){const s=Ds(),n=t,i=l=>{n("start",l)};return(l,r)=>(b(),ye(fn,{to:"body"},[o("div",Du,[o("div",Eu,[r[2]||(r[2]=o("div",{class:"bg-gradient-to-r from-indigo-500 to-purple-600 p-4"},[o("h3",{class:"text-white font-bold text-lg text-center"}," ")],-1)),o("div",Ou,[o("div",Fu,[(b(!0),_(oe,null,pe(H(s).subjects,(c,u)=>(b(),_("button",{key:u,onClick:d=>i(u),disabled:H(s).studying,class:"p-4 rounded-xl border-2 font-medium text-center transition-all hover:scale-105 active:scale-95 disabled:opacity-50",style:he({borderColor:c,backgroundColor:c+"20",color:c})},y(u),13,Nu))),128))]),Object.keys(H(s).subjects).length===0?(b(),_("div",Lu,[...r[1]||(r[1]=[o("div",{class:"animate-spin rounded-full h-8 w-8 border-4 border-indigo-300 border-t-indigo-600 mx-auto"},null,-1),o("p",{class:"mt-2 text-gray-500"},"...",-1)])])):ae("",!0)]),o("div",Uu,[o("button",{onClick:r[0]||(r[0]=c=>n("close")),class:"w-full py-3 text-gray-600 font-medium"},"  ")])])])]))}},Bu={class:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[9999] flex items-center justify-center px-6"},Hu={class:"bg-white rounded-2xl shadow-2xl w-full max-w-sm overflow-hidden animate-fadeInUp"},Vu={class:"p-6"},Ku={class:"bg-gray-50 rounded-xl p-4 min-h-[100px]"},Wu={class:"text-gray-700 whitespace-pre-wrap"},zu={__name:"MemoConfirmDialog",props:{memo:{type:String,default:""}},emits:["confirm","cancel"],setup(e,{emit:t}){const s=t,{playSound:n}=zt(),i=()=>{n("select2"),s("confirm")},l=()=>{n("click"),s("cancel")};return(r,c)=>(b(),ye(fn,{to:"body"},[o("div",Bu,[o("div",Hu,[c[1]||(c[1]=o("div",{class:"bg-gradient-to-r from-green-500 to-emerald-600 p-4"},[o("h3",{class:"text-white font-bold text-lg text-center"}," ")],-1)),o("div",Vu,[o("div",Ku,[o("p",Wu,y(e.memo||"()"),1)]),c[0]||(c[0]=o("p",{class:"text-center text-gray-500 text-sm mt-4"},"  ",-1))]),o("div",{class:"p-4 border-t flex gap-3"},[o("button",{onClick:l,class:"flex-1 py-3 bg-gray-200 text-gray-700 rounded-xl font-medium transition-colors hover:bg-gray-300 active:bg-gray-400"},"  "),o("button",{onClick:i,class:"flex-1 py-3 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-xl font-bold transition-transform hover:scale-105 active:scale-95"},"  ")])])])]))}},Gu={__name:"AnimatedCounter",props:{value:{type:Number,default:0},duration:{type:Number,default:500}},setup(e){const t=e,s=E("0"),n=E(!1);let i=null;const l=u=>u>=1e9?(u/1e9).toFixed(2)+"B":u>=1e6?(u/1e6).toFixed(2)+"M":u>=1e3?(u/1e3).toFixed(1)+"K":Math.floor(u).toLocaleString(),r=(u,d,p)=>{i&&cancelAnimationFrame(i);const g=performance.now(),m=d-u;m>0&&(n.value=!0,setTimeout(()=>n.value=!1,p+200));const h=x=>{const T=x-g,I=Math.min(T/p,1),C=1-Math.pow(2,-10*I),B=u+m*C;s.value=l(B),I<1&&(i=requestAnimationFrame(h))};i=requestAnimationFrame(h)};let c=0;return Bt(()=>t.value,(u,d)=>{const p=d||c||0;c=u,r(p,u,t.duration)},{immediate:!0}),qe(()=>{s.value=l(t.value)}),(u,d)=>(b(),_("span",{class:le(["odometer",{"text-glow":n.value}])},y(s.value),3))}},po=He(Gu,[["__scopeId","data-v-eb50a094"]]),qu={class:"particle-inner"},Xu={__name:"KPParticlesAdvanced",props:{icon:{type:String,default:""}},setup(e,{expose:t}){const s=e,n=E(null),i=E([]);let l=0;return t({emit:(c={})=>{const{count:u=5,startX:d=null,startY:p=null,targetX:g=null,targetY:m=null}=c,h=n.value;if(!h)return;const x=h.getBoundingClientRect(),T=d??x.width/2,I=p??x.height/2,C=g??x.width/2,B=m??0;for(let O=0;O<u;O++){const w=l++,F=Math.PI*2*O/u+Math.random()*.5,Z=40+Math.random()*60,ie=O*40,K=T+(Math.random()-.5)*30,A=I+(Math.random()-.5)*30,Y=K+Math.cos(F)*Z,z=A+Math.sin(F)*Z*.5-30,k=C,R=B,G={id:w,icon:s.icon,style:{left:`${K}px`,top:`${A}px`,"--mid-x":`${Y-K}px`,"--mid-y":`${z-A}px`,"--end-x":`${k-K}px`,"--end-y":`${R-A}px`,"--delay":`${ie}ms`,"--scale-start":.5+Math.random()*.3,"--rotation":`${Math.random()*360}deg`}};i.value.push(G),setTimeout(()=>{i.value=i.value.filter(N=>N.id!==w)},1200+ie)}}}),(c,u)=>(b(),_("div",{class:"particle-system",ref_key:"containerRef",ref:n},[(b(!0),_(oe,null,pe(i.value,d=>(b(),_("div",{key:d.id,class:"kp-particle",style:he(d.style)},[o("span",qu,y(d.icon),1)],4))),128))],512))}},Yu=He(Xu,[["__scopeId","data-v-c5d908a6"]]),Ju={class:"ambient-particles"},Qu={__name:"SpaceBackground",props:{progress:{type:Number,default:0},parallaxOffset:{type:Object,default:()=>({x:0,y:0})}},setup(e){const t=e,s=q(()=>{const d=t.progress;return d<5e3?{background:"radial-gradient(ellipse at bottom, #1B2838 0%, #0a0e17 50%, #000005 100%)"}:d<5e4?{background:"radial-gradient(ellipse at bottom, #1a1a3e 0%, #0d0d24 50%, #050510 100%)"}:d<5e5?{background:"radial-gradient(ellipse at bottom, #2a1810 0%, #150a08 50%, #0a0505 100%)"}:{background:"radial-gradient(ellipse at bottom, #1a0a2e 0%, #0a0518 50%, #020108 100%)"}}),n=q(()=>{const d=t.progress;return d<5e3?"nebula-blue":d<5e4?"nebula-purple":d<5e5?"nebula-orange":"nebula-cosmic"}),i=E([]);let l=0,r=null;const c=()=>{const d=l++,p={id:d,style:{left:`${Math.random()*100}%`,top:`${Math.random()*50}%`,"--angle":`${-30+Math.random()*20}deg`,"--duration":`${.5+Math.random()*.5}s`,animationDelay:"0s"}};i.value.push(p),setTimeout(()=>{i.value=i.value.filter(g=>g.id!==d)},1500)},u=d=>({"--delay":`${Math.random()*20}s`,"--duration":`${15+Math.random()*15}s`,"--x-start":`${Math.random()*100}%`,"--y-start":`${Math.random()*100}%`,"--drift":`${(Math.random()-.5)*100}px`,opacity:.2+Math.random()*.3,width:`${1+Math.random()*2}px`,height:`${1+Math.random()*2}px`});return qe(()=>{r=setInterval(()=>{Math.random()>.7&&c()},3e3)}),hn(()=>{clearInterval(r)}),(d,p)=>(b(),_("div",{class:"space-background",style:he(s.value)},[o("div",{class:"star-layer star-layer-1",style:he({transform:`translate(${e.parallaxOffset.x*.1}px, ${e.parallaxOffset.y*.1}px)`})},null,4),o("div",{class:"star-layer star-layer-2",style:he({transform:`translate(${e.parallaxOffset.x*.3}px, ${e.parallaxOffset.y*.3}px)`})},null,4),o("div",{class:"star-layer star-layer-3",style:he({transform:`translate(${e.parallaxOffset.x*.5}px, ${e.parallaxOffset.y*.5}px)`})},null,4),o("div",{class:le(["nebula-overlay",n.value]),style:he({transform:`translate(${e.parallaxOffset.x*.2}px, ${e.parallaxOffset.y*.2}px)`})},null,6),(b(!0),_(oe,null,pe(i.value,g=>(b(),_("div",{key:g.id,class:"shooting-star",style:he(g.style)},null,4))),128)),o("div",Ju,[(b(),_(oe,null,pe(30,g=>o("div",{key:g,class:"dust-particle",style:he(u())},null,4)),64))])],4))}},Al=He(Qu,[["__scopeId","data-v-69227696"]]),Zu={class:"stage-icon"},ed={class:"stage-name"},td={key:0,class:"orbiting-elements"},sd={__name:"EvolutionStage",props:{totalKP:{type:Number,default:0},isActive:{type:Boolean,default:!1}},setup(e){const t=e,s=[{tier:1,minKP:0,name:"",emoji:"",description:""},{tier:2,minKP:5e3,name:"",emoji:"",description:""},{tier:3,minKP:5e4,name:"",emoji:"",description:""},{tier:4,minKP:2e5,name:"",emoji:"",description:""},{tier:5,minKP:1e6,name:"",emoji:"",description:""},{tier:6,minKP:1e7,name:"",emoji:"",description:""}],n=q(()=>{const d=t.totalKP;let p=s[0];for(const g of s)d>=g.minKP&&(p=g);return p}),i=q(()=>`stage-tier-${n.value.tier}`),l=q(()=>{const d=n.value.tier;return{1:"glow-blue",2:"glow-cyan",3:"glow-silver",4:"glow-orange",5:"glow-purple",6:"glow-gold"}[d]||"glow-blue"}),r=q(()=>{const d=n.value.tier;return d<3?0:d===3?1:d===4?2:d===5?3:5}),c=q(()=>{const d=n.value.tier;return{3:"",4:"",5:"",6:""}[d]||""}),u=d=>{const p=360/r.value*d,g=10+d*2;return{"--orbit-angle":`${p}deg`,"--orbit-duration":`${g}s`,animationDelay:`${d*-2}s`}};return(d,p)=>(b(),_("div",{class:le(["evolution-stage relative",{active:e.isActive}])},[o("div",{class:le(["glow-ring",l.value])},null,2),o("div",{class:le(["stage-visual",i.value])},[o("div",Zu,y(n.value.emoji),1),o("div",ed,y(n.value.name),1),n.value.tier>=3?(b(),_("div",td,[(b(!0),_(oe,null,pe(r.value,g=>(b(),_("div",{key:g,class:"orbit-item",style:he(u(g))},y(c.value),5))),128))])):ae("",!0)],2),p[0]||(p[0]=o("div",{class:"tap-indicator"},[o("span",{class:"tap-text"},""),o("div",{class:"tap-arrow"},"")],-1))],2))}},nd=He(sd,[["__scopeId","data-v-3e9938dd"]]),od={class:"flex justify-between items-start p-4 gap-2"},id={class:"flex items-center gap-3"},ld={class:"bg-black/50 backdrop-blur-xl rounded-2xl px-4 py-3 border border-white/20 shadow-lg"},rd={class:"flex items-center gap-2"},ad={class:"text-right"},cd={class:"text-xl font-bold text-cyan-300 tabular-nums"},ud={class:"px-4"},dd={class:"bg-black/40 backdrop-blur-lg rounded-full px-4 py-2 inline-flex items-center gap-2"},fd={class:"text-sm text-amber-300 font-bold tabular-nums"},pd={class:"absolute inset-0 flex items-center justify-center pointer-events-none"},gd={class:"absolute bottom-24 left-3 right-3 z-20 sm:bottom-28 sm:left-4 sm:right-4"},hd={key:0,class:"bg-black/50 backdrop-blur-xl rounded-2xl p-3 sm:p-4 border border-white/20 shadow-lg"},md={class:"flex justify-between text-xs text-white/80 mb-2"},vd={class:"flex items-center gap-1.5"},bd={class:"text-cyan-300 font-bold text-xs sm:text-sm truncate max-w-[100px] sm:max-w-none"},xd={class:"text-yellow-300 font-bold tabular-nums"},yd={class:"h-3 sm:h-4 bg-white/10 rounded-full overflow-hidden relative"},_d={class:"absolute bottom-2 left-1 right-1 z-20 ios-safe-bottom sm:bottom-4 sm:left-2 sm:right-2"},wd={class:"flex gap-1 sm:gap-1.5 justify-center px-1"},kd={class:"absolute inset-0 pointer-events-none overflow-hidden"},$d={class:"unlock-celebration relative z-10 max-w-sm mx-4 bg-gradient-to-br from-slate-900/95 via-indigo-900/95 to-purple-900/95 rounded-3xl p-8 border border-yellow-400/30 shadow-2xl"},Cd={class:"relative mt-4 mb-6"},Sd={class:"relative text-8xl text-center animate-bounce-in filter drop-shadow-[0_0_20px_rgba(250,204,21,0.5)]"},Td={class:"text-3xl font-black text-transparent bg-clip-text bg-gradient-to-r from-yellow-300 via-amber-400 to-yellow-300 text-center mb-2 animate-shimmer-text"},Pd={class:"flex justify-center mb-4"},Md={class:"text-white/80 text-center text-sm leading-relaxed mb-4"},jd={key:0,class:"bg-black/40 rounded-xl p-4 mb-6 border border-cyan-400/30"},Ad={class:"flex items-start gap-2"},Id={class:"text-xs text-cyan-100/80 leading-relaxed italic"},Dd={class:"grid grid-cols-2 gap-3 mb-6"},Ed={class:"bg-white/10 rounded-xl p-3 text-center"},Od={class:"text-lg font-bold text-green-400"},Fd={class:"bg-white/10 rounded-xl p-3 text-center"},Nd={class:"text-lg font-bold text-yellow-400"},Ld={key:1,class:"text-center text-white/50 text-xs italic mb-6"},Ud={class:"confetti-container"},Rd={__name:"MainGameView",emits:["navigate"],setup(e,{emit:t}){const s=jt(),n=Je(),i=t;qe(()=>{document.addEventListener("click",()=>ze.init(),{once:!0})});const l=z=>{ze.play("click"),i("navigate",z)},r=E(null),c=E(null),u=E(!1),d=E(!1),p=E(!1),g=E([]),m=E({x:0,y:0}),h=E(!1),x=E(null);let T=0;const I=q(()=>{var k;const z=((k=s.nextUnlock)==null?void 0:k.progressToUnlock)||0;return z>=80?"bg-gradient-to-r from-yellow-400 via-amber-400 to-yellow-300 animate-pulse-urgent":z>=50?"bg-gradient-to-r from-cyan-400 to-blue-400":"bg-gradient-to-r from-indigo-500 to-purple-500"}),C=z=>{ze.play("click");const k=z.currentTarget.getBoundingClientRect(),R=z.clientX-k.left,G=z.clientY-k.top,N=T++;g.value.push({id:N,x:R,y:G}),setTimeout(()=>{g.value=g.value.filter(fe=>fe.id!==N)},600);const S=Math.max(1,Math.floor(s.totalMultiplier*.01)),J=O++;if(B.value.push({id:J,x:R,y:G,value:S}),setTimeout(()=>{B.value=B.value.filter(fe=>fe.id!==J)},1e3),p.value=!0,setTimeout(()=>p.value=!1,100),s.addPoints(S),r.value&&c.value){const fe=c.value.getBoundingClientRect();r.value.emit({count:Math.min(8,S),startX:R,startY:G,targetX:fe.left+60,targetY:fe.top+40})}const X=k.width/2,ce=k.height/2;m.value={x:(R-X)*.02,y:(G-ce)*.02}},B=E([]);let O=0;const w=z=>{},F=z=>{if(z.touches.length===1){const k=z.touches[0],R=z.currentTarget.getBoundingClientRect(),G=R.width/2,N=R.height/2;m.value={x:(k.clientX-R.left-G)*.015,y:(k.clientY-R.top-N)*.015}}};Bt(()=>s.knowledgePoints,(z,k)=>{z>(k||0)&&(u.value=!0,setTimeout(()=>u.value=!1,500))});let Z=[];Bt(()=>s.facilitiesWithState,z=>{const k=z.filter(G=>G.state==="unlocked").map(G=>G.id),R=k.filter(G=>!Z.includes(G));if(R.length>0&&Z.length>0){const G=z.find(N=>N.id===R[0]);G&&ie(G)}Z=k},{deep:!0});const ie=z=>{d.value=!0,setTimeout(()=>d.value=!1,500),x.value=z,h.value=!0},K=z=>{const k=["#FFD700","#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD"];return{"--delay":`${Math.random()*3}s`,"--x-end":`${(Math.random()-.5)*400}px`,"--rotation":`${Math.random()*720}deg`,left:`${Math.random()*100}%`,backgroundColor:k[z%k.length],animationDelay:`${Math.random()*.5}s`}},A=z=>({"--sparkle-delay":`${Math.random()*2}s`,"--sparkle-x":`${Math.random()*100}%`,"--sparkle-y":`${Math.random()*100}%`,"--sparkle-size":`${4+Math.random()*8}px`,left:`${Math.random()*100}%`,top:`${Math.random()*100}%`}),Y=z=>({1:"bg-slate-600 text-slate-200",2:"bg-blue-600 text-blue-100",3:"bg-purple-600 text-purple-100",4:"bg-orange-600 text-orange-100",5:"bg-pink-600 text-pink-100",6:"bg-amber-600 text-amber-100"})[z]||"bg-gray-600 text-gray-200";return qe(()=>{Z=s.facilitiesWithState.filter(z=>z.state==="unlocked").map(z=>z.id)}),(z,k)=>(b(),_("div",{class:"main-game-view relative min-h-[calc(100vh-180px)] overflow-hidden",onClick:C,onTouchstartPassive:w,onTouchmovePassive:F},[re(Al,{progress:H(s).totalEarnedPoints,parallaxOffset:m.value},null,8,["progress","parallaxOffset"]),re(Yu,{ref_key:"particleSystem",ref:r},null,512),o("div",{class:le({"animate-shake":d.value})},[o("div",{class:"absolute top-0 left-0 right-0 z-30 ios-safe-top",ref_key:"kpTargetRef",ref:c},[o("div",od,[o("div",{class:le(["kp-display bg-black/50 backdrop-blur-xl rounded-2xl px-4 py-3 border border-white/20 shadow-lg flex-1",{"animate-glow-pulse":u.value}])},[o("div",id,[k[7]||(k[7]=o("span",{class:"text-3xl"},"",-1)),o("div",null,[k[6]||(k[6]=o("p",{class:"text-[10px] text-white/70 font-medium uppercase tracking-wider"},"Knowledge",-1)),re(po,{value:H(s).knowledgePoints,class:"text-2xl font-bold text-yellow-300 tabular-nums",duration:300},null,8,["value"])])])],2),o("div",ld,[o("div",rd,[k[9]||(k[9]=o("span",{class:"text-2xl"},"",-1)),o("div",ad,[k[8]||(k[8]=o("p",{class:"text-[10px] text-white/70 font-medium uppercase tracking-wider"},"",-1)),o("p",cd,""+y(H(s).totalMultiplier.toFixed(1)),1)])])])]),o("div",ud,[o("div",dd,[k[10]||(k[10]=o("span",{class:"text-lg"},"",-1)),o("span",fd,y(H(n).user.xp||0),1),k[11]||(k[11]=o("span",{class:"text-[10px] text-white/50"},"XP",-1))])])],512),o("div",pd,[re(nd,{totalKP:H(s).totalEarnedPoints,isActive:p.value,class:"pointer-events-auto transform-gpu"},null,8,["totalKP","isActive"])]),(b(!0),_(oe,null,pe(B.value,R=>(b(),_("div",{key:R.id,class:"floating-number",style:he({left:R.x+"px",top:R.y+"px"})}," +"+y(R.value),5))),128)),(b(!0),_(oe,null,pe(g.value,R=>(b(),_("div",{key:R.id,class:"tap-ripple",style:he({left:R.x+"px",top:R.y+"px"})},null,4))),128)),o("div",gd,[H(s).nextUnlock?(b(),_("div",hd,[o("div",md,[o("span",vd,[k[12]||(k[12]=o("span",{class:"text-base"},"",-1)),k[13]||(k[13]=o("span",{class:"font-medium hidden sm:inline"},":",-1)),o("span",bd,y(H(s).nextUnlock.state==="revealed"?H(s).nextUnlock.name:"???"),1)]),o("span",xd,y(Math.floor(H(s).nextUnlock.progressToUnlock))+"%",1)]),o("div",yd,[o("div",{class:le(["h-full transition-all duration-500 rounded-full relative",I.value]),style:he({width:H(s).nextUnlock.progressToUnlock+"%"})},[...k[14]||(k[14]=[o("div",{class:"absolute inset-0 bg-gradient-to-r from-transparent via-white/40 to-transparent animate-shimmer-fast"},null,-1)])],6)])])):ae("",!0)]),o("div",_d,[k[19]||(k[19]=o("p",{class:"text-[9px] sm:text-[10px] text-white/50 text-center mb-1 sm:mb-2 uppercase tracking-widest"},"KP",-1)),o("div",wd,[o("button",{onClick:k[0]||(k[0]=Ye(R=>l("list"),["stop"])),class:"ios-nav-button"},[...k[15]||(k[15]=[o("span",{class:"text-2xl sm:text-3xl"},"",-1),o("span",{class:"text-[10px] sm:text-xs font-bold"},"",-1)])]),o("button",{onClick:k[1]||(k[1]=Ye(R=>l("tree"),["stop"])),class:"ios-nav-button"},[...k[16]||(k[16]=[o("span",{class:"text-2xl sm:text-3xl"},"",-1),o("span",{class:"text-[10px] sm:text-xs font-bold"},"",-1)])]),o("button",{onClick:k[2]||(k[2]=Ye(R=>l("upgrade"),["stop"])),class:"ios-nav-button"},[...k[17]||(k[17]=[o("span",{class:"text-2xl sm:text-3xl"},"",-1),o("span",{class:"text-[10px] sm:text-xs font-bold"},"",-1)])]),o("button",{onClick:k[3]||(k[3]=Ye(R=>l("prestige"),["stop"])),class:"ios-nav-button prestige-button"},[...k[18]||(k[18]=[o("span",{class:"text-2xl sm:text-3xl"},"",-1),o("span",{class:"text-[10px] sm:text-xs font-bold"},"",-1)])])])])],2),re(Kt,{name:"celebrate"},{default:$e(()=>{var R,G,N,S,J,X,ce,fe,we,me,Ae;return[h.value?(b(),_("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-lg",onClick:k[5]||(k[5]=Ye(be=>h.value=!1,["self"]))},[k[26]||(k[26]=o("div",{class:"absolute inset-0 flex items-center justify-center pointer-events-none"},[o("div",{class:"w-96 h-96 rounded-full bg-gradient-radial from-yellow-400/30 via-amber-500/10 to-transparent animate-pulse-slow"})],-1)),o("div",kd,[(b(),_(oe,null,pe(20,be=>o("div",{key:"sparkle-"+be,class:"sparkle",style:he(A(be))},null,4)),64))]),o("div",$d,[k[25]||(k[25]=o("div",{class:"absolute -top-4 left-1/2 -translate-x-1/2 bg-gradient-to-r from-yellow-400 to-amber-500 px-6 py-2 rounded-full shadow-lg"},[o("span",{class:"text-black font-bold text-sm tracking-wider"}," NEW UNLOCK")],-1)),o("div",Cd,[k[20]||(k[20]=o("div",{class:"absolute inset-0 flex items-center justify-center"},[o("div",{class:"w-32 h-32 rounded-full bg-yellow-400/20 animate-ping-slow"})],-1)),o("div",Sd,y((R=x.value)==null?void 0:R.icon),1)]),o("h2",Td,y((G=x.value)==null?void 0:G.name),1),o("div",Pd,[o("span",{class:le(["px-3 py-1 text-xs font-bold rounded-full",Y((N=x.value)==null?void 0:N.tier)])}," Tier "+y((S=x.value)==null?void 0:S.tier)+"  ",3)]),o("p",Md,y((J=x.value)==null?void 0:J.description),1),(X=x.value)!=null&&X.academicNote?(b(),_("div",jd,[o("div",Ad,[k[22]||(k[22]=o("span",{class:"text-cyan-400 text-lg"},"",-1)),o("div",null,[k[21]||(k[21]=o("p",{class:"text-[10px] text-cyan-400 font-bold uppercase tracking-wider mb-1"},"Academic Note",-1)),o("p",Id,y((ce=x.value)==null?void 0:ce.academicNote),1)])])])):ae("",!0),o("div",Dd,[o("div",Ed,[k[23]||(k[23]=o("p",{class:"text-[10px] text-white/50 uppercase"},"",-1)),o("p",Od,"+"+y((fe=x.value)==null?void 0:fe.baseProduction)+"/",1)]),o("div",Fd,[k[24]||(k[24]=o("p",{class:"text-[10px] text-white/50 uppercase"},"",-1)),o("p",Nd,y((we=x.value)==null?void 0:we.baseCost)+" KP",1)])]),(me=x.value)!=null&&me.flavorText?(b(),_("p",Ld,y((Ae=x.value)==null?void 0:Ae.flavorText),1)):ae("",!0),o("button",{onClick:k[4]||(k[4]=Ye(be=>h.value=!1,["stop"])),class:"w-full py-4 bg-gradient-to-r from-yellow-400 via-amber-400 to-yellow-400 text-black font-bold rounded-2xl text-lg shadow-lg active:scale-95 transition-all hover:shadow-yellow-400/50 hover:shadow-xl"},"   ")]),o("div",Ud,[(b(),_(oe,null,pe(60,be=>o("div",{key:be,class:"confetti",style:he(K(be))},null,4)),64))])])):ae("",!0)]}),_:1})],32))}},Bd=He(Rd,[["__scopeId","data-v-fd3c520e"]]),Hd={key:0,class:"p-3 flex flex-col items-center justify-center h-[180px]"},Vd={class:"relative w-14 h-14 mb-2"},Kd={class:"w-full h-full transform -rotate-90",viewBox:"0 0 64 64"},Wd=["stroke-dashoffset"],zd={class:"absolute inset-0 flex items-center justify-center"},Gd={class:"text-2xl filter grayscale blur-[2px] opacity-30"},qd={class:"text-[10px] text-gray-500"},Xd={key:1,class:"p-3 flex flex-col items-center justify-center h-[180px]"},Yd={class:"relative w-14 h-14 mb-2"},Jd={class:"w-full h-full transform -rotate-90",viewBox:"0 0 64 64"},Qd=["stroke","stroke-dashoffset"],Zd={class:"absolute inset-0 flex items-center justify-center"},e0={class:"text-2xl filter blur-[1px] opacity-60"},t0={class:"text-[10px] text-cyan-400"},s0={key:2,class:"p-3 flex flex-col items-center justify-center h-[180px] relative"},n0={class:"relative w-14 h-14 mb-2"},o0={class:"w-full h-full transform -rotate-90",viewBox:"0 0 64 64"},i0=["stroke-dashoffset"],l0={class:"absolute inset-0 flex items-center justify-center"},r0={class:"text-3xl animate-pulse"},a0={class:"text-amber-300 font-bold text-sm truncate max-w-full px-1"},c0={class:"text-[10px] text-amber-400"},u0={key:3,class:"p-3 flex flex-col h-[180px]"},d0={class:"flex items-start justify-between mb-2"},f0={class:"relative"},p0={key:0,class:"bg-yellow-400/20 rounded-lg px-1.5 py-0.5"},g0={class:"text-[10px] text-yellow-400 font-bold"},h0={class:"font-bold text-white text-sm truncate mb-1"},m0={class:"flex-1"},v0={key:0,class:"space-y-1"},b0={class:"flex items-center gap-1 text-green-400 text-xs"},x0={class:"font-bold"},y0={class:"h-1.5 bg-white/10 rounded-full overflow-hidden"},_0={class:"text-[9px] text-white/40"},w0={key:1,class:"text-xs text-white/50"},k0={class:"mt-auto pt-2 border-t border-white/10"},$0={class:"flex items-center gap-1"},C0=["disabled"],S0={__name:"FacilityCardHorizontal",props:{facility:{type:Object,required:!0}},emits:["buy"],setup(e,{emit:t}){const s=e,n=t,i=jt(),l=E(1),r=2*Math.PI*28,c=O=>i.formatNumber(O),u=()=>{const O=parseInt(l.value);n("buy",{facilityId:s.facility.id,amount:O})},d=q(()=>{if(s.facility.state!=="unlocked")return{canBuy:0,totalCost:0};const O=parseInt(l.value),w=O===-1?1e3:O;let F=0,Z=0,ie=i.knowledgePoints,K=s.facility.level||0;for(let A=0;A<w;A++){const Y=i.calculateCost(s.facility.baseCost,K);if(ie>=Y)ie-=Y,F+=Y,K++,Z++;else break}return{canBuy:Z,totalCost:F}}),p=q(()=>parseInt(l.value)===1?s.facility.currentCost:d.value.totalCost),g=q(()=>d.value.canBuy>0),m=q(()=>!s.facility.production||!i.currentProduction?0:s.facility.production/i.currentProduction*100),h={1:{color:"#64748b",bg:"bg-slate-700",badge:"bg-slate-500"},2:{color:"#3b82f6",bg:"bg-blue-900",badge:"bg-blue-500"},3:{color:"#8b5cf6",bg:"bg-purple-900",badge:"bg-purple-500"},4:{color:"#f97316",bg:"bg-orange-900",badge:"bg-orange-500"},5:{color:"#ec4899",bg:"bg-pink-900",badge:"bg-pink-500"},6:{color:"#f59e0b",bg:"bg-amber-900",badge:"bg-amber-500"}},x=q(()=>{var O;return((O=h[s.facility.tier])==null?void 0:O.color)||"#64748b"}),T=q(()=>{var O;return((O=h[s.facility.tier])==null?void 0:O.bg)||"bg-slate-700"}),I=q(()=>{var O;return((O=h[s.facility.tier])==null?void 0:O.badge)||"bg-slate-500"}),C=q(()=>{switch(s.facility.state){case"unlocked":return s.facility.level>0?"bg-slate-800/90 border border-white/20":"bg-slate-800/70 border border-white/10";case"revealed":return"bg-gradient-to-b from-amber-900/80 to-yellow-900/80 border border-amber-400/50";case"hint":return"bg-gray-800/80 border border-white/10";default:return"bg-gray-900/80 border border-white/5"}}),B=q(()=>g.value?"bg-gradient-to-r from-indigo-500 to-purple-500 text-white active:scale-95":"bg-white/10 text-white/30 cursor-not-allowed");return(O,w)=>(b(),_("div",{class:le(["facility-card-horizontal relative rounded-2xl overflow-hidden transition-all duration-300 flex-shrink-0",C.value]),style:{width:"160px"}},[e.facility.state==="locked"?(b(),_("div",Hd,[o("div",Vd,[(b(),_("svg",Kd,[w[2]||(w[2]=o("circle",{cx:"32",cy:"32",r:"28",fill:"none",stroke:"rgba(255,255,255,0.1)","stroke-width":"4"},null,-1)),o("circle",{cx:"32",cy:"32",r:"28",fill:"none",stroke:"rgba(100,116,139,0.5)","stroke-width":"4","stroke-linecap":"round","stroke-dasharray":r,"stroke-dashoffset":r*(1-e.facility.progressToUnlock/100)},null,8,Wd)])),o("div",zd,[o("span",Gd,y(e.facility.icon),1)])]),w[3]||(w[3]=o("p",{class:"text-gray-400 font-semibold text-sm"},"???",-1)),o("p",qd,y(c(e.facility.unlockCondition))+" KP",1)])):e.facility.state==="hint"?(b(),_("div",Xd,[o("div",Yd,[(b(),_("svg",Jd,[w[4]||(w[4]=o("circle",{cx:"32",cy:"32",r:"28",fill:"none",stroke:"rgba(255,255,255,0.1)","stroke-width":"4"},null,-1)),o("circle",{cx:"32",cy:"32",r:"28",fill:"none",stroke:x.value,"stroke-width":"4","stroke-linecap":"round","stroke-dasharray":r,"stroke-dashoffset":r*(1-e.facility.progressToUnlock/100),class:"animate-pulse"},null,8,Qd)])),o("div",Zd,[o("span",e0,y(e.facility.icon),1)])]),w[5]||(w[5]=o("p",{class:"text-gray-300 font-semibold text-sm"},"???",-1)),o("p",t0,y(Math.floor(e.facility.progressToUnlock))+"%",1)])):e.facility.state==="revealed"?(b(),_("div",s0,[w[7]||(w[7]=o("div",{class:"absolute inset-0 bg-gradient-to-r from-transparent via-amber-400/10 to-transparent animate-shimmer-slow"},null,-1)),o("div",n0,[(b(),_("svg",o0,[w[6]||(w[6]=o("circle",{cx:"32",cy:"32",r:"28",fill:"none",stroke:"rgba(251,191,36,0.2)","stroke-width":"4"},null,-1)),o("circle",{cx:"32",cy:"32",r:"28",fill:"none",stroke:"#fbbf24","stroke-width":"4","stroke-linecap":"round","stroke-dasharray":r,"stroke-dashoffset":r*(1-e.facility.progressToUnlock/100),class:"animate-pulse"},null,8,i0)])),o("div",l0,[o("span",r0,y(e.facility.icon),1)])]),o("p",a0,y(e.facility.name),1),o("p",c0,y(Math.floor(e.facility.progressToUnlock))+"%",1)])):(b(),_("div",u0,[o("div",d0,[o("div",f0,[o("div",{class:le(["w-12 h-12 rounded-xl flex items-center justify-center text-2xl",T.value])},y(e.facility.icon),3),e.facility.level>0?(b(),_("div",{key:0,class:le(["absolute -top-1 -right-1 w-6 h-6 rounded-full flex items-center justify-center text-[10px] font-bold text-white shadow",I.value])},y(e.facility.level>99?"99+":e.facility.level),3)):ae("",!0)]),e.facility.milestoneBonus>1?(b(),_("div",p0,[o("span",g0,""+y(e.facility.milestoneBonus),1)])):ae("",!0)]),o("h3",h0,y(e.facility.name),1),o("div",m0,[e.facility.level>0?(b(),_("div",v0,[o("div",b0,[w[8]||(w[8]=o("span",null,"",-1)),o("span",x0,"+"+y(c(e.facility.production))+"/",1)]),o("div",y0,[o("div",{class:"h-full bg-gradient-to-r from-green-400 to-emerald-400 transition-all",style:he({width:m.value+"%"})},null,4)]),o("p",_0," "+y(m.value.toFixed(1))+"%",1)])):(b(),_("div",w0,"  "))]),o("div",k0,[o("div",$0,[Rt(o("select",{"onUpdate:modelValue":w[0]||(w[0]=F=>l.value=F),onClick:w[1]||(w[1]=Ye(()=>{},["stop"])),class:"flex-1 px-1 py-1.5 rounded-lg text-[10px] font-bold bg-white/10 text-white border border-white/20 appearance-none cursor-pointer text-center"},[...w[9]||(w[9]=[o("option",{value:"1"},"1",-1),o("option",{value:"10"},"10",-1),o("option",{value:"100"},"100",-1),o("option",{value:"-1"},"MAX",-1)])],512),[[Sl,l.value]]),o("button",{onClick:Ye(u,["stop"]),disabled:!g.value,class:le(["flex-1 py-1.5 rounded-lg font-bold text-[10px] transition-all flex items-center justify-center gap-0.5",B.value])},[o("span",null,y(e.facility.level===0?"":""),1),o("span",null,y(c(p.value)),1)],10,C0)])])]))],2))}},T0=He(S0,[["__scopeId","data-v-826af725"]]),P0={class:"facility-list-view min-h-screen pb-32"},M0={class:"sticky top-0 z-30 bg-slate-900/95 backdrop-blur-lg border-b border-white/10 ios-safe-top"},j0={class:"p-4 flex items-center gap-3"},A0={class:"flex-1"},I0={class:"text-xs text-white/60 mt-0.5"},D0={class:"bg-white/15 rounded-2xl px-4 py-2.5 flex items-center gap-2 border border-white/10"},E0={class:"px-4 pb-3 flex items-center gap-2"},O0={class:"flex-1 bg-gradient-to-r from-green-900/50 to-emerald-900/50 rounded-xl p-3 border border-green-400/20"},F0={class:"flex items-center justify-between"},N0={class:"text-lg font-bold text-green-400 tabular-nums"},L0={class:"bg-white/10 rounded-xl p-3"},U0={class:"flex items-center justify-between gap-2"},R0={class:"text-lg font-bold text-cyan-300 tabular-nums"},B0={class:"py-4 space-y-6"},H0={class:"px-4 mb-3"},V0={class:"flex items-center gap-3"},K0={class:"flex-1"},W0={class:"font-bold text-white"},z0={class:"text-xs text-white/60"},G0={class:"text-right"},q0={class:"text-sm font-bold text-green-400"},X0={class:"overflow-x-auto scrollbar-hide"},Y0={class:"flex gap-3 px-4 pb-2",style:{"min-width":"min-content"}},J0={class:"fixed bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-slate-900 via-slate-900/95 to-transparent ios-safe-bottom"},Q0={class:"flex gap-3 max-w-md mx-auto"},Z0={__name:"FacilityListView",emits:["navigate"],setup(e,{emit:t}){const s=jt(),n=t,i=u=>{ze.play("click"),n("navigate",u)},l=q(()=>s.stats),r=({facilityId:u,amount:d})=>{d===-1?s.buyFacility(u,1e3):s.buyFacility(u,d)},c=u=>{const d=u.facilities.filter(p=>p.state==="unlocked"&&p.level>0).reduce((p,g)=>p+g.production,0);return s.formatNumber(d)};return(u,d)=>(b(),_("div",P0,[d[10]||(d[10]=o("div",{class:"fixed inset-0 -z-10"},[o("div",{class:"absolute inset-0 bg-gradient-to-b from-slate-900 via-slate-800 to-slate-900"}),o("div",{class:"star-layer-subtle"})],-1)),o("div",M0,[o("div",j0,[o("button",{onClick:d[0]||(d[0]=p=>i("main")),class:"w-12 h-12 rounded-2xl bg-white/15 flex items-center justify-center text-white active:bg-white/30 active:scale-95 transition-all text-lg"},"  "),o("div",A0,[d[3]||(d[3]=o("h1",{class:"text-xl font-bold text-white"},"",-1)),o("p",I0,y(l.value.unlockedCount)+"/"+y(l.value.totalFacilities)+" ",1)]),o("div",D0,[d[4]||(d[4]=o("span",{class:"text-xl"},"",-1)),re(po,{value:H(s).knowledgePoints,class:"text-xl font-bold text-yellow-300 tabular-nums"},null,8,["value"])])]),o("div",E0,[o("div",O0,[o("div",F0,[d[5]||(d[5]=o("span",{class:"text-xs text-green-300/80"}," ",-1)),o("span",N0,"+"+y(H(s).formatNumber(H(s).currentProduction))+"/",1)])]),o("div",L0,[o("div",U0,[d[6]||(d[6]=o("span",{class:"text-xs text-white/60"},"",-1)),o("span",R0,y(H(s).totalMultiplier.toFixed(1)),1)])])])]),o("div",B0,[(b(!0),_(oe,null,pe(H(s).facilitiesByTier,p=>(b(),_("div",{key:p.tier,class:"tier-section"},[o("div",H0,[o("div",V0,[o("div",{class:le(["w-10 h-10 rounded-xl bg-gradient-to-br flex items-center justify-center text-white font-bold shadow-lg",p.color])},y(p.tier),3),o("div",K0,[o("p",W0,y(p.name),1),o("p",z0,y(p.facilities.filter(g=>g.state==="unlocked").length)+"/"+y(p.facilities.length)+"  ",1)]),o("div",G0,[d[7]||(d[7]=o("p",{class:"text-xs text-white/50"},"Tier",-1)),o("p",q0,"+"+y(c(p))+"/",1)])])]),o("div",X0,[o("div",Y0,[(b(!0),_(oe,null,pe(p.facilities,g=>(b(),ye(T0,{key:g.id,facility:g,onBuy:r},null,8,["facility"]))),128))])])]))),128))]),o("div",J0,[o("div",Q0,[o("button",{onClick:d[1]||(d[1]=p=>i("main")),class:"flex-1 py-4 bg-white/15 backdrop-blur-xl rounded-2xl text-white font-bold flex items-center justify-center gap-2 border border-white/20 active:bg-white/30 active:scale-95 transition-all text-base"},[...d[8]||(d[8]=[o("span",{class:"text-xl"},"",-1),o("span",null,"",-1)])]),o("button",{onClick:d[2]||(d[2]=p=>i("tree")),class:"flex-1 py-4 bg-white/15 backdrop-blur-xl rounded-2xl text-white font-bold flex items-center justify-center gap-2 border border-white/20 active:bg-white/30 active:scale-95 transition-all text-base"},[...d[9]||(d[9]=[o("span",{class:"text-xl"},"",-1),o("span",null,"",-1)])])])])]))}},ef=He(Z0,[["__scopeId","data-v-3e10494a"]]),tf={key:1,class:"progress-ring",viewBox:"0 0 80 80"},sf=["stroke","stroke-dashoffset"],nf={class:"node-label"},of={key:3,class:"unlock-indicator"},lf={__name:"TechNodeAdvanced",props:{node:{type:Object,required:!0}},emits:["select","buy"],setup(e){const t=e,s=2*Math.PI*36,n=q(()=>{const h="relative cursor-pointer transition-all duration-300";switch(t.node.state){case"unlocked":return`${h} hover:scale-110`;case"revealed":return`${h} hover:scale-105 animate-pulse-slow`;case"hint":return`${h} opacity-70`;default:return`${h} opacity-40`}}),i=q(()=>{const h="relative w-16 h-16 rounded-full flex items-center justify-center transition-all";switch(t.node.state){case"unlocked":return t.node.level>0?`${h} ${l.value} shadow-lg`:`${h} bg-slate-600 shadow-md`;case"revealed":return`${h} bg-amber-900/80 ring-2 ring-amber-400/50 shadow-lg`;case"hint":return`${h} bg-slate-800/80 backdrop-blur`;default:return`${h} bg-slate-900/80`}}),l=q(()=>{const h=t.node.tier;return{1:"bg-gradient-to-br from-slate-400 to-slate-600",2:"bg-gradient-to-br from-blue-400 to-blue-600",3:"bg-gradient-to-br from-purple-400 to-purple-600",4:"bg-gradient-to-br from-orange-400 to-red-500",5:"bg-gradient-to-br from-pink-400 to-purple-600",6:"bg-gradient-to-br from-yellow-400 to-amber-500"}[h]||"bg-gradient-to-br from-gray-400 to-gray-600"}),r=q(()=>{const h=t.node.tier;return{1:"glow-slate",2:"glow-blue",3:"glow-purple",4:"glow-orange",5:"glow-pink",6:"glow-gold"}[h]||"glow-slate"}),c=q(()=>{const h=t.node.tier;return{1:"bg-slate-500",2:"bg-blue-500",3:"bg-purple-500",4:"bg-orange-500",5:"bg-pink-500",6:"bg-amber-500"}[h]||"bg-gray-500"}),u=q(()=>{const h="text-2xl";switch(t.node.state){case"unlocked":return h;case"revealed":return`${h} animate-pulse`;case"hint":return`${h} filter blur-[2px] opacity-60`;default:return`${h} filter blur-[3px] grayscale opacity-30`}}),d=q(()=>{switch(t.node.state){case"unlocked":return"text-white font-semibold";case"revealed":return"text-amber-300 font-semibold";default:return"text-white/40"}}),p=q(()=>t.node.state==="revealed"?"#fbbf24":t.node.state==="hint"?"#64748b":"#374151"),g=q(()=>t.node.state==="locked"?"":t.node.icon),m=q(()=>t.node.state==="locked"||t.node.state==="hint"?"???":t.node.name);return(h,x)=>(b(),_("div",{class:le(["tech-node",n.value]),onClick:x[0]||(x[0]=T=>h.$emit("select",e.node))},[e.node.state==="unlocked"&&e.node.level>0?(b(),_("div",{key:0,class:le(["glow-ring",r.value])},null,2)):ae("",!0),e.node.state!=="unlocked"?(b(),_("svg",tf,[x[1]||(x[1]=o("circle",{cx:"40",cy:"40",r:"36",fill:"none",stroke:"rgba(255,255,255,0.1)","stroke-width":"3"},null,-1)),o("circle",{cx:"40",cy:"40",r:"36",fill:"none",stroke:p.value,"stroke-width":"3","stroke-linecap":"round","stroke-dasharray":s,"stroke-dashoffset":s*(1-e.node.progressToUnlock/100),class:"progress-stroke"},null,8,sf)])):ae("",!0),o("div",{class:le(["node-body",i.value])},[o("span",{class:le(["node-icon",u.value])},y(g.value),3)],2),e.node.state==="unlocked"&&e.node.level>0?(b(),_("div",{key:2,class:le(["level-badge",c.value])},y(e.node.level),3)):ae("",!0),o("div",nf,[o("span",{class:le(d.value)},y(m.value),3)]),e.node.state==="revealed"?(b(),_("div",of,"  ")):ae("",!0)],2))}},rf=He(lf,[["__scopeId","data-v-a26387c6"]]),af={class:"tech-tree-advanced min-h-screen"},cf={class:"fixed inset-0 -z-10"},uf={class:"sticky top-0 z-30 bg-black/85 backdrop-blur-xl border-b border-white/10 ios-safe-top"},df={class:"p-4 flex items-center gap-3"},ff={class:"bg-white/15 rounded-2xl px-4 py-2.5 flex items-center gap-2 border border-white/10"},pf={class:"absolute inset-0 w-full h-full pointer-events-none",style:{overflow:"visible"}},gf=["x1","y1","x2","y2","stroke","filter"],hf={key:0,class:"fixed bottom-0 left-0 right-0 z-50 bg-slate-900/95 backdrop-blur-xl rounded-t-3xl shadow-2xl border-t border-white/10 ios-safe-bottom",style:{padding:"20px 20px calc(env(safe-area-inset-bottom, 0px) + 20px) 20px"}},mf={class:"flex items-start gap-4"},vf={class:"flex-1"},bf={class:"text-xl font-bold text-white"},xf={class:"text-sm text-white/60 mt-1 leading-relaxed"},yf={class:"flex items-center gap-4 mt-3 text-sm flex-wrap"},_f={class:"text-yellow-300 font-medium"},wf={class:"text-green-400 font-medium"},kf={class:"text-purple-300 font-medium"},$f=["disabled"],Cf={key:1,class:"w-full mt-5 py-4 rounded-2xl bg-white/5 text-center text-white/50"},Sf={class:"mt-3 h-3 bg-white/10 rounded-full overflow-hidden mx-8"},Tf={class:"fixed bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black via-black/90 to-transparent z-30 ios-safe-bottom"},Pf={class:"flex gap-3 max-w-md mx-auto"},Mf={__name:"TechTreeViewAdvanced",emits:["navigate","buy"],setup(e,{emit:t}){const s=jt(),n=t,i=R=>{ze.play("click"),n("navigate",R)},l=E(null),r=E(.7),c=E(0),u=E(0),d=E(!1),p=E({x:0,y:0}),g=E(null),m=E({x:0,y:0}),h=q(()=>({x:200,y:100})),x=q(()=>({transform:`translate(${c.value}px, ${u.value}px) scale(${r.value})`,transformOrigin:"top left"})),T=q(()=>s.facilitiesWithState.map(S=>{const J=S.tier-1,X=s.facilitiesWithState.filter(me=>me.tier===S.tier),ce=X.findIndex(me=>me.id===S.id),fe=X.length,we=(ce-(fe-1)/2)*140;return{...S,x:150+we,y:80+J*180}})),I=R=>({position:"absolute",left:`${R.x+h.value.x}px`,top:`${R.y+h.value.y}px`,transform:"translate(-50%, -50%)"}),C=q(()=>{const R=[],G={};T.value.forEach(S=>{G[S.tier]||(G[S.tier]=[]),G[S.tier].push(S)});const N=Object.keys(G).map(Number).sort((S,J)=>S-J);for(let S=0;S<N.length-1;S++){const J=G[N[S]],X=G[N[S+1]];J.forEach(ce=>{X.forEach(fe=>{Math.abs(ce.x-fe.x)<200&&R.push({id:`${ce.id}-${fe.id}`,x1:ce.x,y1:ce.y,x2:fe.x,y2:fe.y,unlocked:ce.state==="unlocked"&&ce.level>0})})})}return R}),B=R=>{if(R.target.closest(".tech-node"))return;d.value=!0;const G=R.touches?R.touches[0]:R;p.value={x:G.clientX-c.value,y:G.clientY-u.value}},O=R=>{if(!d.value)return;const G=R.touches?R.touches[0]:R;c.value=G.clientX-p.value.x,u.value=G.clientY-p.value.y,m.value={x:c.value*.1,y:u.value*.1}},w=()=>{d.value=!1},F=R=>{const G=R.deltaY>0?-.1:.1;r.value=Math.max(.3,Math.min(1.5,r.value+G))},Z=()=>r.value=Math.min(1.5,r.value+.15),ie=()=>r.value=Math.max(.3,r.value-.15),K=()=>{r.value=.7,c.value=0,u.value=50},A=R=>{ze.play("click"),g.value=R},Y=()=>{g.value&&(n("buy",g.value.id),g.value=null)},z=R=>({1:"bg-slate-700",2:"bg-blue-700",3:"bg-purple-700",4:"bg-orange-700",5:"bg-pink-700",6:"bg-amber-600"})[R]||"bg-slate-700",k=R=>R>=1e9?(R/1e9).toFixed(2)+"B":R>=1e6?(R/1e6).toFixed(2)+"M":R>=1e3?(R/1e3).toFixed(1)+"K":Math.floor(R).toLocaleString();return qe(()=>{u.value=50}),(R,G)=>(b(),_("div",af,[o("div",cf,[re(Al,{progress:H(s).totalEarnedPoints,parallaxOffset:m.value},null,8,["progress","parallaxOffset"])]),o("div",uf,[o("div",df,[o("button",{onClick:G[0]||(G[0]=N=>i("main")),class:"w-12 h-12 rounded-2xl bg-white/15 flex items-center justify-center text-white active:bg-white/30 active:scale-95 transition-all text-lg"},"  "),G[5]||(G[5]=o("div",{class:"flex-1"},[o("h1",{class:"text-xl font-bold text-white"},""),o("p",{class:"text-xs text-white/60 mt-0.5"},"")],-1)),o("div",ff,[G[4]||(G[4]=o("span",{class:"text-xl"},"",-1)),re(po,{value:H(s).knowledgePoints,class:"text-xl font-bold text-yellow-300 tabular-nums"},null,8,["value"])])])]),o("div",{class:"tree-viewport",ref_key:"viewportRef",ref:l,onMousedown:B,onMousemove:O,onMouseup:w,onMouseleave:w,onTouchstartPassive:B,onTouchmovePassive:O,onTouchend:w,onWheel:Ye(F,["prevent"])},[o("div",{class:"tree-world",style:he(x.value)},[(b(),_("svg",pf,[G[6]||(G[6]=wa('<defs data-v-a8b5ff6e><linearGradient id="gradient-unlocked" x1="0%" y1="0%" x2="0%" y2="100%" data-v-a8b5ff6e><stop offset="0%" stop-color="#06b6d4" stop-opacity="0.8" data-v-a8b5ff6e></stop><stop offset="50%" stop-color="#8b5cf6" stop-opacity="1" data-v-a8b5ff6e></stop><stop offset="100%" stop-color="#ec4899" stop-opacity="0.8" data-v-a8b5ff6e></stop></linearGradient><linearGradient id="gradient-locked" x1="0%" y1="0%" x2="0%" y2="100%" data-v-a8b5ff6e><stop offset="0%" stop-color="#374151" stop-opacity="0.3" data-v-a8b5ff6e></stop><stop offset="100%" stop-color="#1f2937" stop-opacity="0.5" data-v-a8b5ff6e></stop></linearGradient><filter id="glow-filter" x="-50%" y="-50%" width="200%" height="200%" data-v-a8b5ff6e><feGaussianBlur in="SourceGraphic" stdDeviation="4" result="blur" data-v-a8b5ff6e></feGaussianBlur><feMerge data-v-a8b5ff6e><feMergeNode in="blur" data-v-a8b5ff6e></feMergeNode><feMergeNode in="SourceGraphic" data-v-a8b5ff6e></feMergeNode></feMerge></filter></defs>',1)),(b(!0),_(oe,null,pe(C.value,N=>(b(),_("g",{key:N.id},[o("line",{x1:N.x1+h.value.x,y1:N.y1+h.value.y,x2:N.x2+h.value.x,y2:N.y2+h.value.y,stroke:N.unlocked?"url(#gradient-unlocked)":"url(#gradient-locked)","stroke-width":"3",filter:N.unlocked?"url(#glow-filter)":"",class:le({"animate-flow":N.unlocked})},null,10,gf)]))),128))])),(b(!0),_(oe,null,pe(T.value,N=>(b(),ye(rf,{key:N.id,node:N,style:he(I(N)),onSelect:A,onBuy:S=>R.$emit("buy",N.id)},null,8,["node","style","onBuy"]))),128))],4)],544),o("div",{class:"fixed bottom-32 right-4 flex flex-col gap-3 z-40"},[o("button",{onClick:Z,class:"zoom-btn"},"+"),o("button",{onClick:ie,class:"zoom-btn"},""),o("button",{onClick:K,class:"zoom-btn text-base"},"")]),re(Kt,{name:"slide-up"},{default:$e(()=>[g.value?(b(),_("div",hf,[o("div",mf,[o("div",{class:le(["w-18 h-18 rounded-2xl flex items-center justify-center text-5xl",z(g.value.tier)]),style:{"min-width":"72px","min-height":"72px"}},y(g.value.icon),3),o("div",vf,[o("h3",bf,y(g.value.state==="unlocked"||g.value.state==="revealed"?g.value.name:"???"),1),o("p",xf,y(g.value.state==="unlocked"?g.value.description:""),1),o("div",yf,[o("span",_f," "+y(k(g.value.currentCost))+" KP",1),o("span",wf," +"+y(g.value.production.toFixed(1))+"/",1),o("span",kf,"Lv."+y(g.value.level),1)])]),o("button",{onClick:G[1]||(G[1]=N=>g.value=null),class:"w-10 h-10 flex items-center justify-center text-white/60 active:text-white bg-white/10 rounded-full"},"")]),g.value.state==="unlocked"?(b(),_("button",{key:0,onClick:Y,disabled:!g.value.canAfford,class:le(["w-full mt-5 py-4 rounded-2xl font-bold text-lg transition-all active:scale-95",g.value.canAfford?"bg-gradient-to-r from-cyan-500 via-purple-500 to-pink-500 text-white shadow-lg":"bg-white/10 text-white/40"])},y(g.value.level===0?" ":" "),11,$f)):(b(),_("div",Cf,[Vt("  "+y(k(g.value.unlockCondition))+" KP  ",1),o("div",Sf,[o("div",{class:"h-full bg-gradient-to-r from-amber-400 to-yellow-300",style:he({width:g.value.progressToUnlock+"%"})},null,4)])]))])):ae("",!0)]),_:1}),o("div",Tf,[o("div",Pf,[o("button",{onClick:G[2]||(G[2]=N=>i("main")),class:"flex-1 py-4 bg-white/15 backdrop-blur-xl rounded-2xl text-white font-bold flex items-center justify-center gap-2 border border-white/20 active:bg-white/30 active:scale-95 transition-all text-base"},[...G[7]||(G[7]=[o("span",{class:"text-xl"},"",-1),o("span",null,"",-1)])]),o("button",{onClick:G[3]||(G[3]=N=>i("list")),class:"flex-1 py-4 bg-white/15 backdrop-blur-xl rounded-2xl text-white font-bold flex items-center justify-center gap-2 border border-white/20 active:bg-white/30 active:scale-95 transition-all text-base"},[...G[8]||(G[8]=[o("span",{class:"text-xl"},"",-1),o("span",null,"",-1)])])])])]))}},jf=He(Mf,[["__scopeId","data-v-a8b5ff6e"]]),Af={class:"upgrade-panel min-h-screen pb-32"},If={class:"sticky top-0 z-30 bg-indigo-950/95 backdrop-blur-lg border-b border-purple-500/20 ios-safe-top"},Df={class:"p-4 flex items-center gap-3"},Ef={class:"bg-white/15 rounded-2xl px-4 py-2.5 flex items-center gap-2 border border-purple-500/30"},Of={class:"text-xl font-bold text-yellow-300 tabular-nums"},Ff={class:"px-4 py-3 bg-black/30"},Nf={class:"flex gap-3"},Lf={class:"flex-1 bg-white/10 rounded-xl p-3 text-center"},Uf={class:"text-xl font-bold text-cyan-300"},Rf={class:"flex-1 bg-white/10 rounded-xl p-3 text-center"},Bf={class:"text-xl font-bold text-purple-300"},Hf={class:"p-4 space-y-3"},Vf={key:0,class:"text-center py-12"},Kf={class:"flex items-start gap-4"},Wf={class:"text-4xl"},zf={class:"flex-1 min-w-0"},Gf={class:"font-bold text-white text-lg"},qf={class:"text-sm text-white/60 mt-1"},Xf={class:"mt-3 flex items-center gap-2"},Yf={class:"text-yellow-300 font-bold"},Jf=["onClick","disabled"],Qf={key:1,class:"mt-6"},Zf={class:"flex items-center gap-4"},ep={class:"text-3xl opacity-60"},tp={class:"flex-1"},sp={class:"font-bold text-white/60"},np={class:"text-xs text-white/40"},op={key:2,class:"mt-6"},ip={class:"flex items-center gap-4"},lp={class:"text-3xl grayscale opacity-30"},rp={class:"flex-1"},ap={class:"text-xs text-white/30"},cp={class:"fixed bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-indigo-950 via-indigo-950/95 to-transparent ios-safe-bottom"},up={class:"flex gap-3 max-w-md mx-auto"},dp={__name:"UpgradePanel",emits:["navigate"],setup(e,{emit:t}){const s=jt(),n=t,i=x=>{ze.play("click"),n("navigate",x)},l=q(()=>s.upgradesWithState.filter(x=>x.unlocked&&!x.purchased)),r=q(()=>s.upgradesWithState.filter(x=>x.purchased)),c=q(()=>s.upgradesWithState.filter(x=>!x.unlocked&&!x.purchased)),u=q(()=>s.upgradesWithState.filter(x=>x.unlocked)),d=q(()=>{var x;return((x=s.purchasedUpgrades)==null?void 0:x.length)||0}),p=q(()=>{var x;return((x=s.UPGRADES_MASTER)==null?void 0:x.length)||0}),g=x=>s.formatNumber(x),m=x=>{s.buyUpgrade(x)},h=x=>{var T,I;if((T=x.unlockCondition)!=null&&T.facility){const C=s.facilitiesWithState.find(B=>B.id===x.unlockCondition.facility);return`${(C==null?void 0:C.name)||"???"} Lv.${x.unlockCondition.level}`}return(I=x.unlockCondition)!=null&&I.totalKP?` ${g(x.unlockCondition.totalKP)} KP`:""};return(x,T)=>(b(),_("div",Af,[T[14]||(T[14]=o("div",{class:"fixed inset-0 -z-10"},[o("div",{class:"absolute inset-0 bg-gradient-to-b from-indigo-950 via-purple-950 to-slate-900"}),o("div",{class:"star-layer"})],-1)),o("div",If,[o("div",Df,[o("button",{onClick:T[0]||(T[0]=I=>i("main")),class:"w-12 h-12 rounded-2xl bg-white/15 flex items-center justify-center text-white active:bg-white/30 active:scale-95 transition-all text-lg"},"  "),T[4]||(T[4]=o("div",{class:"flex-1"},[o("h1",{class:"text-xl font-bold text-white"}," "),o("p",{class:"text-xs text-purple-300 mt-0.5"},"")],-1)),o("div",Ef,[T[3]||(T[3]=o("span",{class:"text-xl"},"",-1)),o("span",Of,y(g(H(s).knowledgePoints)),1)])])]),o("div",Ff,[o("div",Nf,[o("div",Lf,[T[5]||(T[5]=o("p",{class:"text-[10px] text-white/50 uppercase"},"",-1)),o("p",Uf,""+y(H(s).totalMultiplier.toFixed(2)),1)]),o("div",Rf,[T[6]||(T[6]=o("p",{class:"text-[10px] text-white/50 uppercase"},"",-1)),o("p",Bf,y(d.value)+"/"+y(p.value),1)])])]),o("div",Hf,[l.value.length===0&&u.value.length===0?(b(),_("div",Vf,[...T[7]||(T[7]=[o("div",{class:"text-6xl mb-4"},"",-1),o("p",{class:"text-white/60"},"",-1)])])):ae("",!0),(b(!0),_(oe,null,pe(l.value,I=>(b(),_("div",{key:I.id,class:"upgrade-card available"},[o("div",Kf,[o("div",Wf,y(I.icon),1),o("div",zf,[o("h3",Gf,y(I.name),1),o("p",qf,y(I.description),1),o("div",Xf,[o("span",Yf," "+y(g(I.cost)),1)])]),o("button",{onClick:C=>m(I.id),disabled:!I.canAfford,class:le(["buy-button",{"can-afford":I.canAfford}])},y(I.canAfford?"":""),11,Jf)])]))),128)),r.value.length>0?(b(),_("div",Qf,[T[9]||(T[9]=o("h2",{class:"text-sm text-white/50 uppercase tracking-wider mb-3"}," ",-1)),(b(!0),_(oe,null,pe(r.value,I=>(b(),_("div",{key:I.id,class:"upgrade-card purchased"},[o("div",Zf,[o("div",ep,y(I.icon),1),o("div",tp,[o("h3",sp,y(I.name),1),o("p",np,y(I.description),1)]),T[8]||(T[8]=o("div",{class:"text-green-400 text-2xl"},"",-1))])]))),128))])):ae("",!0),c.value.length>0?(b(),_("div",op,[T[11]||(T[11]=o("h2",{class:"text-sm text-white/50 uppercase tracking-wider mb-3"}," ",-1)),(b(!0),_(oe,null,pe(c.value,I=>(b(),_("div",{key:I.id,class:"upgrade-card locked"},[o("div",ip,[o("div",lp,y(I.icon),1),o("div",rp,[T[10]||(T[10]=o("h3",{class:"font-bold text-white/40"},"???",-1)),o("p",ap,y(h(I)),1)])])]))),128))])):ae("",!0)]),o("div",cp,[o("div",up,[o("button",{onClick:T[1]||(T[1]=I=>x.$emit("navigate","main")),class:"flex-1 py-4 bg-white/15 backdrop-blur-xl rounded-2xl text-white font-bold flex items-center justify-center gap-2 border border-white/20 active:bg-white/30 active:scale-95 transition-all"},[...T[12]||(T[12]=[o("span",{class:"text-xl"},"",-1),o("span",null,"",-1)])]),o("button",{onClick:T[2]||(T[2]=I=>x.$emit("navigate","prestige")),class:"flex-1 py-4 bg-gradient-to-r from-amber-500 to-orange-500 rounded-2xl text-black font-bold flex items-center justify-center gap-2 active:scale-95 transition-all"},[...T[13]||(T[13]=[o("span",{class:"text-xl"},"",-1),o("span",null,"",-1)])])])])]))}},fp=He(dp,[["__scopeId","data-v-8e27f725"]]),pp={class:"prestige-view min-h-screen pb-32 relative overflow-hidden"},gp={class:"sticky top-0 z-30 bg-amber-950/95 backdrop-blur-lg border-b border-amber-500/20 ios-safe-top"},hp={class:"p-4 flex items-center gap-3"},mp={class:"p-4"},vp={class:"bg-black/30 rounded-3xl p-6 mb-6 border border-amber-500/20"},bp={class:"text-center mb-6"},xp={class:"text-2xl font-bold text-white"},yp={class:"text-amber-300 mt-2"},_p={class:"grid grid-cols-2 gap-4 text-center"},wp={class:"bg-white/10 rounded-2xl p-4"},kp={class:"text-xl font-bold text-yellow-300"},$p={class:"bg-white/10 rounded-2xl p-4"},Cp={class:"text-xl font-bold text-amber-300"},Sp={class:"bg-gradient-to-br from-amber-900/50 to-orange-900/50 rounded-3xl p-6 mb-6 border border-amber-400/30"},Tp={class:"text-center"},Pp={key:0,class:"space-y-4"},Mp={class:"bg-black/30 rounded-2xl p-4"},jp={class:"text-4xl font-bold text-amber-400 animate-pulse"},Ap={class:"bg-black/30 rounded-2xl p-4"},Ip={class:"text-2xl font-bold text-cyan-300"},Dp={class:"text-xs text-green-400 mt-1"},Ep={class:"bg-red-900/30 rounded-2xl p-4 border border-red-500/30"},Op={class:"text-xs text-white/60 mt-2 space-y-1 text-left pl-4"},Fp={key:1,class:"space-y-4"},Np={class:"bg-black/30 rounded-2xl p-6"},Lp={class:"relative h-4 bg-white/10 rounded-full overflow-hidden"},Up={class:"text-xs text-white/40 mt-2"},Rp={class:"bg-black/30 rounded-3xl p-6 border border-white/10"},Bp={class:"grid grid-cols-4 gap-3"},Hp=["title"],Vp={class:"text-2xl"},Kp={class:"text-xs text-white/40 text-center mt-4"},Wp={class:"fixed bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-amber-950 via-amber-950/95 to-transparent ios-safe-bottom"},zp={class:"max-w-md mx-auto space-y-3"},Gp={key:1,disabled:"",class:"w-full py-5 bg-white/10 text-white/40 font-bold rounded-2xl text-lg"},qp={class:"bg-gradient-to-br from-amber-900 to-orange-900 rounded-3xl p-6 max-w-sm w-full border border-amber-400/50 shadow-2xl"},Xp={class:"text-center"},Yp={class:"text-amber-200 text-sm mb-6"},Jp={class:"text-amber-400 font-bold"},Qp={class:"flex gap-3"},Zp={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/90"},eg={class:"absolute inset-0 pointer-events-none overflow-hidden"},tg={__name:"PrestigeView",emits:["navigate"],setup(e,{emit:t}){const s=jt(),n=t,i=I=>{ze.play("click"),n("navigate",I)},l=E(!1),r=E(!1),c=q(()=>s.potentialPrestigePoints>0),u=q(()=>Math.min(100,s.totalEarnedPoints/1e9*100)),d=q(()=>{const I=s.prestigePoints+s.potentialPrestigePoints;return 1+Math.log10(I+1)*.5}),p=I=>s.formatNumber(I),g=q(()=>(s.ACHIEVEMENTS_MASTER||[]).slice(0,8).map(C=>{var B;return{...C,unlocked:(B=s.unlockedAchievements)==null?void 0:B.includes(C.id)}})),m=q(()=>{var I;return((I=s.unlockedAchievements)==null?void 0:I.length)||0}),h=q(()=>{var I;return((I=s.ACHIEVEMENTS_MASTER)==null?void 0:I.length)||0}),x=()=>{l.value=!1,r.value=!0,setTimeout(()=>{s.prestige(),setTimeout(()=>{r.value=!1,n("navigate","main")},2e3)},500)},T=I=>{const C=I/30*360,B=100+Math.random()*200,O=4+Math.random()*8,w=Math.random()*.5,F=1+Math.random()*1;return{"--angle":C+"deg","--distance":B+"px",width:O+"px",height:O+"px",animationDelay:w+"s",animationDuration:F+"s"}};return(I,C)=>(b(),_("div",pp,[C[25]||(C[25]=o("div",{class:"fixed inset-0 -z-10"},[o("div",{class:"absolute inset-0 bg-gradient-to-b from-amber-950 via-orange-950 to-slate-900"}),o("div",{class:"star-layer"}),o("div",{class:"absolute top-1/3 left-1/2 -translate-x-1/2 w-96 h-96 bg-amber-500/20 rounded-full blur-3xl animate-pulse"})],-1)),o("div",gp,[o("div",hp,[o("button",{onClick:C[0]||(C[0]=B=>i("main")),class:"w-12 h-12 rounded-2xl bg-white/15 flex items-center justify-center text-white active:bg-white/30 active:scale-95 transition-all text-lg"},"  "),C[5]||(C[5]=o("div",{class:"flex-1"},[o("h1",{class:"text-xl font-bold text-white"}," "),o("p",{class:"text-xs text-amber-300 mt-0.5"},"")],-1))])]),o("div",mp,[o("div",vp,[o("div",bp,[C[6]||(C[6]=o("div",{class:"text-6xl mb-4"},"",-1)),o("h2",xp," "+y(H(s).prestigeLevel),1),o("p",yp,": "+y(H(s).prestigeMultiplier.toFixed(2)),1)]),o("div",_p,[o("div",wp,[C[7]||(C[7]=o("p",{class:"text-xs text-white/50 mb-1"},"KP",-1)),o("p",kp,y(p(H(s).totalEarnedPoints)),1)]),o("div",$p,[C[8]||(C[8]=o("p",{class:"text-xs text-white/50 mb-1"},"",-1)),o("p",Cp,y(H(s).prestigePoints),1)])])]),o("div",Sp,[o("div",Tp,[C[16]||(C[16]=o("h3",{class:"text-lg font-bold text-white mb-4"},"...",-1)),c.value?(b(),_("div",Pp,[o("div",Mp,[C[9]||(C[9]=o("p",{class:"text-amber-200 text-sm mb-2"},"",-1)),o("p",jp," +"+y(H(s).potentialPrestigePoints),1)]),o("div",Ap,[C[10]||(C[10]=o("p",{class:"text-amber-200 text-sm mb-2"},"",-1)),o("p",Ip," "+y(d.value.toFixed(2)),1),o("p",Dp," (+"+y((d.value-H(s).prestigeMultiplier).toFixed(2))+") ",1)]),o("div",Ep,[C[13]||(C[13]=o("p",{class:"text-red-300 text-sm"}," ",-1)),o("ul",Op,[o("li",null," KP"+y(p(H(s).knowledgePoints))+"",1),C[11]||(C[11]=o("li",null," ",-1)),C[12]||(C[12]=o("li",null," ",-1))])]),C[14]||(C[14]=o("div",{class:"bg-green-900/30 rounded-2xl p-4 border border-green-500/30"},[o("p",{class:"text-green-300 text-sm"}," "),o("ul",{class:"text-xs text-white/60 mt-2 space-y-1 text-left pl-4"},[o("li",null," "),o("li",null," "),o("li",null," KP")])],-1))])):(b(),_("div",Fp,[o("div",Np,[C[15]||(C[15]=o("p",{class:"text-white/60 text-sm mb-4"},"10KP",-1)),o("div",Lp,[o("div",{class:"h-full bg-gradient-to-r from-amber-500 to-orange-500 transition-all duration-500",style:he({width:u.value+"%"})},null,4)]),o("p",Up,y(p(H(s).totalEarnedPoints))+" / 1B ("+y(u.value.toFixed(1))+"%) ",1)])]))])]),o("div",Rp,[C[17]||(C[17]=o("h3",{class:"text-lg font-bold text-white mb-4"}," ",-1)),o("div",Bp,[(b(!0),_(oe,null,pe(g.value,B=>(b(),_("div",{key:B.id,class:le(["achievement-badge",{unlocked:B.unlocked}]),title:B.name},[o("span",Vp,y(B.icon),1)],10,Hp))),128))]),o("p",Kp,y(m.value)+"/"+y(h.value)+"  ",1)])]),o("div",Wp,[o("div",zp,[c.value?(b(),_("button",{key:0,onClick:C[1]||(C[1]=B=>{l.value=!0,H(ze).play("click")}),class:"w-full py-5 bg-gradient-to-r from-amber-400 via-yellow-400 to-amber-400 text-black font-bold rounded-2xl text-xl shadow-2xl active:scale-95 transition-all animate-shimmer"},"   (+"+y(H(s).potentialPrestigePoints)+" pts) ",1)):(b(),_("button",Gp,"   ")),o("button",{onClick:C[2]||(C[2]=B=>i("main")),class:"w-full py-4 bg-white/15 backdrop-blur-xl rounded-2xl text-white font-bold flex items-center justify-center gap-2 border border-white/20 active:bg-white/30 active:scale-95 transition-all"},[...C[18]||(C[18]=[o("span",{class:"text-xl"},"",-1),o("span",null,"",-1)])])])]),re(Kt,{name:"fade"},{default:$e(()=>[l.value?(b(),_("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-md p-6",onClick:C[4]||(C[4]=Ye(B=>l.value=!1,["self"]))},[o("div",qp,[o("div",Xp,[C[22]||(C[22]=o("div",{class:"text-6xl mb-4"},"",-1)),C[23]||(C[23]=o("h2",{class:"text-2xl font-bold text-white mb-2"},"",-1)),o("p",Yp,[C[19]||(C[19]=Vt(" ",-1)),C[20]||(C[20]=o("br",null,null,-1)),o("span",Jp,"+"+y(H(s).potentialPrestigePoints)+" ",1),C[21]||(C[21]=Vt(" ",-1))]),o("div",Qp,[o("button",{onClick:C[3]||(C[3]=B=>l.value=!1),class:"flex-1 py-4 bg-white/20 rounded-2xl text-white font-bold active:bg-white/30 transition-all"},"  "),o("button",{onClick:x,class:"flex-1 py-4 bg-gradient-to-r from-amber-400 to-orange-400 rounded-2xl text-black font-bold active:scale-95 transition-all"},"  ")])])])])):ae("",!0)]),_:1}),re(Kt,{name:"celebrate"},{default:$e(()=>[r.value?(b(),_("div",Zp,[C[24]||(C[24]=o("div",{class:"text-center"},[o("div",{class:"text-8xl mb-6 animate-bounce"},""),o("h2",{class:"text-4xl font-bold text-amber-400 mb-4"},""),o("p",{class:"text-xl text-white"},"...")],-1)),o("div",eg,[(b(),_(oe,null,pe(30,B=>o("div",{key:B,class:"prestige-particle",style:he(T(B))},null,4)),64))])])):ae("",!0)]),_:1})]))}},sg=He(tg,[["__scopeId","data-v-684a081c"]]),ng={class:"game-container"},og={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-md p-4"},ig={class:"absolute inset-0 pointer-events-none overflow-hidden"},lg={class:"bg-gradient-to-br from-indigo-900 via-purple-900 to-indigo-950 rounded-3xl p-6 max-w-sm w-full border border-purple-400/50 shadow-2xl text-center relative overflow-hidden"},rg={class:"relative z-10"},ag={class:"bg-black/40 rounded-2xl p-4 mb-4 space-y-3"},cg={class:"flex justify-between items-center text-sm"},ug={class:"text-cyan-300 font-bold"},dg={class:"flex justify-between items-center text-sm"},fg={class:"text-green-300 font-bold"},pg={class:"bg-gradient-to-br from-yellow-500/20 to-amber-500/20 rounded-2xl p-5 mb-5 border border-yellow-400/30"},gg={class:"flex items-center justify-center gap-2"},hg={class:"text-5xl font-black text-transparent bg-clip-text bg-gradient-to-r from-yellow-300 via-amber-400 to-yellow-300 animate-pulse"},mg={class:"text-xs text-yellow-200/60 mt-2"},vg={__name:"GameView",setup(e){const t=jt(),s=E("main"),n=E(!1),i=E(0),l=g=>{s.value=g},r=g=>{t.buyFacility(g)},c=q(()=>t.formatNumber(t.pendingOfflineReward)),u=q(()=>{const g=i.value;if(g<60)return`${g}`;if(g<3600)return`${Math.floor(g/60)}`;const m=Math.floor(g/3600),h=Math.floor(g%3600/60);return m<24?`${m}${h}`:`${Math.floor(m/24)}${m%24}`}),d=g=>({"--delay":`${Math.random()*3}s`,"--x":`${Math.random()*100}%`,"--size":`${4+Math.random()*8}px`,left:`${Math.random()*100}%`,animationDelay:`${Math.random()*2}s`}),p=()=>{t.claimOfflineReward(),n.value=!1};return qe(async()=>{if(await t.initialize(),t.pendingOfflineReward>0){const g=Date.now(),m=t.lastActiveTime||g;i.value=Math.floor((g-m)/1e3),n.value=!0}}),(g,m)=>(b(),_("div",ng,[re(Kt,{name:"fade-slide",mode:"out-in"},{default:$e(()=>[s.value==="main"?(b(),ye(Bd,{key:"main",onNavigate:l})):s.value==="list"?(b(),ye(ef,{key:"list",onNavigate:l})):s.value==="tree"?(b(),ye(jf,{key:"tree",onNavigate:l,onBuy:r})):s.value==="upgrade"?(b(),ye(fp,{key:"upgrade",onNavigate:l})):s.value==="prestige"?(b(),ye(sg,{key:"prestige",onNavigate:l})):ae("",!0)]),_:1}),re(Kt,{name:"fade"},{default:$e(()=>[n.value?(b(),_("div",og,[o("div",ig,[(b(),_(oe,null,pe(15,h=>o("div",{key:"p"+h,class:"offline-particle",style:he(d(h))},null,4)),64))]),o("div",lg,[m[9]||(m[9]=o("div",{class:"absolute inset-0 flex items-center justify-center pointer-events-none"},[o("div",{class:"w-64 h-64 rounded-full bg-gradient-radial from-yellow-400/20 via-amber-500/10 to-transparent animate-pulse"})],-1)),o("div",rg,[m[6]||(m[6]=o("div",{class:"text-7xl mb-3 animate-bounce"},"",-1)),m[7]||(m[7]=o("h2",{class:"text-2xl font-bold text-white mb-1"},"",-1)),m[8]||(m[8]=o("p",{class:"text-purple-200 text-sm mb-4"},"  ",-1)),o("div",ag,[o("div",cg,[m[0]||(m[0]=o("span",{class:"text-white/60"}," ",-1)),o("span",ug,y(u.value),1)]),o("div",dg,[m[1]||(m[1]=o("span",{class:"text-white/60"}," ",-1)),o("span",fg,y(H(t).formatNumber(H(t).currentProduction))+"/",1)]),m[2]||(m[2]=o("div",{class:"flex justify-between items-center text-sm"},[o("span",{class:"text-white/60"}," "),o("span",{class:"text-amber-300 font-bold"},"50%")],-1))]),o("div",pg,[m[4]||(m[4]=o("p",{class:"text-xs text-white/50 mb-1 uppercase tracking-wider"},"Knowledge Points",-1)),o("div",gg,[m[3]||(m[3]=o("span",{class:"text-4xl"},"",-1)),o("p",hg," +"+y(c.value),1)]),o("p",mg,": "+y(H(t).formatNumber(H(t).knowledgePoints))+" KP",1)]),o("button",{onClick:p,class:"w-full py-4 bg-gradient-to-r from-yellow-400 via-amber-400 to-yellow-400 text-black font-bold rounded-2xl text-lg active:scale-95 transition-all shadow-lg hover:shadow-yellow-400/50 relative overflow-hidden group"},[...m[5]||(m[5]=[o("span",{class:"relative z-10"}," ",-1),o("div",{class:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-500"},null,-1)])])])])])):ae("",!0)]),_:1})]))}},bg=He(vg,[["__scopeId","data-v-9774ea54"]]),xg={class:"flex items-center gap-6"},yg={class:"relative w-32 h-32 flex-shrink-0"},_g={class:"absolute inset-4 bg-white rounded-full flex items-center justify-center shadow-inner"},wg={class:"text-xs font-bold text-gray-500"},kg={class:"flex-1 space-y-2"},$g={class:"flex items-center gap-2"},Cg={class:"text-gray-700 font-medium"},Sg={class:"text-right"},Tg={class:"font-bold text-gray-800"},Pg={class:"text-xs text-gray-400 ml-1"},Dn={__name:"SubjectChart",props:{data:{type:Array,required:!0}},setup(e){const t=e,s=q(()=>[...t.data].sort((l,r)=>r.minutes-l.minutes)),n=q(()=>t.data.reduce((l,r)=>l+r.minutes,0)),i=q(()=>{if(t.data.length===0)return"#e5e7eb";let l=0;return`conic-gradient(${s.value.map(c=>{const u=l,d=l+c.percent;return l=d,`${c.color} ${u}% ${d}%`}).join(", ")})`});return(l,r)=>(b(),_("div",xg,[o("div",yg,[o("div",{class:"w-full h-full rounded-full",style:he({background:i.value})},null,4),o("div",_g,[o("span",wg,[r[0]||(r[0]=Vt("TOTAL",-1)),r[1]||(r[1]=o("br",null,null,-1)),Vt(y(n.value)+"",1)])])]),o("div",kg,[(b(!0),_(oe,null,pe(s.value,(c,u)=>(b(),_("div",{key:u,class:"flex items-center justify-between text-sm"},[o("div",$g,[o("div",{class:"w-3 h-3 rounded-full",style:he({backgroundColor:c.color})},null,4),o("span",Cg,y(c.subject),1)]),o("div",Sg,[o("span",Tg,y(c.minutes)+"",1),o("span",Pg,"("+y(Math.round(c.percent))+"%)",1)])]))),128))])]))}},Mg={class:"space-y-4 mt-8 pb-8"},jg={class:"flex justify-between items-center"},Ag={class:"flex gap-2 bg-black/20 p-1 rounded-xl"},Ig=["onClick"],Dg={key:0},Eg={class:"flex justify-between items-center mb-4"},Og={class:"font-bold text-gray-700"},Fg=["disabled"],Ng={class:"h-48 flex items-end gap-2 pt-6"},Lg={class:"w-full relative"},Ug={key:0,class:"absolute -top-5 left-1/2 -translate-x-1/2 text-xs font-bold text-indigo-600 whitespace-nowrap"},Rg={class:"mt-4 pt-4 border-t border-gray-200 flex justify-around text-center"},Bg={class:"text-2xl font-bold text-indigo-600"},Hg={class:"text-2xl font-bold text-green-600"},Vg={key:1},Kg={class:"flex justify-between items-center mb-4"},Wg={class:"font-bold text-gray-700"},zg=["disabled"],Gg={class:"h-52 flex items-end gap-3 pt-6"},qg={class:"w-full relative flex flex-col-reverse"},Xg={key:0,class:"absolute -top-5 left-1/2 -translate-x-1/2 text-xs font-bold text-gray-700 whitespace-nowrap"},Yg={class:"text-xs mt-2 text-gray-500"},Jg={class:"mt-4 pt-4 border-t border-gray-200"},Qg={class:"flex flex-wrap gap-3 justify-center"},Zg={class:"text-xs text-gray-600"},eh={class:"text-center mt-3"},th={class:"text-2xl font-bold text-indigo-600"},sh={class:"text-xs text-gray-500"},nh={key:0,class:"text-center text-gray-500 py-4"},oh={key:0,class:"text-center text-gray-500 py-4"},ih={key:0,class:"text-center text-gray-500 py-4"},lh={class:"space-y-2 max-h-64 overflow-y-auto"},rh={class:"flex items-center gap-3"},ah={class:"font-medium text-gray-800"},ch={class:"text-xs text-gray-500"},uh={class:"font-bold text-indigo-600"},dh={key:0,class:"text-center py-4"},fh={key:1,class:"text-center text-gray-500 py-4"},ph={key:2,class:"space-y-2 max-h-72 overflow-y-auto"},gh={class:"text-2xl flex-shrink-0"},hh={class:"flex-1 min-w-0"},mh={class:"flex items-center gap-2"},vh={class:"font-bold text-indigo-600 truncate"},bh={class:"text-sm text-gray-600 truncate"},xh={class:"text-xs text-gray-400"},yh={key:0,class:"text-center py-4"},_h={key:1,class:"text-center text-gray-500 py-4"},wh={key:2,class:"space-y-2"},kh={class:"flex-1 min-w-0"},$h={class:"font-bold text-gray-800 truncate"},Ch={key:0,class:"text-xs text-indigo-500"},Sh={class:"text-xs text-gray-500"},Th={class:"text-right"},Ph={key:0,class:"text-center py-4"},Mh={key:1,class:"text-center text-gray-500 py-4"},jh={key:2,class:"overflow-x-auto pb-2 -mx-4 px-4"},Ah={class:"flex gap-3",style:{width:"max-content"}},Ih={class:"flex justify-between items-start mb-2"},Dh={class:"text-sm font-bold text-indigo-600 truncate flex-1"},Eh={class:"font-bold text-gray-800 text-sm mb-1 line-clamp-2"},Oh={key:0,class:"text-xs text-gray-500 line-clamp-2 mb-2"},Fh={class:"flex items-center gap-1 text-xs text-gray-400"},Nh={key:1,class:"mt-3 flex gap-2"},Lh=["onClick"],Uh=["onClick"],Rh={__name:"DataView",emits:["admin"],setup(e,{emit:t}){const s=Je(),n=t,i=[{key:"weekly",label:"",icon:""},{key:"monthly",label:"",icon:""}],l=E("weekly"),r=E([]),c=E([]),u=E([]),d=E([]),p=E([]),g=E([]),m=E([]),h=E(!0),x=E(!0),T=E(!0),I=E(!0),C=E(0),B=E(0),O={:"#FF6B6B",:"#4D96FF",:"#FFD93D",:"#6BCB77",:"#9D4EDD",:"#95A5A6",:"#7C3AED"},w=q(()=>Object.entries(O).map(([$,a])=>({name:$,color:a}))),F=$=>O[$]||O.,Z=q(()=>{const $=new Date,a=new Date($),f=$.getDay()||7;a.setDate($.getDate()-f+1);const v=a.toISOString().split("T")[0],M={};p.value.forEach(P=>{if(P.date>=v){const L=P.subject||"";M[L]=(M[L]||0)+(P.minutes||0)}});const j=Object.values(M).reduce((P,L)=>P+L,0);return Object.entries(M).map(([P,L])=>({subject:P,minutes:L,color:F(P),percent:j>0?L/j*100:0})).sort((P,L)=>L.minutes-P.minutes)}),ie=q(()=>{const $=new Date,f=new Date($.getFullYear(),$.getMonth(),1).toISOString().split("T")[0],v={};p.value.forEach(j=>{if(j.date>=f){const P=j.subject||"";v[P]=(v[P]||0)+(j.minutes||0)}});const M=Object.values(v).reduce((j,P)=>j+P,0);return Object.entries(v).map(([j,P])=>({subject:j,minutes:P,color:F(j),percent:M>0?P/M*100:0})).sort((j,P)=>P.minutes-j.minutes)}),K=$=>{if(!$)return"";try{const a=$.split(" "),f=a[0]||"",v=a[1]||"";if(f){const M=new Date,j=new Date(f),P=Math.floor((M-j)/(1e3*60*60*24));return P===0?v?` ${v.substring(0,5)}`:"":P===1?v?` ${v.substring(0,5)}`:"":P<7?`${P}`:f.substring(5)}return $}catch{return $}},A=q(()=>{const $=new Date,a=new Date($),f=$.getDay()||7;a.setDate($.getDate()-f+1-C.value*7);const v=new Date(a);v.setDate(a.getDate()+6);const M=P=>`${P.getMonth()+1}/${P.getDate()}`,j=`${M(a)} - ${M(v)}`;return C.value===0?` (${j})`:C.value===1?` (${j})`:j}),Y=q(()=>{const $=new Date,a=["","","","","","",""],f=[],v=new Date($),M=$.getDay()||7;v.setDate($.getDate()-M+1-C.value*7);for(let j=0;j<7;j++){const P=new Date(v);P.setDate(v.getDate()+j);const L=P.toISOString().split("T")[0],W=r.value.filter(U=>U.date===L).reduce((U,ee)=>U+(ee.minutes||0),0),V=P.toDateString()===$.toDateString();f.push({day:a[j],date:L,minutes:W,isToday:V})}return f}),z=q(()=>Y.value.reduce(($,a)=>$+a.minutes,0)),k=q(()=>Math.round(z.value/7)),R=q(()=>{const $=new Date,a=new Date($.getFullYear(),$.getMonth()-B.value,1),f=new Date(a.getFullYear(),a.getMonth()+1,0),v=`${a.getFullYear()}${a.getMonth()+1}`,M=`${a.getMonth()+1}/1 - ${a.getMonth()+1}/${f.getDate()}`;return B.value===0?` (${M})`:B.value===1?` (${M})`:`${v} (${M})`}),G=q(()=>{const $=new Date,a=$.getMonth()-B.value,f=$.getFullYear()+Math.floor(a/12),v=(a%12+12)%12,M=new Date(f,v,1),j=new Date(f,v+1,0),P=[];let L=new Date(M);const W=L.getDay()||7;W!==1&&L.setDate(L.getDate()-W+1);let V=1;for(;L<=j||P.length<4;){const U=new Date(L);U.setDate(L.getDate()+6);const ee={};for(let se=new Date(L);se<=U;se.setDate(se.getDate()+1)){const de=se.toISOString().split("T")[0];r.value.filter(ge=>ge.date===de).forEach(ge=>{const Ie=ge.subject||"";ee[Ie]=(ee[Ie]||0)+(ge.minutes||0)})}const Q=Object.entries(ee).map(([se,de])=>({subject:se,minutes:de,color:F(se)})),te=Q.reduce((se,de)=>se+de.minutes,0);if(P.push({label:`W${V}`,start:new Date(L),end:new Date(U),segments:Q.length>0?Q:[{subject:"",minutes:0,color:"#E5E7EB"}],total:te}),L=new Date(L),L.setDate(L.getDate()+7),V++,P.length>=5)break}return P}),N=q(()=>G.value.reduce(($,a)=>$+a.total,0)),S=q(()=>Math.max(...Y.value.map($=>$.minutes),60)),J=$=>Math.max(4,$/S.value*120),X=$=>$===0?"bg-gray-200":$>=60?"bg-gradient-to-t from-indigo-600 to-purple-500":$>=30?"bg-gradient-to-t from-indigo-500 to-indigo-400":"bg-gradient-to-t from-indigo-400 to-indigo-300",ce=q(()=>Math.max(...G.value.map($=>$.total),60)),fe=($,a)=>{if(a===0)return 4;const v=a/ce.value*140;return Math.max(0,$/a*v)},we=async()=>{if(s.currentUserId)try{const a=await(await fetch(`/api/user/${s.currentUserId}/stats`)).json();a.weekly&&(r.value=a.weekly.map(f=>({date:f.date,minutes:f.minutes,day:f.day,subject:f.subject||""}))),c.value=a.subject||[],u.value=a.recent||[],a.all_records&&a.all_records.length>0?p.value=a.all_records.map(f=>({date:f.date,subject:f.subject,minutes:f.minutes})):a.recent&&(p.value=a.recent.map(f=>({date:f.date,subject:f.subject,minutes:f.minutes})))}catch($){console.error("Failed to fetch stats:",$)}finally{h.value=!1}},me=async()=>{x.value=!0;try{const a=await(await fetch("/api/activity/recent")).json();a.status==="ok"&&(d.value=a.data||[])}catch($){console.error("Failed to fetch global activity:",$)}finally{x.value=!1}},Ae=async()=>{T.value=!0;try{const a=await(await fetch("/api/ranking/weekly")).json();a.status==="ok"&&(g.value=a.data||[])}catch($){console.error("Failed to fetch weekly ranking:",$)}finally{T.value=!1}},be=async()=>{I.value=!0;try{const a=await(await fetch("/api/goals")).json();a.status==="ok"&&(m.value=a.goals||[])}catch($){console.error("Failed to fetch goals:",$)}finally{I.value=!1}},is=$=>{if(!$)return"";const a=new Date($);return`${a.getMonth()+1}/${a.getDate()}`},Ve=$=>{if(!$)return-999;const a=new Date($),f=new Date;return f.setHours(0,0,0,0),a.setHours(0,0,0,0),Math.ceil((a-f)/(1e3*60*60*24))},ut=$=>{const a=Ve($);return a<0?"":a===0?"!":a===1?"":`${a}`},At=$=>{const a=Ve($);return a<0?"bg-red-100 text-red-600":a<=3?"bg-orange-100 text-orange-600":a<=7?"bg-yellow-100 text-yellow-600":"bg-green-100 text-green-600"},Gt=async $=>{if(confirm(""))try{(await(await fetch(`/api/goals/${$}/complete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:s.currentUserId})})).json()).status==="ok"?await be():alert("")}catch(a){console.error("Complete goal error:",a),alert("")}},D=async $=>{if(confirm(""))try{(await(await fetch(`/api/goals/${$}?user_id=${s.currentUserId}`,{method:"DELETE"})).json()).status==="ok"?await be():alert("")}catch(a){console.error("Delete goal error:",a),alert("")}};return qe(()=>{we(),me(),Ae(),be()}),($,a)=>(b(),_("div",Mg,[o("div",jg,[a[5]||(a[5]=o("h2",{class:"text-xl font-bold text-white"}," ",-1)),H(s).isAdmin?(b(),_("button",{key:0,onClick:a[0]||(a[0]=f=>n("admin")),class:"text-white/70 hover:text-white text-sm underline"},"  ")):ae("",!0)]),o("div",Ag,[(b(),_(oe,null,pe(i,f=>o("button",{key:f.key,onClick:v=>l.value=f.key,class:le(["flex-1 py-2 px-3 rounded-lg text-sm font-medium transition-all",l.value===f.key?"bg-white text-indigo-600 shadow-sm":"text-white/70 hover:text-white"])},y(f.icon)+" "+y(f.label),11,Ig)),64))]),l.value==="weekly"?(b(),_("div",Dg,[re(Me,null,{default:$e(()=>[o("div",Eg,[o("button",{onClick:a[1]||(a[1]=f=>C.value++),class:"p-2 rounded-lg bg-indigo-100 text-indigo-600 hover:bg-indigo-200 active:scale-95 transition-all"},[...a[6]||(a[6]=[o("span",{class:"text-lg"},"",-1)])]),o("h3",Og,y(A.value),1),o("button",{onClick:a[2]||(a[2]=f=>C.value=Math.max(0,C.value-1)),disabled:C.value===0,class:le(["p-2 rounded-lg transition-all",C.value===0?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-indigo-100 text-indigo-600 hover:bg-indigo-200 active:scale-95"])},[...a[7]||(a[7]=[o("span",{class:"text-lg"},"",-1)])],10,Fg)]),o("div",Ng,[(b(!0),_(oe,null,pe(Y.value,(f,v)=>(b(),_("div",{key:v,class:"flex-1 flex flex-col items-center min-w-0"},[o("div",Lg,[o("div",{class:le(["w-full rounded-t-lg transition-all duration-500 ease-out",X(f.minutes)]),style:he({height:J(f.minutes)+"px",minHeight:f.minutes>0?"8px":"4px"})},[f.minutes>0?(b(),_("span",Ug,y(f.minutes)+" ",1)):ae("",!0)],6)]),o("p",{class:le(["text-xs mt-2 font-medium",f.isToday?"text-indigo-600":"text-gray-500"])},y(f.day),3)]))),128))]),o("div",Rg,[o("div",null,[o("p",Bg,y(z.value)+"",1),a[8]||(a[8]=o("p",{class:"text-xs text-gray-500"},"",-1))]),o("div",null,[o("p",Hg,y(k.value)+"",1),a[9]||(a[9]=o("p",{class:"text-xs text-gray-500"},"/",-1))])])]),_:1})])):ae("",!0),l.value==="monthly"?(b(),_("div",Vg,[re(Me,null,{default:$e(()=>[o("div",Kg,[o("button",{onClick:a[3]||(a[3]=f=>B.value++),class:"p-2 rounded-lg bg-indigo-100 text-indigo-600 hover:bg-indigo-200 active:scale-95 transition-all"},[...a[10]||(a[10]=[o("span",{class:"text-lg"},"",-1)])]),o("h3",Wg,y(R.value),1),o("button",{onClick:a[4]||(a[4]=f=>B.value=Math.max(0,B.value-1)),disabled:B.value===0,class:le(["p-2 rounded-lg transition-all",B.value===0?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-indigo-100 text-indigo-600 hover:bg-indigo-200 active:scale-95"])},[...a[11]||(a[11]=[o("span",{class:"text-lg"},"",-1)])],10,zg)]),o("div",Gg,[(b(!0),_(oe,null,pe(G.value,(f,v)=>(b(),_("div",{key:v,class:"flex-1 flex flex-col items-center"},[o("div",qg,[(b(!0),_(oe,null,pe(f.segments,(M,j)=>(b(),_("div",{key:j,class:"w-full first:rounded-t-lg transition-all duration-500",style:he({height:fe(M.minutes,f.total)+"px",backgroundColor:M.color,minHeight:M.minutes>0?"4px":"0"})},null,4))),128)),f.total>0?(b(),_("span",Xg,y(Math.round(f.total/60*10)/10)+"h ",1)):ae("",!0)]),o("p",Yg,y(f.label),1)]))),128))]),o("div",Jg,[o("div",Qg,[(b(!0),_(oe,null,pe(w.value,(f,v)=>(b(),_("div",{key:v,class:"flex items-center gap-1.5"},[o("div",{class:"w-3 h-3 rounded-full",style:he({backgroundColor:f.color})},null,4),o("span",Zg,y(f.name),1)]))),128))]),o("div",eh,[o("p",th,y(N.value)+"",1),o("p",sh," ("+y(Math.round(N.value/60*10)/10)+")",1)])])]),_:1})])):ae("",!0),re(Me,null,{default:$e(()=>[a[12]||(a[12]=o("h3",{class:"font-bold text-gray-700 mb-4"}," ",-1)),Z.value.length===0?(b(),_("div",nh,"  ")):(b(),ye(Dn,{key:1,data:Z.value},null,8,["data"]))]),_:1}),re(Me,null,{default:$e(()=>[a[13]||(a[13]=o("h3",{class:"font-bold text-gray-700 mb-4"}," ",-1)),ie.value.length===0?(b(),_("div",oh,"  ")):(b(),ye(Dn,{key:1,data:ie.value},null,8,["data"]))]),_:1}),re(Me,null,{default:$e(()=>[a[14]||(a[14]=o("h3",{class:"font-bold text-gray-700 mb-4"}," ",-1)),re(Dn,{data:c.value},null,8,["data"])]),_:1}),re(Me,null,{default:$e(()=>[a[15]||(a[15]=o("h3",{class:"font-bold text-gray-700 mb-4"}," ",-1)),u.value.length===0?(b(),_("div",ih,"  ")):ae("",!0),o("div",lh,[(b(!0),_(oe,null,pe(u.value,(f,v)=>(b(),_("div",{key:v,class:"flex justify-between items-center py-2 border-b last:border-0 border-gray-100"},[o("div",rh,[o("div",{class:"w-2 h-8 rounded-full",style:he({backgroundColor:F(f.subject)})},null,4),o("div",null,[o("p",ah,y(f.subject),1),o("p",ch,y(f.date),1)])]),o("span",uh,y(f.minutes)+"",1)]))),128))])]),_:1}),re(Me,null,{default:$e(()=>[o("div",{class:"flex justify-between items-center mb-4"},[a[16]||(a[16]=o("h3",{class:"font-bold text-gray-700"}," ",-1)),o("button",{onClick:me,class:"text-xs text-blue-500 hover:text-blue-700"}," ")]),x.value?(b(),_("div",dh,[...a[17]||(a[17]=[o("span",{class:"text-gray-400 animate-pulse"},"...",-1)])])):d.value.length===0?(b(),_("div",fh,"  ")):(b(),_("div",ph,[(b(!0),_(oe,null,pe(d.value,(f,v)=>(b(),_("div",{key:v,class:"flex items-center gap-3 py-2 px-3 border-b last:border-0 border-gray-100 bg-gradient-to-r from-white to-gray-50 rounded-lg"},[o("div",gh,y(f.icon),1),o("div",hh,[o("div",mh,[o("span",vh,y(f.user_name),1),o("span",{class:le(["text-xs px-2 py-0.5 rounded-full",f.type==="study"?"bg-blue-100 text-blue-600":"bg-green-100 text-green-600"])},y(f.type==="study"?"":""),3)]),o("p",bh,y(f.description),1),o("p",xh,y(K(f.timestamp)),1)])]))),128))]))]),_:1}),re(Me,null,{default:$e(()=>[o("div",{class:"flex justify-between items-center mb-4"},[a[18]||(a[18]=o("h3",{class:"font-bold text-gray-700"}," XP",-1)),o("button",{onClick:Ae,class:"text-xs text-blue-500 hover:text-blue-700"}," ")]),T.value?(b(),_("div",yh,[...a[19]||(a[19]=[o("span",{class:"text-gray-400 animate-pulse"},"...",-1)])])):g.value.length===0?(b(),_("div",_h,"  ")):(b(),_("div",wh,[(b(!0),_(oe,null,pe(g.value,(f,v)=>{var M;return b(),_("div",{key:v,class:le(["flex items-center gap-3 py-3 px-4 rounded-xl transition-all",v===0?"bg-gradient-to-r from-yellow-50 to-amber-50 border-2 border-yellow-400":v===1?"bg-gradient-to-r from-gray-50 to-slate-100 border border-gray-300":v===2?"bg-gradient-to-r from-orange-50 to-amber-50 border border-orange-300":"bg-gray-50",f.user_id===H(s).currentUserId&&"ring-2 ring-indigo-400"])},[o("div",{class:le(["w-10 h-10 rounded-full flex items-center justify-center font-bold text-lg",[v===0?"bg-yellow-400 text-yellow-900":v===1?"bg-gray-300 text-gray-700":v===2?"bg-orange-400 text-orange-900":"bg-gray-200 text-gray-600"]])},y(v===0?"":v===1?"":v===2?"":f.rank),3),o("div",kh,[o("p",$h,[Vt(y(f.display_name)+" ",1),f.user_id===H(s).currentUserId?(b(),_("span",Ch,"()")):ae("",!0)]),o("p",Sh,"Lv."+y(f.level||1),1)]),o("div",Th,[o("p",{class:le(["font-bold text-lg",v<3?"text-amber-600":"text-gray-700"])},y(((M=f.weekly_exp)==null?void 0:M.toLocaleString())||0),3),a[20]||(a[20]=o("p",{class:"text-[10px] text-gray-400"},"XP",-1))])],2)}),128))]))]),_:1}),re(Me,null,{default:$e(()=>[o("div",{class:"flex justify-between items-center mb-4"},[a[21]||(a[21]=o("h3",{class:"font-bold text-gray-700"}," ",-1)),o("button",{onClick:be,class:"text-xs text-blue-500 hover:text-blue-700"}," ")]),I.value?(b(),_("div",Ph,[...a[22]||(a[22]=[o("span",{class:"text-gray-400 animate-pulse"},"...",-1)])])):m.value.length===0?(b(),_("div",Mh,"  ")):(b(),_("div",jh,[o("div",Ah,[(b(!0),_(oe,null,pe(m.value,f=>(b(),_("div",{key:f.id,class:le(["w-64 flex-shrink-0 bg-gradient-to-br from-white to-gray-50 rounded-xl p-4 border border-gray-200 shadow-sm",{"ring-2 ring-indigo-400":f.user_id===H(s).currentUserId}])},[o("div",Ih,[o("span",Dh,y(f.user_name),1),o("span",{class:le(["text-xs px-2 py-0.5 rounded-full flex-shrink-0 ml-2",At(f.target_date)])},y(ut(f.target_date)),3)]),o("h4",Eh,y(f.title),1),f.description?(b(),_("p",Oh,y(f.description),1)):ae("",!0),o("div",Fh,[a[23]||(a[23]=o("span",null,"",-1)),o("span",null,y(is(f.target_date)),1)]),f.user_id===H(s).currentUserId?(b(),_("div",Nh,[o("button",{onClick:v=>Gt(f.id),class:"flex-1 text-xs py-1.5 rounded-lg bg-green-100 text-green-600 font-medium hover:bg-green-200 transition-colors"},"   ",8,Lh),o("button",{onClick:v=>D(f.id),class:"flex-1 text-xs py-1.5 rounded-lg bg-red-50 text-red-500 font-medium hover:bg-red-100 transition-colors"},"   ",8,Uh)])):ae("",!0)],2))),128))])]))]),_:1})]))}},Bh={class:"space-y-4 mt-8"},Hh={class:"flex justify-between items-center"},Vh={key:0,class:"text-center py-4"},Kh={key:1,class:"space-y-2"},Wh=["value"],zh=["disabled"],Gh={key:0,class:"text-center py-8"},qh={key:0,class:"text-gray-500 text-center py-4"},Xh={key:1},Yh={class:"flex gap-2 mb-4 overflow-x-auto pb-2"},Jh=["onClick"],Qh={class:"space-y-2 max-h-96 overflow-y-auto"},Zh={class:"flex justify-between items-start mb-2"},em={class:"flex items-center gap-2"},tm={class:"text-lg"},sm={class:"text-xs text-gray-400"},nm={class:"mb-3"},om={class:"font-medium text-gray-800"},im={class:"text-sm text-gray-500"},lm={key:0,class:"text-xs text-gray-400 mt-1"},rm={key:1,class:"text-sm text-yellow-600 mt-1"},am={class:"flex gap-2 justify-end"},cm=["onClick","disabled"],um=["onClick","disabled"],dm={class:"bg-white rounded-2xl p-6 mx-4 max-w-sm w-full shadow-xl"},fm={class:"text-gray-600 mb-4"},pm={class:"flex gap-3"},gm=["disabled"],hm={__name:"AdminView",emits:["exit","viewAsUser"],setup(e,{emit:t}){const s=t,n=Je(),i=E(!0),l=E(!1),r=E([]),c=E("all"),u=E(""),d=E("success"),p=E(!1),g=E(null),m=E(!0),h=E([]),x=E(""),T=[{key:"all",label:"",icon:""},{key:"study",label:"",icon:""},{key:"job",label:"",icon:""},{key:"shop",label:"",icon:""},{key:"mission",label:"",icon:""}],I=q(()=>c.value==="all"?r.value:r.value.filter(N=>N.type===c.value)),C=N=>N==="all"?r.value.length:r.value.filter(S=>S.type===N).length,B=N=>({study:"",job:"",shop:"",mission:""})[N]||"",O=N=>({study:"",job:"",shop:"",mission:""})[N]||N,w=N=>({study:"bg-blue-100 text-blue-700",job:"bg-orange-100 text-orange-700",shop:"bg-purple-100 text-purple-700",mission:"bg-green-100 text-green-700"})[N]||"bg-gray-100 text-gray-700",F=N=>{if(!N)return"";try{return new Date(N).toLocaleString("ja-JP",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return N}},Z=(N,S="success")=>{u.value=N,d.value=S,setTimeout(()=>{u.value=""},3e3)},ie=async()=>{i.value=!0;try{const S=await(await fetch("/api/admin/pending")).json();S.status==="ok"&&S.data?r.value=S.data.map(J=>K(J)):r.value=[]}catch(N){console.error("Fetch pending error:",N),Z("","error")}finally{i.value=!1}},K=N=>{const S=N.data||N,J=N.type||"unknown";let X,ce,fe,we,me,Ae,be;switch(J){case"study":X=`study_${S.row_index}`,ce=`${S.subject||""} - ${S.minutes||0}`,fe=S.user_id,we=S.user_name||S.user_id,me=S.date,Ae=S.comment||"",be=S.minutes||0;break;case"job":X=S.job_id,ce=S.title||"",fe=S.worker_id,we=S.worker_name||S.worker_id,me=S.finished_at||S.created_at,Ae=S.comment||S.description||"",be=S.reward||0;break;case"shop":X=S.request_id,ce=S.item_name||S.item_key||"",fe=S.user_id,we=S.user_name||S.user_id,me=S.created_at,Ae="",be=S.cost||0;break;case"mission":X=S.mission_id,ce=S.title||"",fe=S.user_id,we=S.user_name||S.user_id,me=S.created_at,Ae=S.description||"",be=S.reward||0;break;default:X=`unknown_${Date.now()}`,ce="",fe="",we="",me="",Ae="",be=0}return{id:X,type:J,title:ce,userId:fe,userName:we,date:me,detail:Ae,reward:be,rawData:S}},A=async N=>{if(!l.value){l.value=!0;try{let S,J;switch(N.type){case"study":S="/api/admin/approve/study",J={row_index:N.rawData.row_index,user_id:N.userId,minutes:N.reward};break;case"job":S="/api/admin/approve/job",J={job_id:N.rawData.job_id};break;case"shop":S="/api/admin/approve/shop",J={request_id:N.rawData.request_id};break;case"mission":S="/api/admin/approve/mission",J={mission_id:N.rawData.mission_id};break;default:throw new Error("Unknown type")}const ce=await(await fetch(S,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(J)})).json();ce.status==="ok"?(Z(`${N.title} `,"success"),r.value=r.value.filter(fe=>fe.id!==N.id)):Z(ce.message||"","error")}catch(S){console.error("Approve error:",S),Z("","error")}finally{l.value=!1}}},Y=N=>{g.value=N,p.value=!0},z=async()=>{g.value&&(p.value=!1,await k(g.value),g.value=null)},k=async N=>{if(!l.value){l.value=!0;try{let S,J;switch(N.type){case"study":S="/api/admin/reject/study",J={row_index:N.rawData.row_index,user_id:N.userId};break;case"job":S="/api/admin/reject/job",J={job_id:N.rawData.job_id};break;case"shop":S="/api/admin/reject/shop",J={request_id:N.rawData.request_id,user_id:N.userId,cost:N.reward};break;case"mission":S="/api/admin/reject/mission",J={mission_id:N.rawData.mission_id};break;default:throw new Error("Unknown type")}const ce=await(await fetch(S,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(J)})).json();ce.status==="ok"?(Z(`${N.title} `,"success"),r.value=r.value.filter(fe=>fe.id!==N.id)):Z(ce.message||"","error")}catch(S){console.error("Reject error:",S),Z("","error")}finally{l.value=!1}}};qe(()=>{ie(),R()});const R=async()=>{m.value=!0;try{const S=await(await fetch("/api/admin/users")).json();S.status==="success"&&S.users&&(h.value=S.users)}catch(N){console.error("Fetch users error:",N)}finally{m.value=!1}},G=async()=>{if(!x.value)return;const N=h.value.find(J=>J.user_id===x.value);await n.viewAsUser(x.value,(N==null?void 0:N.user_name)||"")&&s("viewAsUser")};return(N,S)=>{var J;return b(),_("div",Bh,[o("div",Hh,[S[4]||(S[4]=o("h2",{class:"text-xl font-bold text-white"}," ",-1)),o("button",{onClick:S[0]||(S[0]=X=>s("exit")),class:"text-white/70 hover:text-white"},"   ")]),re(Me,null,{default:$e(()=>[S[7]||(S[7]=o("h3",{class:"font-bold text-gray-700 mb-3"}," ",-1)),S[8]||(S[8]=o("p",{class:"text-xs text-gray-500 mb-3"},"",-1)),m.value?(b(),_("div",Vh,[...S[5]||(S[5]=[o("span",{class:"text-gray-500"},"...",-1)])])):(b(),_("div",Kh,[Rt(o("select",{"onUpdate:modelValue":S[1]||(S[1]=X=>x.value=X),class:"w-full p-3 border-2 border-gray-200 rounded-xl focus:border-indigo-400 focus:outline-none"},[S[6]||(S[6]=o("option",{value:""},"...",-1)),(b(!0),_(oe,null,pe(h.value,X=>(b(),_("option",{key:X.user_id,value:X.user_id},y(X.user_name)+" "+y(X.user_id===H(n).originalUserId?"()":""),9,Wh))),128))],512),[[Sl,x.value]]),o("button",{onClick:G,disabled:!x.value||x.value===H(n).currentUserId,class:"w-full py-2 rounded-xl font-bold text-white bg-indigo-500 hover:bg-indigo-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors"},"   ",8,zh)]))]),_:1}),i.value?(b(),_("div",Gh,[...S[9]||(S[9]=[o("div",{class:"animate-spin text-4xl"},"",-1),o("p",{class:"text-white/70 mt-2"},"...",-1)])])):(b(),ye(Me,{key:1},{default:$e(()=>[o("div",{class:"flex justify-between items-center mb-4"},[S[10]||(S[10]=o("h3",{class:"font-bold text-gray-700"}," ",-1)),o("button",{onClick:ie,class:"text-blue-500 text-sm hover:text-blue-700"},"   ")]),r.value.length===0?(b(),_("div",qh,"  ")):(b(),_("div",Xh,[o("div",Yh,[(b(),_(oe,null,pe(T,X=>o("button",{key:X.key,onClick:ce=>c.value=X.key,class:le(["px-3 py-1 rounded-full text-sm whitespace-nowrap transition-all",c.value===X.key?"bg-blue-500 text-white":"bg-gray-200 text-gray-600 hover:bg-gray-300"])},y(X.icon)+" "+y(X.label)+" ("+y(C(X.key))+") ",11,Jh)),64))]),o("div",Qh,[(b(!0),_(oe,null,pe(I.value,X=>(b(),_("div",{key:X.id,class:"p-3 bg-gray-50 rounded-lg border border-gray-200"},[o("div",Zh,[o("div",em,[o("span",tm,y(B(X.type)),1),o("span",{class:le(["text-xs px-2 py-0.5 rounded-full",w(X.type)])},y(O(X.type)),3)]),o("span",sm,y(F(X.date)),1)]),o("div",nm,[o("p",om,y(X.title),1),o("p",im," "+y(X.userName||X.userId),1),X.detail?(b(),_("p",lm,y(X.detail),1)):ae("",!0),X.reward?(b(),_("p",rm,"  : "+y(X.reward)+" XP ",1)):ae("",!0)]),o("div",am,[o("button",{onClick:ce=>A(X),disabled:l.value,class:"bg-green-500 hover:bg-green-600 disabled:bg-gray-300 text-white px-4 py-1.5 rounded text-sm font-medium transition-colors"},"   ",8,cm),o("button",{onClick:ce=>Y(X),disabled:l.value,class:"bg-red-500 hover:bg-red-600 disabled:bg-gray-300 text-white px-4 py-1.5 rounded text-sm font-medium transition-colors"},"   ",8,um)])]))),128))])]))]),_:1})),p.value?(b(),_("div",{key:2,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:S[3]||(S[3]=Ye(X=>p.value=!1,["self"]))},[o("div",dm,[S[11]||(S[11]=o("h3",{class:"text-lg font-bold text-gray-800 mb-3"}," ",-1)),o("p",fm," "+y((J=g.value)==null?void 0:J.title)+" ",1),o("div",pm,[o("button",{onClick:S[2]||(S[2]=X=>p.value=!1),class:"flex-1 py-2 bg-gray-200 text-gray-700 rounded-lg font-medium hover:bg-gray-300"},"  "),o("button",{onClick:z,disabled:l.value,class:"flex-1 py-2 bg-red-500 text-white rounded-lg font-medium hover:bg-red-600 disabled:bg-gray-300"},"  ",8,gm)])])])):ae("",!0),u.value?(b(),_("div",{key:3,class:le(["fixed bottom-4 left-1/2 transform -translate-x-1/2 px-4 py-2 rounded-lg shadow-lg transition-opacity",d.value==="success"?"bg-green-500 text-white":"bg-red-500 text-white"])},y(u.value),3)):ae("",!0)])}}},mm={class:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center px-6"},vm={class:"bg-white rounded-2xl shadow-2xl w-full max-w-sm overflow-hidden animate-fadeInUp"},bm={class:"p-6 text-center"},xm={class:"text-4xl mb-2"},ym={class:"text-xl font-bold text-gray-800"},_m={class:"text-amber-600 font-bold text-lg mt-2"},wm={class:"px-6 pb-4"},km={class:"p-4 border-t flex gap-3"},$m={__name:"BuyModal",props:{item:{type:Object,default:null}},emits:["confirm","cancel"],setup(e,{emit:t}){const s=t,n=E(""),i=()=>{s("confirm",n.value),n.value=""};return(l,r)=>{var c,u,d;return b(),ye(fn,{to:"body"},[o("div",mm,[o("div",vm,[r[3]||(r[3]=o("div",{class:"bg-gradient-to-r from-amber-500 to-orange-500 p-4"},[o("h3",{class:"text-white font-bold text-lg text-center"}," ")],-1)),o("div",bm,[o("p",xm,y((c=e.item)==null?void 0:c.icon),1),o("h4",ym,y((u=e.item)==null?void 0:u.name),1),o("p",_m,y((d=e.item)==null?void 0:d.cost)+" XP ",1)]),o("div",wm,[r[2]||(r[2]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"   () ",-1)),Rt(o("input",{"onUpdate:modelValue":r[0]||(r[0]=p=>n.value=p),type:"text",class:"w-full p-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent",placeholder:"..."},null,512),[[ys,n.value]])]),o("div",km,[o("button",{onClick:r[1]||(r[1]=p=>s("cancel")),class:"flex-1 py-3 bg-gray-200 text-gray-700 rounded-xl font-medium"},"  "),o("button",{onClick:i,class:"flex-1 py-3 bg-gradient-to-r from-amber-500 to-orange-500 text-white rounded-xl font-bold"},"  ")])])])])}}},Cm={class:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center px-6"},Sm={class:"bg-white rounded-2xl shadow-2xl w-full max-w-sm overflow-hidden animate-fadeInUp max-h-[80vh] flex flex-col"},Tm={class:"p-4 overflow-y-auto flex-1"},Pm={key:0,class:"text-center py-8"},Mm={key:1,class:"text-center text-gray-500 py-8"},jm={key:2,class:"space-y-3"},Am=["onClick"],Im={class:"text-3xl"},Dm={class:"flex-1"},Em={class:"font-bold text-gray-800"},Om={class:"text-xs text-gray-500"},Fm={class:"text-amber-600 font-bold whitespace-nowrap"},Nm={class:"p-4 border-t shrink-0"},Lm={__name:"ShopListModal",emits:["close"],setup(e,{emit:t}){const s=fo(),n=t;return(i,l)=>(b(),ye(fn,{to:"body"},[o("div",Cm,[o("div",Sm,[l[2]||(l[2]=o("div",{class:"bg-gradient-to-r from-amber-500 to-orange-500 p-4 shrink-0"},[o("h3",{class:"text-white font-bold text-lg text-center"}," ")],-1)),o("div",Tm,[H(s).loading?(b(),_("div",Pm,[...l[1]||(l[1]=[o("div",{class:"animate-spin rounded-full h-8 w-8 border-4 border-amber-300 border-t-amber-600 mx-auto"},null,-1),o("p",{class:"mt-2 text-gray-500"},"...",-1)])])):H(s).shopItems.length===0?(b(),_("div",Mm,"  ")):(b(),_("div",jm,[(b(!0),_(oe,null,pe(H(s).shopItems,r=>(b(),_("button",{key:r.key,onClick:c=>H(s).openBuyModal(r),class:"w-full bg-white border border-gray-200 rounded-xl p-3 flex items-center gap-4 transition-all hover:shadow-md active:scale-95 text-left"},[o("span",Im,y(r.icon),1),o("div",Dm,[o("p",Em,y(r.name),1),o("p",Om,y(r.description),1)]),o("div",Fm,y(r.cost)+" XP ",1)],8,Am))),128))]))]),o("div",Nm,[o("button",{onClick:l[0]||(l[0]=r=>n("close")),class:"w-full py-3 bg-gray-100 text-gray-600 rounded-xl font-medium transition-colors hover:bg-gray-200"},"  ")])])])]))}},Um={class:"bg-white rounded-2xl p-6 w-[90%] max-w-md shadow-2xl animate-pop-in"},Rm={class:"mb-4"},Bm={class:"mb-4"},Hm={class:"mb-6"},Vm=["min"],Km={key:0,class:"mb-6 p-4 bg-indigo-50 rounded-xl"},Wm={class:"text-center"},zm={class:"text-3xl font-bold text-indigo-600"},Gm={class:"flex gap-3"},qm=["disabled"],Xm={__name:"GoalModal",emits:["close","created"],setup(e,{emit:t}){const s=t,n=Je(),i=E(""),l=E(""),r=E(""),c=E(!1),u=q(()=>new Date().toISOString().split("T")[0]),d=q(()=>{if(!r.value)return-1;const m=new Date(r.value),h=new Date;return h.setHours(0,0,0,0),m.setHours(0,0,0,0),Math.ceil((m-h)/(1e3*60*60*24))}),p=q(()=>i.value.trim()&&r.value&&d.value>=0),g=async()=>{if(!(!p.value||c.value)){c.value=!0;try{const h=await(await fetch("/api/goals",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:n.currentUserId,user_name:n.user.name,title:i.value.trim(),description:l.value.trim(),target_date:r.value})})).json();h.status==="ok"?(s("created"),s("close")):alert(": "+(h.message||"Unknown error"))}catch(m){console.error("Goal creation error:",m),alert("")}finally{c.value=!1}}};return(m,h)=>(b(),_("div",{class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:h[4]||(h[4]=Ye(x=>s("close"),["self"]))},[o("div",Um,[h[10]||(h[10]=o("h3",{class:"text-xl font-bold text-gray-800 mb-4"}," ",-1)),o("div",Rm,[h[5]||(h[5]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," *",-1)),Rt(o("input",{"onUpdate:modelValue":h[0]||(h[0]=x=>i.value=x),type:"text",placeholder:"80",class:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-indigo-400 focus:outline-none transition-colors",maxlength:"50"},null,512),[[ys,i.value]])]),o("div",Bm,[h[6]||(h[6]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"",-1)),Rt(o("textarea",{"onUpdate:modelValue":h[1]||(h[1]=x=>l.value=x),placeholder:"...",class:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-indigo-400 focus:outline-none transition-colors resize-none",rows:"3",maxlength:"200"},null,512),[[ys,l.value]])]),o("div",Hm,[h[7]||(h[7]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," *",-1)),Rt(o("input",{"onUpdate:modelValue":h[2]||(h[2]=x=>r.value=x),type:"date",min:u.value,class:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-indigo-400 focus:outline-none transition-colors"},null,8,Vm),[[ys,r.value]]),h[8]||(h[8]=o("p",{class:"text-xs text-gray-500 mt-1"},"",-1))]),r.value&&d.value>=0?(b(),_("div",Km,[o("p",Wm,[o("span",zm,y(d.value),1),h[9]||(h[9]=o("span",{class:"text-gray-600"},"",-1))])])):ae("",!0),o("div",Gm,[o("button",{onClick:h[3]||(h[3]=x=>s("close")),class:"flex-1 py-3 rounded-xl font-bold text-gray-600 bg-gray-100 hover:bg-gray-200 transition-colors"},"  "),o("button",{onClick:g,disabled:!p.value||c.value,class:"flex-1 py-3 rounded-xl font-bold text-white bg-gradient-to-r from-indigo-500 to-purple-500 hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed"},y(c.value?"...":" "),9,qm)])])]))}},Ym=He(Xm,[["__scopeId","data-v-e1b0dca1"]]),Jm={class:"min-h-screen pb-20 max-w-md mx-auto relative overflow-hidden bg-slate-50"},Qm={key:0,class:"fixed top-0 left-0 right-0 bg-orange-500 text-white py-2 px-4 z-50 flex items-center justify-between shadow-lg"},Zm={class:"text-sm font-bold"},ev={__name:"App",setup(e){const t=Je(),s=Ds(),n=xc(),i=fo(),l=jt(),{initLiff:r}=kc(),{playSound:c}=zt(),u=E("study"),d=E(!1),p=E(null);qe(async()=>{c("poweron"),await r(),n.startBattleLoop(),l.initialize()});const g=()=>{s.inSession?u.value="timer":s.openSubjectModal()},m=async O=>{await s.startStudy(O),u.value="timer"},h=async()=>{const O=await s.finishStudy();O>0&&(n.applyStudyDamage(O),l.earnFromStudy(O)>0&&await l.syncToServer()),u.value="study"},x=async O=>{await i.confirmBuy(O)},T=O=>{O==="admin"&&(u.value="admin")},I=()=>{u.value="study"},C=async()=>{await t.exitViewAsUser(),u.value="study"},B=()=>{var O;d.value=!1,(O=p.value)!=null&&O.fetchMyGoals&&p.value.fetchMyGoals()};return(O,w)=>(b(),_("div",Jm,[w[11]||(w[11]=o("div",{class:"absolute top-0 left-0 w-full h-48 bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 rounded-b-[40px] z-0"},null,-1)),H(t).isViewingAsOther?(b(),_("div",Qm,[o("span",Zm," "+y(H(t).user.name)+" ",1),o("button",{onClick:C,class:"bg-white text-orange-500 px-3 py-1 rounded-full text-xs font-bold hover:bg-orange-100"},"   ")])):ae("",!0),o("div",{class:le(["absolute top-4 right-4 z-30",{"mt-10":H(t).isViewingAsOther}])},[re(Qc,{onNavigate:T})],2),o("div",{class:le(["relative z-10 px-6 pt-8",{"mt-10":H(t).isViewingAsOther}])},[H(t).loading?(b(),ye(Tc,{key:0})):(b(),_(oe,{key:1},[u.value==="timer"?(b(),ye(Iu,{key:0,onBack:w[0]||(w[0]=F=>u.value="study")})):u.value==="game"?(b(),ye(bg,{key:1})):u.value==="admin"?(b(),ye(hm,{key:2,onExit:w[1]||(w[1]=F=>u.value="study"),onViewAsUser:I})):u.value==="data"?(b(),ye(Rh,{key:3,onAdmin:w[2]||(w[2]=F=>u.value="admin")})):(b(),ye(Tu,{key:4,ref_key:"studyViewRef",ref:p,onTimer:w[3]||(w[3]=F=>u.value="timer"),onOpenGoalModal:w[4]||(w[4]=F=>d.value=!0)},null,512))],64))],2),H(s).showSubjectModal?(b(),ye(Ru,{key:1,onClose:w[5]||(w[5]=F=>H(s).showSubjectModal=!1),onStart:m})):ae("",!0),H(s).showMemoConfirm?(b(),ye(zu,{key:2,memo:H(s).memoToSend,onConfirm:h,onCancel:w[6]||(w[6]=F=>H(s).showMemoConfirm=!1)},null,8,["memo"])):ae("",!0),H(i).showBuyModal?(b(),ye($m,{key:3,item:H(i).selectedItem,onConfirm:x,onCancel:w[7]||(w[7]=F=>H(i).showBuyModal=!1)},null,8,["item"])):ae("",!0),H(i).showShopList?(b(),ye(Lm,{key:4,onClose:w[8]||(w[8]=F=>H(i).showShopList=!1)})):ae("",!0),d.value?(b(),ye(Ym,{key:5,onClose:w[9]||(w[9]=F=>d.value=!1),onCreated:B})):ae("",!0),re(Dc,{modelValue:u.value,"onUpdate:modelValue":w[10]||(w[10]=F=>u.value=F),"in-session":H(s).inSession},null,8,["modelValue","in-session"]),u.value==="study"?(b(),ye(Ec,{key:6,"in-session":H(s).inSession,onClick:g},null,8,["in-session"])):ae("",!0)]))}},Il=cc(ev),tv=fc();Il.use(tv);Il.mount("#app");
