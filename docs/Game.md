# 📱 Study Guardian - Evolution Game Design

## 🎮 ゲームコンセプト

**「Cell to Singularity」スタイルの知的進化放置ゲーム**

弟の学習時間が「宇宙開発プロジェクト」の燃料となり、机から始まった小さな研究が技術的特異点へと進化していく体験。

---

## 📊 コアシステム

### リソース生成の二層化
1. **KP (Knowledge Points)**: 学習タイマーを回している間に生成される
2. **AP (Auto Points)**: アプリを閉じている間にも現在のステータスに応じて自動生成される

### アップグレードの指数関数的コスト
```
コスト = 基本コスト × (1.15 ^ レベル)
```

---

## 🖼️ 3画面構成

### 1️⃣ メイン画面（タップ & 収穫）
**目的**: 没入感のあるビジュアル体験、KPの獲得と蓄積の快感

```
┌────────────────────────────────────┐
│  🌌 パララックス宇宙背景           │
│  ★ 星がゆっくり流れる              │
│                                    │
│     ╔════════════════════╗        │
│     ║  💡 12,450 KP      ║ ← タップで収穫可能なKP表示
│     ║  ×3.2 研究効率     ║
│     ╚════════════════════╝        │
│                                    │
│    ┌─────────────────────┐        │
│    │  🌍 中央ビジュアル   │        │ ← 進行度に応じて変化
│    │  （地球 → 宇宙）     │        │   タップするとパーティクル発生
│    └─────────────────────┘        │
│                                    │
│  [リスト] [テックツリー] [設定]    │ ← 下部ナビゲーション
└────────────────────────────────────┘
```

**機能**:
- **タップ収穫**: 画面タップでパーティクルが噴出しKPカウンターに吸収
- **進化ビジュアル**: 累計KPに応じて中央の絵が変化（地球→月→火星→銀河）
- **アンビエント演出**: 星の流れ、オーロラ、宇宙塵のパーティクル

---

### 2️⃣ リスト画面（施設一覧 & 研究効率）
**目的**: 効率的な施設管理、次の目標の明確化

```
┌────────────────────────────────────┐
│  ◀ メイン   📊 研究効率 ×3.2      │
│                                    │
│  ┌─ Tier 1: 基礎研究 ────────────┐│
│  │ ✅ 学習デスク     Lv.5  +0.5  ││
│  │ ✅ 本棚           Lv.3  +0.9  ││
│  │ 🔓 PCセットアップ Lv.0  +0.8  ││ ← 購入可能（黄色ボーダー）
│  └────────────────────────────────┘│
│                                    │
│  ┌─ Tier 2: 研究施設 ────────────┐│
│  │ ✅ 研究室         Lv.2  +4.0  ││
│  │ 🔒 私設図書館     ███░░ 65%   ││ ← 円形プログレス
│  │ ❓ AI学習アシスト ░░░░░ ???   ││ ← シルエット表示
│  └────────────────────────────────┘│
│                                    │
│  ┌─ Tier 3: 宇宙開発 ────────────┐│
│  │ ❓❓❓ シルエット表示 ❓❓❓     ││
│  └────────────────────────────────┘│
└────────────────────────────────────┘
```

**状態表示**:
- ✅ **unlocked**: 解放済み、購入・レベルアップ可能
- 🔓 **revealed**: 50%到達、名前と画像が見える、購入可能
- 🔒 **hint**: 20%到達、シルエット＋円形プログレス表示
- ❓ **locked**: 完全にシルエット化、「???」表示

---

### 3️⃣ テックツリー画面（ビジュアルマップ）
**目的**: 全体の進行感、宇宙に広がる達成感

```
┌────────────────────────────────────┐
│  ◀ メイン   🌳 テックツリー       │
│                                    │
│  🔍 [-] [+]  ドラッグでパン       │
│                                    │
│     ┌───┐                          │
│     │🎓│ 学習デスク               │ ← ズームで詳細表示
│     └─┬─┘                          │
│       │                            │
│   ┌───┴───┐                        │
│   │       │                        │
│ ┌─┴─┐   ┌─┴─┐                      │
│ │📖│   │💻│                       │
│ └─┬─┘   └─┬─┘                      │
│   │       │                        │
│   └───┬───┘                        │
│       │                            │
│     ┌─┴─┐                          │
│     │🔬│ 研究室                    │
│     └─┬─┘                          │
│       │                            │
│      ...（宇宙へ続く）             │
│                                    │
└────────────────────────────────────┘
```

**機能**:
- **ダイナミックズーム**: 進行度に応じて自動でズームアウト
- **接続ライン**: 解放済みは光るライン、未解放はぼやけたライン
- **パララックス**: ツリー移動時に背景がゆっくり動く

---

## 🎨 必要な画像素材一覧

### 📁 フォルダ構造
```
static/assets/game/
├── backgrounds/          # 背景画像
│   ├── space_bg_1.png   # 星空（基礎段階）
│   ├── space_bg_2.png   # 銀河（中盤）
│   ├── space_bg_3.png   # 宇宙塵（後半）
│   └── nebula_overlay.png
│
├── facilities/           # 施設アイコン
│   ├── study_desk.png
│   ├── bookshelf.png
│   └── ...（16施設分）
│
├── facilities_silhouette/  # シルエット版
│   ├── study_desk_silhouette.png
│   └── ...
│
├── evolution/            # 中央進化ビジュアル
│   ├── stage_1_earth.png
│   ├── stage_2_orbit.png
│   ├── stage_3_moon.png
│   ├── stage_4_mars.png
│   ├── stage_5_galaxy.png
│   └── stage_6_singularity.png
│
├── particles/            # パーティクル素材
│   ├── kp_particle.png  # 光の粒
│   ├── star_small.png
│   ├── star_medium.png
│   └── sparkle.png
│
└── ui/                   # UI素材
    ├── progress_ring.svg
    ├── glow_circle.png
    └── unlock_burst.png
```

---

## 🖼️ 素材仕様詳細

### 1. 背景画像 (backgrounds/)

| ファイル名 | サイズ | 説明 | 入手方法 |
|-----------|--------|------|----------|
| `space_bg_1.png` | 1920×1080 | 紺色〜黒のグラデーション、小さな星がちりばめられた静かな宇宙 | Unsplash "space stars" |
| `space_bg_2.png` | 1920×1080 | 天の川が見える銀河背景 | Unsplash "milky way" |
| `space_bg_3.png` | 1920×1080 | カラフルな星雲、宇宙塵 | Unsplash "nebula" |
| `nebula_overlay.png` | 1920×1080 | 半透明の星雲オーバーレイ（PNG透過） | Canva/Photopea で作成 |

**推奨検索先**:
- [Unsplash](https://unsplash.com/s/photos/space) - 無料・商用OK
- [Pexels](https://www.pexels.com/search/space/) - 無料・商用OK
- [NASA Image Gallery](https://images.nasa.gov/) - パブリックドメイン

---

### 2. 施設アイコン (facilities/)

| ID | 名前 | 推奨デザイン | サイズ |
|----|------|-------------|--------|
| `study_desk` | 学習デスク | シンプルな机とランプ、ミニマルなアイソメトリック | 256×256 PNG透過 |
| `bookshelf` | 本棚 | 本が並んだ棚、知識の象徴 | 256×256 PNG透過 |
| `pc_setup` | PCセットアップ | モニター＋キーボード、ゲーミング風に光っても◎ | 256×256 PNG透過 |
| `lab` | 研究室 | フラスコ、顕微鏡、科学的なイメージ | 256×256 PNG透過 |
| `library` | 私設図書館 | 大きな本棚に囲まれた空間 | 256×256 PNG透過 |
| `ai_assistant` | AI学習アシスタント | ロボット頭部 or 光るAIコア | 256×256 PNG透過 |
| `satellite` | 観測衛星 | 人工衛星、ソーラーパネル展開 | 256×256 PNG透過 |
| `space_center` | 宇宙センター | ロケット発射台、管制塔 | 256×256 PNG透過 |
| `orbital_lab` | 軌道研究ステーション | ISS風の宇宙ステーション | 256×256 PNG透過 |
| `moon_base` | 月面基地 | ドーム型基地、月面背景 | 256×256 PNG透過 |
| `mars_colony` | 火星コロニー | 赤い大地にドーム都市 | 256×256 PNG透過 |
| `asteroid_mining` | 小惑星採掘基地 | 小惑星に取り付くマシン | 256×256 PNG透過 |
| `dyson_sphere` | ダイソン球殻 | 太陽を囲む巨大構造物 | 256×256 PNG透過 |
| `warp_drive` | ワープドライブ研究所 | 光のトンネル、ワープゲート | 256×256 PNG透過 |
| `galactic_council` | 銀河評議会 | 宇宙人のシルエット、円卓 | 256×256 PNG透過 |
| `singularity` | 技術的特異点 | 光り輝く球体、すべてが収束 | 256×256 PNG透過 |

**推奨入手先**:
- [Flaticon](https://www.flaticon.com/) - 有料プラン推奨、統一感のあるアイコンセット
- [Icons8](https://icons8.com/) - 宇宙・テクノロジー系充実
- [Noun Project](https://thenounproject.com/) - シンプルなアイコン
- **AI生成**: Midjourney / DALL-E で「isometric space facility icon, game asset, transparent background」

---

### 3. 進化ステージビジュアル (evolution/)

| ファイル名 | 表示条件 | デザイン |
|-----------|----------|----------|
| `stage_1_earth.png` | 0 - 5,000 KP | 青い地球、大気圏が見える |
| `stage_2_orbit.png` | 5,000 - 50,000 KP | 地球周回軌道上、衛星が見える |
| `stage_3_moon.png` | 50,000 - 200,000 KP | 月と地球、アポロ風 |
| `stage_4_mars.png` | 200,000 - 1,000,000 KP | 火星、テラフォーミング中 |
| `stage_5_galaxy.png` | 1,000,000 - 10,000,000 KP | 銀河系、スケールが広がる |
| `stage_6_singularity.png` | 10,000,000+ KP | 光の集合体、抽象的 |

**サイズ**: 512×512 PNG透過推奨

---

### 4. パーティクル素材 (particles/)

| ファイル名 | 用途 | サイズ |
|-----------|------|--------|
| `kp_particle.png` | KP獲得時に飛び散る光の粒 | 32×32 PNG透過 |
| `star_small.png` | 背景の星（小） | 8×8 PNG透過 |
| `star_medium.png` | 背景の星（中） | 16×16 PNG透過 |
| `sparkle.png` | 解禁時のキラキラ | 64×64 PNG透過 |
| `unlock_burst.png` | 施設解禁時の爆発光 | 256×256 PNG透過 |

---

## 🎬 演出（Juice）仕様

### タップ演出
```javascript
// タップ時
1. タップ地点から kp_particle.png が 8-12個 噴出
2. 各パーティクルは放物線を描きながらヘッダーのKPカウンターへ
3. カウンター到達時に数字が+1ずつ増加（Odometer効果）
4. カウンター周囲が一瞬光る（glow effect）
```

### 施設解禁演出
```javascript
// 解禁条件達成時
1. 画面全体が 0.1秒 × 3回 シェイク
2. 該当ノードから unlock_burst.png が展開
3. シルエットがフェードアウト、本体がフェードイン
4. 解禁サウンド再生（オプション）
5. 祝福パーティクル（confetti）が画面上部から降る
```

### プログレスバーの脈動
```css
/* 次の解禁が近いとき（80%以上）*/
@keyframes pulse-urgent {
  0%, 100% { opacity: 1; transform: scaleX(1); }
  50% { opacity: 0.8; transform: scaleX(1.02); }
}
```

---

## 🎨 カラーパレット

### Tierごとの色
```css
:root {
  /* Tier 1: 基礎研究 - 落ち着いたグレー・ブルー */
  --tier-1-primary: #64748b;
  --tier-1-bg: #f1f5f9;

  /* Tier 2: 研究施設 - 知的なブルー */
  --tier-2-primary: #3b82f6;
  --tier-2-bg: #eff6ff;

  /* Tier 3: 宇宙開発 - 神秘的なパープル */
  --tier-3-primary: #8b5cf6;
  --tier-3-bg: #f5f3ff;

  /* Tier 4: 惑星開発 - 火星のオレンジ */
  --tier-4-primary: #f97316;
  --tier-4-bg: #fff7ed;

  /* Tier 5: 銀河進出 - コズミックピンク */
  --tier-5-primary: #ec4899;
  --tier-5-bg: #fdf2f8;

  /* Tier 6: 特異点 - 輝くゴールド */
  --tier-6-primary: #f59e0b;
  --tier-6-bg: #fffbeb;
}
```

---

## 📝 素材収集チェックリスト

### 必須（Phase 1）
- [ ] 背景画像 1枚（space_bg_1.png）
- [ ] 施設アイコン 6個（Tier 1-2）
- [ ] KPパーティクル（kp_particle.png）
- [ ] 進化ステージ 2枚（stage_1, stage_2）

### 推奨（Phase 2）
- [ ] 背景画像 追加2枚
- [ ] 施設アイコン 残り10個
- [ ] 進化ステージ 残り4枚
- [ ] 解禁エフェクト（unlock_burst.png）

### 完璧（Phase 3）
- [ ] シルエット版アイコン全16個
- [ ] UI素材一式
- [ ] Tierバッジ6種
- [ ] サウンドエフェクト

---

## 💡 素材がない場合の代替案

**絵素材が用意できない場合でも、以下で十分なクオリティを出せます：**

1. **絵文字ベース + グラデーション背景**
   - 現在の実装を活かしつつ、背景にCSSグラデーションを追加

2. **SVGアイコン + フィルター効果**
   - Heroicons, Lucide などの無料SVGをベースに
   - CSSフィルターでglow, shadow, hueRotateを適用

3. **CSS Onlyの宇宙背景**
   - CSS のみで星空を生成（radial-gradientの乱数配置）

4. **Canvaで自作**
   - 無料プランでもシンプルなアイコンは作成可能
   - 「ゲーム アイコン 宇宙」で検索してテンプレート利用

---

*最終更新: 2026年1月29日*

