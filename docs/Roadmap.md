# 要件定義 & 画面設計 (2025 Revised)

## 🎯 コンセプト: "Study & RPG Hybrid"
**「最強の記録ツール」** (Study) と **「Phaser.jsの全力RPG」** (Game) を融合させる。
この2つの世界を **Economy Loop (通貨システム)** で接続し、学習へのモチベーションを最大化する。

## 📱 3つのメインビュー (The Trinity Views)

### 1. ⏱️ Study画面 (The Tool)
**「本家の使いやすさ」を再現。清潔感・効率重視。**
- **UIテーマ**: 白背景、アクセントカラー（青・緑）。
- **機能**:
  - **Big Stopwatch**: 中央に大きく時間表示。
  - **教材選択**: 登録済み教材（青チャート、ターゲット1900等）をワンタップで開始。
  - **手動入力**: 「学校で3時間やってきた」等の事後入力フォーム。
  - **タイムライン**: 学習ログ（「数学を30分勉強しました」）と、管理者（兄）からの「いいね」「コメント」。

### 2. ⚔️ Game画面 (The Fantasy)
**「Phaser.jsの全力」。没入感・中毒性重視。**
- **UIテーマ**: 黒背景、ゴールド・赤の装飾（ダークファンタジー）。
- **機能**:
  - **オートバトル**: ドット絵キャラによる放置戦闘（勉強中以外も進行）。
  - **パーティ編成**: 自分のアバター + ガチャで引いた仲間モンスター。
  - **ボス挑戦**: 溜まった「勉強エネルギー」を消費して挑む。

### 3. 📊 Data画面 (The Visualization)
**「努力の可視化」。収集癖を刺激する。**
- **UIテーマ**: 情報整理されたダッシュボード。
- **機能**:
  - **棒グラフ/ドーナツグラフ**: 勉強量・科目比率の分析。
  - **ヒートマップ**: Githubのような「草」カレンダー。

---

## 🔁 経済圏の設計 (Economy Loop)

| 通貨 | 獲得方法 | 用途 |
| --- | --- | --- |
| **EXP (経験値)** | 勉強時間 (1分 = 10 EXP) | アバターのレベルアップ（ステータス上昇） |
| **Gold (お金)** | 放置バトル、勉強完了ボーナス | 武器防具の購入、施設強化 |
| **Gem (魔法石)** | **目標達成、管理者からの承認** | **ガチャ** (仲間・SSR装備) |

> **Core Loop**: 「ガチャ引きたい (Game) → ミッション達成のために単語帳やる (Study) → 石ゲット → ガチャ → 強くなる → ボスに勝つ」

---

## 🚀 開発ロードマップ

### Phase 1: 基礎構造の再構築 [Current Focus]
- [ ] 3タブUIの実装 (Study/Game/Data)
- [ ] テーマ切り替え実装 (白/黒)
- [ ] 通貨システム (Gold/Gem) のDB実装

### Phase 2: Game要素の実装
- [ ] Phaser.js の導入
- [ ] ドット絵アバター表示
- [ ] 簡易オートバトルロジック

### Phase 3: Data & Social
- [ ] Chart.js / ApexCharts 導入
- [ ] タイムライン & コメント機能

