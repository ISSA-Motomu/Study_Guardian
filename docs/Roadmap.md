# Study Guardian - 開発ロードマップ & ゲームデザイン詳細

## 🎯 プロジェクト概要

**Study Guardian** は「勉強」と「放置ゲーム」を融合させた学習アプリ。
2つのゲームシステム（バトルゲーム・進化ゲーム）を通貨経済で連携させ、
学習モチベーションを最大化する。

---

## 🎮 ゲームシステム詳細設計

### 1. 通貨システム（三層経済）

| 通貨 | アイコン | 獲得方法 | 用途 | 設計意図 |
|------|---------|---------|------|----------|
| **EXP** | ⭐ | 勉強完了(10EXP/分) | ショップで実物報酬購入 | 実生活への還元 |
| **KP** | 💡 | 進化ゲーム内生産 | 施設購入・アップグレード | ゲーム進行の基本通貨 |
| **勉強石** | 💎 | 勉強時間のみ | プレミアムショップ | 勉強の直接的報酬 |
| **Gold** | 🪙 | バトルゲーム | バトル関連アイテム | バトル報酬循環 |

#### 💎 勉強石獲得システム

```
勉強時間 → 勉強石
━━━━━━━━━━━━━━━━━━━━
15分以上  → 💎×1
30分以上  → 💎×2
45分以上  → 💎×3 + ボーナス1
60分以上  → 💎×4 + ボーナス2
90分以上  → 💎×6 + ボーナス3

振り返り記入ボーナス: +💎×1
```

> **設計原理**: 勉強石は「勉強でしか手に入らない」特別な通貨。
> 課金では買えない＝勉強した人だけが得られる報酬という価値観を確立。

---

### 2. 進化ゲーム（放置ゲーム）システム

#### 概念モデル

```
        ┌─────────────────────────────────────────┐
        │           ナレッジタウン                 │
        │  ┌───────┐  ┌───────┐  ┌───────┐       │
        │  │ 発電所 │  │ 研究所 │  │ 図書館 │ ...   │
        │  │ Lv.5  │  │ Lv.3  │  │ Lv.2  │       │
        │  └───────┘  └───────┘  └───────┘       │
        │                                         │
        │  ⚡ 合計生産力: 150 KP/秒               │
        │  💡 現在KP: 45,230                      │
        └─────────────────────────────────────────┘
```

#### 施設一覧と解放条件

| ID | 施設名 | 基本生産 | 基本価格 | 解放条件 | 設計意図 |
|----|--------|---------|----------|----------|----------|
| 1 | 発電所 | 1 KP/s | 10 KP | 初期解放 | チュートリアル |
| 2 | 研究所 | 5 KP/s | 100 KP | 累計KP 50+ | 序盤の目標 |
| 3 | 図書館 | 20 KP/s | 500 KP | 累計KP 500+ | 中盤移行点 |
| 4 | 大学 | 100 KP/s | 3,000 KP | 累計KP 3,000+ | 成長実感 |
| 5 | AI研究センター | 500 KP/s | 15,000 KP | 累計KP 15,000+ | 後半への入口 |
| 6 | 宇宙観測所 | 2,500 KP/s | 80,000 KP | 累計KP 80,000+ | エンドコンテンツ |
| 7 | 量子コンピュータ | 12,500 KP/s | 400,000 KP | 累計KP 400,000+ | 極限到達 |

#### 施設レベルアップ計算式

```
購入価格 = 基本価格 × (1.15 ^ 現在レベル)
生産量 = 基本生産 × レベル × グローバル倍率
```

#### プレイ時間予測

| マイルストーン | 予想到達時間 | 条件 |
|---------------|-------------|------|
| 研究所解放 | 5分 | 放置+勉強なし |
| 図書館解放 | 30分 | 放置+勉強なし |
| 大学解放 | 2時間 | 放置のみ |
| AI研究センター解放 | 8時間 | 放置+軽い勉強 |
| 宇宙観測所解放 | 2日 | 毎日1時間勉強 |
| 量子コンピュータ解放 | 1週間 | 毎日1時間勉強 |
| プレステージ1回目 | 3日〜1週間 | 施設Lv50以上 |

---

### 3. プレステージ（転生）システム

#### 概念

```
  第1周目                    転生                 第2周目
┌─────────┐              ┌─────────┐           ┌─────────┐
│ KP: 500K │  ─────▶    │ KP: 0   │  ─────▶  │ KP: 0   │
│ 施設Lv50│              │ 施設Lv0 │           │ 施設Lv0 │
│ ✨×0    │              │ ✨×5獲得│           │ ✨×5保持│
└─────────┘              └─────────┘           └─────────┘
                         グローバル倍率 +50%
```

#### プレステージ獲得計算

```javascript
獲得ポイント = floor(sqrt(累計KP / 1,000,000))
グローバル倍率 = 1 + (プレステージポイント × 0.1)
```

#### プレステージ報酬

| ポイント | ボーナス | 解放要素 |
|---------|---------|---------|
| 1 | +10% 全生産 | - |
| 5 | +50% 全生産 | オフライン進行解放 |
| 10 | +100% 全生産 | 自動購入機能解放 |
| 25 | +250% 全生産 | 新施設「シンギュラリティ」 |
| 50 | +500% 全生産 | 伝説の称号 |

---

### 4. ブースト＆インセンティブシステム

#### 勉強ブースト

```
勉強終了時に発動！
━━━━━━━━━━━━━━━━━━━━━━━━━━━
勉強時間 15分 → ×2ブースト 15分間
勉強時間 30分 → ×2ブースト 30分間
勉強時間 45分 → ×3ブースト 30分間
勉強時間 60分 → ×3ブースト 45分間 + KPボーナス
```

#### デイリーチャレンジ

```
毎日リセット！1日1回達成可能
━━━━━━━━━━━━━━━━━━━━━━━━━━━
条件: 30分以上の勉強を完了
報酬: 💎×2 + KP×1000 + 連続ボーナス
```

#### 連続ログインボーナス

```
Day 1: KP ×500
Day 2: KP ×1,000
Day 3: KP ×2,000 + 💎×1
Day 4: KP ×3,000
Day 5: KP ×5,000 + 💎×2
Day 6: KP ×7,500
Day 7: KP ×10,000 + 💎×5 + 特別報酬
```

---

### 5. 勉強石ショップ（プレミアムショップ）

#### カテゴリ分類

| カテゴリ | 設計意図 |
|---------|---------|
| 生産系 | 放置ゲームの進行を加速 |
| オフライン系 | アプリを開いていない時の進行 |
| 勉強系 | 勉強報酬を強化 |
| 特別 | 限定・コレクション要素 |
| 消費 | 即時効果で気軽に使用 |

#### アイテム一覧

| ID | 名前 | 💎価格 | 効果 | カテゴリ |
|----|------|-------|------|---------|
| gem_001 | 効率の書 | 10 | 全生産+10%（永久） | 生産 |
| gem_002 | 生産の秘伝 | 25 | 全生産+25%（永久） | 生産 |
| gem_003 | マスター生産術 | 50 | 全生産+50%（永久） | 生産 |
| gem_004 | オフラインの心得 | 15 | オフライン効率+20% | オフライン |
| gem_005 | 永久オフライン | 40 | オフライン効率+50% | オフライン |
| gem_006 | 無限のオフライン | 100 | オフライン進行100% | オフライン |
| gem_007 | 学習の書 | 20 | 勉強KP報酬+50% | 勉強 |
| gem_008 | 賢者の指輪 | 75 | 勉強石獲得+1/回 | 勉強 |
| gem_009 | ゴールデンペン | 30 | 勉強ブースト時間+50% | 勉強 |
| gem_010 | 伝説の冠 | 200 | 全効果+100%（唯一） | 特別 |
| gem_011 | 創始者の証 | 500 | 専用称号＋VIP特典 | 特別 |
| gem_021 | KPパック（小） | 5 | 即座にKP ×10,000 | 消費 |
| gem_022 | KPパック（大） | 15 | 即座にKP ×50,000 | 消費 |
| gem_023 | ダブル勉強石 | 8 | 次回勉強石2倍 | 消費 |

---

### 6. ファインマンテクニック（学習振り返り）

#### 概念

```
勉強終了時のフロー:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

1. タイマー停止
    ↓
2. 学習振り返り入力
   ┌─────────────────────────┐
   │ 📝 今日学んだことを      │
   │    説明してね            │
   │ ┌─────────────────────┐ │
   │ │ (自由記述)          │ │
   │ └─────────────────────┘ │
   │                         │
   │ 🏷️ 理解度はどのくらい？  │
   │ [🌟バッチリ] [😊OK]      │
   │ [🤔半分] [😵難しい]      │
   │                         │
   │ 🔄 次回復習したいこと    │
   │ ┌─────────────────────┐ │
   │ │ (任意)              │ │
   │ └─────────────────────┘ │
   └─────────────────────────┘
    ↓
3. 記録完了 → 振り返りボーナス💎+1
```

#### ファインマンテクニックとは？

> 物理学者リチャード・ファインマンが提唱した学習法。
> 「他人に教えるように説明する」ことで、自分の理解度を確認し、
> 知識の定着を促進する。

---

## 📊 プレイヤー進行シミュレーション

### シナリオ: 毎日30分勉強する中学生

| 日数 | 累計勉強時間 | 勉強石累計 | 進化ゲーム状況 | 解放済み機能 |
|------|-------------|-----------|---------------|-------------|
| 1日目 | 30分 | 💎×3 | 研究所Lv5 | 基本機能 |
| 3日目 | 1.5時間 | 💎×10 | 図書館解放 | デイリーチャレンジ |
| 7日目 | 3.5時間 | 💎×25 | 大学Lv3 | オフライン進行 |
| 14日目 | 7時間 | 💎×55 | AI研究センター | 自動購入 |
| 30日目 | 15時間 | 💎×120 | 宇宙観測所 | プレステージ1回 |
| 60日目 | 30時間 | 💎×250 | 量子コンピュータ | 伝説の冠購入可能 |

---

## 🚀 開発ロードマップ

### ✅ Phase 1: 基盤構築 (完了)
- [x] Vue 3 + Pinia アーキテクチャ
- [x] LINE LIFF 統合
- [x] Google Sheets バックエンド
- [x] 基本的な勉強タイマー

### ✅ Phase 2: 学習機能 (完了)
- [x] 科目選択・記録
- [x] 目標管理
- [x] 本棚・教材管理
- [x] ショップシステム

### ✅ Phase 3: ゲーミフィケーション基礎 (完了)
- [x] オートバトルシステム
- [x] 進化ゲーム（施設・生産）
- [x] プレステージシステム
- [x] 実績システム

### ✅ Phase 4: 経済システム強化 (完了)
- [x] 勉強石システム
- [x] プレミアムショップ
- [x] ブースト・インセンティブ
- [x] デイリーチャレンジ

### ✅ Phase 5: 学習品質向上 (完了)
- [x] ファインマンテクニック振り返り
- [x] 理解度記録
- [x] 復習ノート機能
- [x] 学習記録のローカル保存

### 🔄 Phase 6: 最適化 (進行中)
- [x] APIキャッシュ
- [x] エラーハンドリング
- [ ] オフライン対応強化
- [ ] パフォーマンス最適化

### 📋 Phase 7: 将来拡張 (予定)
- [ ] ソーシャル機能（フレンド対戦）
- [ ] イベントシステム
- [ ] シーズン報酬
- [ ] カスタムアバター

---

## 🏗️ 技術スタック

| レイヤー | 技術 | 役割 |
|---------|------|------|
| Frontend | Vue 3 + Pinia | SPA・状態管理 |
| Styling | Tailwind CSS | UIスタイリング |
| Backend | Python Flask | API・ビジネスロジック |
| Database | Google Sheets | データ永続化 |
| Platform | LINE LIFF | ユーザー認証・配信 |
| Hosting | Render | デプロイ |

---

## 📁 プロジェクト構成

```
Study_Guardian/
├── app.py              # Flask メインアプリ
├── handlers/           # APIハンドラー
│   ├── study.py        # 勉強関連API
│   ├── shop.py         # ショップAPI
│   └── ...
├── services/           # ビジネスロジック
│   ├── stats.py        # 統計計算
│   └── ...
├── frontend/           # Vue 3 フロントエンド
│   ├── src/
│   │   ├── stores/     # Pinia ストア
│   │   │   ├── study.js      # 勉強状態
│   │   │   ├── evolution.js  # 進化ゲーム
│   │   │   └── ...
│   │   ├── components/ # UIコンポーネント
│   │   └── ...
│   └── ...
└── docs/               # ドキュメント
    ├── Roadmap.md      # このファイル
    └── ...
```

---

*Last Updated: 2025年1月*

