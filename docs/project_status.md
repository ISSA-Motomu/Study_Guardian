# プロジェクト進捗と今後のロードマップ

## 1. 最新アップデート (v2.0: ゲーミフィケーション強化)
直近の開発で、子供たちのモチベーションを高めるための「演出・遊び」の要素を大幅に強化しました。

### 🏆 ランク・メダルシステム
- **ランク制度**: 累計勉強時間に応じてランクが変動（Rank E: 見習い 〜 Rank S: 伝説の勇者）。
- **ビジュアル化**: ステータス画面に現在のランクに応じたメダル画像を表示。
- **ランクアップ通知**: 勉強承認時にランクが上がると、自動でお祝いメッセージと新しいメダル画像を送信。

### 📊 競争と可視化
- **週間ランキング**: 直近7日間の獲得EXPを集計し、上位3名＋自分の順位をステータス画面に表示。
- **週間学習グラフ**: 「詳細ステータス」にて、直近7日間の日別勉強時間を棒グラフで表示（Looker Studio遷移なしで完結）。

### 🎲 ガチャシステム
- **機能**: 500 EXPを消費してアイテムを獲得できるお楽しみ機能。
- **ロック機能**: 「Rank D」以上にならないと引けない制限を設け、初期の勉強動機付けに利用。
- **景品**: 「EXP1.5倍チケット」「家事免除シールド」「臨時ボーナス」など。

### 👶 オンボーディング（初期体験）
- **ウェルカムボーナス**: 初回登録時に名前を入力すると、即座に **500 EXP** を付与。
- **目的**: 登録直後から買い物の楽しさを予感させ、離脱を防ぐ。

---

## 2. 基盤機能 (v1.0: 基本サイクル)

### 📚 勉強管理
- ストップウォッチ記録、教科選択、振り返り入力。
- 親への承認依頼フロー、偏差値（佐賀県統計モデル）算出。

### 🧹 お手伝い（ジョブ）
- タスク募集掲示板、完了報告、報酬付与。

### 🛍️ 経済・ショップ
- EXPを使ったアイテム購入リクエスト、在庫管理。

### 👑 管理機能
- LINE上での一括承認（勉強・ジョブ・買い物）、管理者ダッシュボード。

---

## 3. 今後のロードマップ (Next Steps)

### 🚀 最優先: アチーブメント（実績）の実装
現在、ステータス画面に表示されている「リボン」は見た目だけの仮実装です。これを実機能化します。

1.  **条件判定ロジックの実装**
    - 勉強終了時やジョブ完了時に、以下の条件をチェックするロジックを追加。
        - **早起き**: 朝8時以前の勉強記録があるか？
        - **家事王**: 完了したジョブ数が特定回数を超えたか？
        - **継続**: 3日連続で勉強記録があるか？
    - **データ保存**: 獲得したリボン情報をユーザーデータ（スプレッドシート）に保存。
    - **表示連携**: ステータス画面で、獲得済みのリボンのみをカラー表示（未獲得はグレーアウトまたは非表示）。

### 🎨 演出・UX強化 (Phase 3)
1.  **学習ストリーク（継続）ボーナス**
    - 「連続勉強日数」をカウントし、継続日数に応じて獲得EXPに倍率（x1.1など）をかける。
2.  **季節限定テーマ**
    - ハロウィン、クリスマス、正月などに合わせてメダルや背景画像を切り替えるイベント機能。
3.  **レベルアップ演出の強化**
    - ランクアップ時に、より派手な画像やスタンプを送信する。

### 🔧 技術的負債の解消
1.  **`app.py` の分割 (Blueprint化)**
    - ファイルが肥大化しているため、機能ごと（`routes/study.py`, `routes/gacha.py` 等）に分割して可読性を向上させる。
2.  **入力の堅牢化**
    - Googleフォーム連携の自動化（GAS利用）。

---

## 4. 開発体制メモ
- **アーキテクチャ**: Flask + Google Sheets (DB代わり) + LINE Messaging API
- **デプロイ**: Render
- **方針**: 家族利用に特化し、スプレッドシートでのデータ管理を継続する。
